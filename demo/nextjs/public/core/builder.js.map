{"version":3,"file":"builder.js","sources":["../packages/core/src/api.ts","../packages/core/src/utils/urlValidator.ts","../packages/core/src/utils/logger.ts","../packages/core/src/MJMLConverter.ts","../packages/core/src/types.ts","../packages/core/src/templates.ts","../node_modules/dompurify/dist/purify.es.mjs","../packages/core/src/utils/sanitize.ts","../packages/react/src/KapthaEmailEditorWrapper.tsx","../node_modules/react-dnd/dist/core/DndContext.js","../node_modules/react/jsx-runtime.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/redux/es/redux.js","../node_modules/@react-dnd/invariant/dist/index.js","../node_modules/dnd-core/dist/utils/js_utils.js","../node_modules/dnd-core/dist/actions/dragDrop/types.js","../node_modules/dnd-core/dist/actions/dragDrop/local/setClientOffset.js","../node_modules/dnd-core/dist/actions/dragDrop/beginDrag.js","../node_modules/dnd-core/dist/actions/dragDrop/drop.js","../node_modules/dnd-core/dist/actions/dragDrop/endDrag.js","../node_modules/dnd-core/dist/utils/matchesType.js","../node_modules/dnd-core/dist/actions/dragDrop/hover.js","../node_modules/dnd-core/dist/actions/dragDrop/publishDragSource.js","../node_modules/dnd-core/dist/classes/DragDropManagerImpl.js","../node_modules/dnd-core/dist/actions/dragDrop/index.js","../node_modules/dnd-core/dist/utils/coords.js","../node_modules/dnd-core/dist/utils/dirtiness.js","../node_modules/dnd-core/dist/classes/DragDropMonitorImpl.js","../node_modules/@react-dnd/asap/dist/makeRequestCall.js","../node_modules/@react-dnd/asap/dist/RawTask.js","../node_modules/@react-dnd/asap/dist/asap.js","../node_modules/@react-dnd/asap/dist/AsapQueue.js","../node_modules/@react-dnd/asap/dist/TaskFactory.js","../node_modules/dnd-core/dist/actions/registry.js","../node_modules/dnd-core/dist/contracts.js","../node_modules/dnd-core/dist/interfaces.js","../node_modules/dnd-core/dist/utils/getNextUniqueId.js","../node_modules/dnd-core/dist/classes/HandlerRegistryImpl.js","../node_modules/dnd-core/dist/utils/equality.js","../node_modules/dnd-core/dist/reducers/dirtyHandlerIds.js","../node_modules/dnd-core/dist/reducers/dragOffset.js","../node_modules/dnd-core/dist/reducers/dragOperation.js","../node_modules/dnd-core/dist/reducers/refCount.js","../node_modules/dnd-core/dist/reducers/stateId.js","../node_modules/dnd-core/dist/reducers/index.js","../node_modules/dnd-core/dist/createDragDropManager.js","../node_modules/react-dnd/dist/core/DndProvider.js","../node_modules/fast-deep-equal/index.js","../node_modules/react-dnd/dist/hooks/useIsomorphicLayoutEffect.js","../node_modules/react-dnd/dist/hooks/useMonitorOutput.js","../node_modules/react-dnd/dist/hooks/useCollector.js","../node_modules/react-dnd/dist/hooks/useCollectedProps.js","../node_modules/react-dnd/dist/hooks/useOptionalFactory.js","../node_modules/react-dnd/dist/hooks/useDrag/connectors.js","../node_modules/react-dnd/dist/internals/DragSourceMonitorImpl.js","../node_modules/react-dnd/dist/internals/DropTargetMonitorImpl.js","../node_modules/@react-dnd/shallowequal/dist/index.js","../node_modules/react-dnd/dist/internals/isRef.js","../node_modules/react-dnd/dist/internals/wrapConnectorHooks.js","../node_modules/react-dnd/dist/internals/SourceConnector.js","../node_modules/react-dnd/dist/internals/TargetConnector.js","../node_modules/react-dnd/dist/hooks/useDragDropManager.js","../node_modules/react-dnd/dist/hooks/useDrag/DragSourceImpl.js","../node_modules/react-dnd/dist/hooks/useDrag/useRegisteredDragSource.js","../node_modules/react-dnd/dist/hooks/useDrag/useDragSource.js","../node_modules/react-dnd/dist/hooks/useDrag/useDragType.js","../node_modules/react-dnd/dist/internals/registration.js","../node_modules/react-dnd/dist/hooks/useDrag/useDrag.js","../node_modules/react-dnd/dist/hooks/useDrag/useDragSourceMonitor.js","../node_modules/react-dnd/dist/hooks/useDrag/useDragSourceConnector.js","../node_modules/react-dnd/dist/hooks/useDrop/connectors.js","../node_modules/react-dnd/dist/hooks/useDrop/DropTargetImpl.js","../node_modules/react-dnd/dist/hooks/useDrop/useRegisteredDropTarget.js","../node_modules/react-dnd/dist/hooks/useDrop/useDropTarget.js","../node_modules/react-dnd/dist/hooks/useDrop/useAccept.js","../node_modules/react-dnd/dist/hooks/useDrop/useDrop.js","../node_modules/react-dnd/dist/hooks/useDrop/useDropTargetMonitor.js","../node_modules/react-dnd/dist/hooks/useDrop/useDropTargetConnector.js","../node_modules/react-dnd-html5-backend/dist/utils/js_utils.js","../node_modules/react-dnd-html5-backend/dist/EnterLeaveCounter.js","../node_modules/react-dnd-html5-backend/dist/NativeDragSources/NativeDragSource.js","../node_modules/react-dnd-html5-backend/dist/NativeTypes.js","../node_modules/react-dnd-html5-backend/dist/NativeDragSources/getDataFromDataTransfer.js","../node_modules/react-dnd-html5-backend/dist/NativeDragSources/nativeTypesConfig.js","../node_modules/react-dnd-html5-backend/dist/NativeDragSources/index.js","../node_modules/react-dnd-html5-backend/dist/BrowserDetector.js","../node_modules/react-dnd-html5-backend/dist/MonotonicInterpolant.js","../node_modules/react-dnd-html5-backend/dist/OffsetUtils.js","../node_modules/react-dnd-html5-backend/dist/OptionsReader.js","../node_modules/react-dnd-html5-backend/dist/HTML5BackendImpl.js","../node_modules/react-dnd-html5-backend/dist/index.js","../packages/react/src/EmailEditorContext.tsx","../packages/react/src/DropFeedback.tsx","../packages/react/src/constants/componentTemplates.ts","../node_modules/lucide-react/dist/esm/shared/src/utils.js","../node_modules/lucide-react/dist/esm/defaultAttributes.js","../node_modules/lucide-react/dist/esm/Icon.js","../node_modules/lucide-react/dist/esm/createLucideIcon.js","../node_modules/lucide-react/dist/esm/icons/box.js","../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../node_modules/lucide-react/dist/esm/icons/code.js","../node_modules/lucide-react/dist/esm/icons/columns-3.js","../node_modules/lucide-react/dist/esm/icons/columns-4.js","../node_modules/lucide-react/dist/esm/icons/copy.js","../node_modules/lucide-react/dist/esm/icons/download.js","../node_modules/lucide-react/dist/esm/icons/eye.js","../node_modules/lucide-react/dist/esm/icons/file-text.js","../node_modules/lucide-react/dist/esm/icons/image.js","../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../node_modules/lucide-react/dist/esm/icons/layout-panel-left.js","../node_modules/lucide-react/dist/esm/icons/minus.js","../node_modules/lucide-react/dist/esm/icons/monitor.js","../node_modules/lucide-react/dist/esm/icons/moon.js","../node_modules/lucide-react/dist/esm/icons/mouse-pointer-click.js","../node_modules/lucide-react/dist/esm/icons/move-vertical.js","../node_modules/lucide-react/dist/esm/icons/palette.js","../node_modules/lucide-react/dist/esm/icons/pen-line.js","../node_modules/lucide-react/dist/esm/icons/redo-2.js","../node_modules/lucide-react/dist/esm/icons/share-2.js","../node_modules/lucide-react/dist/esm/icons/smartphone.js","../node_modules/lucide-react/dist/esm/icons/sun.js","../node_modules/lucide-react/dist/esm/icons/tablet.js","../node_modules/lucide-react/dist/esm/icons/timer.js","../node_modules/lucide-react/dist/esm/icons/trash-2.js","../node_modules/lucide-react/dist/esm/icons/type.js","../node_modules/lucide-react/dist/esm/icons/undo-2.js","../node_modules/lucide-react/dist/esm/icons/video.js","../node_modules/lucide-react/dist/esm/icons/x.js","../packages/react/src/ComponentToolbar.tsx","../packages/react/src/DraggableComponent.tsx","../packages/react/src/ColumnDropZone.tsx","../packages/react/src/ColumnsRenderer.tsx","../packages/react/src/ComponentRenderer.tsx","../packages/react/src/ImageUploadModal.tsx","../packages/react/src/PropertyEditor.tsx","../packages/react/src/CanvasDropZone.tsx","../packages/react/src/TemplateSelector.tsx","../packages/react/src/DesignSystemPanel.tsx","../packages/react/src/ExportModal.tsx","../packages/react/src/EmailEditor.tsx","../packages/react/src/SavedBlocksPanel.tsx","../packages/react/src/index.ts"],"sourcesContent":["/**\n * Framework-agnostic Kaptha Email Editor API\n * Exposes global window.kaptha namespace with createEditor() method\n */\n\nimport type { EmailComponent, DesignSystem, EmailTemplate } from './types';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface EditorConfig {\n  id: string;                           // DOM element ID to mount editor\n  apiKey: string;                       // Required API key\n  workspaceId?: string;                 // Optional workspace ID (extracted from key if not provided)\n  minHeight?: string;                   // Minimum editor height\n  displayMode?: 'email' | 'web';        // Display mode\n  appearance?: AppearanceConfig;        // Custom appearance\n  customFonts?: Font[];                 // Custom fonts\n  customBlocks?: CustomBlock[];         // Custom saved blocks\n  designSystem?: Partial<DesignSystem>; // Design system overrides\n  onLoad?: () => void;                  // Called when editor loads\n  onReady?: () => void;                 // Called when editor is ready\n  onDesignChange?: (design: EmailDesign) => void; // Called on design changes\n}\n\nexport interface AppearanceConfig {\n  theme?: 'light' | 'dark';\n  primaryColor?: string;\n  panels?: {\n    components?: boolean;\n    layers?: boolean;\n    properties?: boolean;\n  };\n}\n\nexport interface Font {\n  name: string;\n  url: string;\n  weights?: number[];\n}\n\nexport interface CustomBlock {\n  id: string;\n  name: string;\n  category?: string;\n  thumbnail?: string;\n  components: EmailComponent[];\n}\n\nexport interface EmailDesign {\n  components: EmailComponent[];\n  designSystem?: DesignSystem;\n  version?: string;\n}\n\nexport interface EditorMethods {\n  loadDesign: (design: EmailDesign) => void;\n  saveDesign: () => EmailDesign;\n  exportHtml: (options?: ExportOptions) => Promise<{ html: string; mjml?: string }>;\n  exportMjml: () => string;\n  exportJson: () => EmailDesign;\n  addEventListener: (event: string, callback: Function) => void;\n  removeEventListener: (event: string, callback: Function) => void;\n  setDesignSystem: (designSystem: Partial<DesignSystem>) => void;\n  destroy: () => void;\n}\n\nexport interface ExportOptions {\n  beautify?: boolean;\n  minify?: boolean;\n  inlineCSS?: boolean;\n}\n\ninterface KeysConfig {\n  version: string;\n  keys: {\n    [apiKey: string]: {\n      workspaceId: string;\n      tier: 'free' | 'dev' | 'pro' | 'enterprise';\n      allowedDomains: string[];\n      active: boolean;\n      createdAt: string;\n      email?: string;\n      notes?: string;\n    };\n  };\n}\n\n// Global window augmentation\ndeclare global {\n  interface Window {\n    __KAPTHA_KEYS_CONFIG__?: KeysConfig;\n    kaptha?: KapthaAPI;\n    kapthaEmailEditor?: KapthaAPI;\n  }\n}\n\n// ============================================================================\n// Kaptha Editor Class\n// ============================================================================\n\nexport class KapthaEditor implements EditorMethods {\n  private config: EditorConfig;\n  private apiKey: string;\n  private workspaceId: string;\n  private container: HTMLElement | null = null;\n  private editorInstance: any = null; // React editor instance (ref)\n  private reactRoot: any = null; // ReactDOM root\n  private eventListeners: Map<string, Function[]> = new Map();\n  \n  // Static config loaded from JSON file\n  private static keysConfig: KeysConfig | null = null;\n  \n  constructor(config: EditorConfig) {\n    this.config = config;\n    \n    // Load static config on first use\n    if (!KapthaEditor.keysConfig) {\n      KapthaEditor.keysConfig = this.loadStaticConfig();\n    }\n    \n    // API key is REQUIRED\n    if (!config.apiKey) {\n      throw new Error(\n        '[Kaptha] API key is required. Contact hello@kaptha.dev for your free key'\n      );\n    }\n    \n    // Validate API key format\n    if (!config.apiKey.startsWith('kpt_')) {\n      throw new Error('[Kaptha] Invalid API key format. Must start with \"kpt_\"');\n    }\n    \n    // Validate against static config\n    const keyData = KapthaEditor.keysConfig.keys[config.apiKey];\n    if (!keyData) {\n      throw new Error(\n        `[Kaptha] Invalid API key. Contact hello@kaptha.dev to register your key`\n      );\n    }\n    \n    // Check if key is active\n    if (!keyData.active) {\n      throw new Error(\n        `[Kaptha] This API key has been deactivated. Contact hello@kaptha.dev`\n      );\n    }\n    \n    // Validate domain restriction\n    if (!this.validateDomain(config.apiKey, keyData.allowedDomains)) {\n      const currentDomain = typeof window !== 'undefined' ? window.location.hostname : 'unknown';\n      throw new Error(\n        `[Kaptha] Domain \"${currentDomain}\" is not authorized for this API key. ` +\n        `Authorized domains: ${keyData.allowedDomains.join(', ')}`\n      );\n    }\n    \n    this.apiKey = config.apiKey;\n    this.workspaceId = config.workspaceId || keyData.workspaceId;\n    \n    console.log(`[Kaptha] Initialized with API key: ${this.apiKey.substring(0, 15)}...`);\n    console.log(`[Kaptha] Workspace: ${this.workspaceId}`);\n    console.log(`[Kaptha] Tier: ${keyData.tier}`);\n    \n    // Initialize editor\n    this.init();\n  }\n  \n  private loadStaticConfig(): KeysConfig {\n    // Phase 1: Load from bundled config or window global\n    // Phase 2: Fetch from API\n    if (typeof window !== 'undefined' && window.__KAPTHA_KEYS_CONFIG__) {\n      return window.__KAPTHA_KEYS_CONFIG__;\n    }\n    \n    // Default empty config (will fail validation)\n    return {\n      version: '1.0.0',\n      keys: {}\n    };\n  }\n  \n  private validateDomain(apiKey: string, allowedDomains: string[]): boolean {\n    if (typeof window === 'undefined') return true; // SSR/Node.js environment\n    \n    const currentDomain = window.location.hostname;\n    \n    // Allow file:// protocol for local testing (empty hostname)\n    if (window.location.protocol === 'file:' && !currentDomain) {\n      // Treat file:// as localhost for validation\n      return allowedDomains.some(pattern => \n        pattern === '*' || \n        pattern === 'localhost' || \n        pattern === '127.0.0.1' ||\n        pattern.startsWith('*.local')\n      );\n    }\n    \n    return allowedDomains.some(pattern => {\n      if (pattern === '*') return true;\n      if (pattern.startsWith('*.')) {\n        const suffix = pattern.substring(2);\n        return currentDomain.endsWith(suffix);\n      }\n      return currentDomain === pattern;\n    });\n  }\n  \n  private init(): void {\n    // Find container element\n    if (typeof window === 'undefined') return;\n    \n    this.container = document.getElementById(this.config.id);\n    if (!this.container) {\n      throw new Error(`[Kaptha] Container element with id \"${this.config.id}\" not found`);\n    }\n    \n    // Set minimum height\n    if (this.config.minHeight) {\n      this.container.style.minHeight = this.config.minHeight;\n    }\n    \n    // Mount React editor\n    this.mountReactEditor();\n    \n    // Call onLoad callback\n    if (this.config.onLoad) {\n      this.config.onLoad();\n    }\n  }\n  \n  private mountReactEditor(): void {\n    if (typeof window === 'undefined' || !this.container) return;\n    \n    // Check if React and ReactDOM are available\n    const React = (window as any).React;\n    const ReactDOM = (window as any).ReactDOM;\n    \n    if (!React || !ReactDOM) {\n      console.error('[Kaptha] React and ReactDOM must be loaded before initializing the editor');\n      console.error('[Kaptha] Include: <script src=\"https://unpkg.com/react@18/umd/react.production.min.js\"></script>');\n      console.error('[Kaptha] Include: <script src=\"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js\"></script>');\n      return;\n    }\n    \n    // Get EmailEditor component from window (will be exposed by bundle)\n    const EmailEditor = (window as any).KapthaEmailEditor?.EmailEditor;\n    \n    if (!EmailEditor) {\n      console.error('[Kaptha] EmailEditor component not found in bundle');\n      return;\n    }\n    \n    try {\n      // Create ref to access editor methods\n      const editorRef = React.createRef();\n      \n      // Create React root and render\n      this.reactRoot = ReactDOM.createRoot(this.container);\n      const editorProps = {\n        ref: editorRef,\n        initialTemplate: this.config.designSystem ? {\n          name: 'Initial Design',\n          components: []\n        } : undefined,\n        onChange: (components: any[]) => {\n          if (this.config.onDesignChange) {\n            this.config.onDesignChange({ components });\n          }\n        },\n        height: this.config.minHeight || '600px'\n      };\n      \n      this.reactRoot.render(React.createElement(EmailEditor, editorProps));\n      \n      // Store ref for method calls\n      setTimeout(() => {\n        this.editorInstance = editorRef.current;\n        console.log('[Kaptha] React editor mounted successfully');\n        \n        // Call onReady callback\n        if (this.config.onReady) {\n          this.config.onReady();\n        }\n      }, 100);\n    } catch (error) {\n      console.error('[Kaptha] Failed to mount React editor:', error);\n    }\n  }\n  \n  // ============================================================================\n  // Public API Methods\n  // ============================================================================\n  \n  loadDesign(design: EmailDesign): void {\n    if (!this.editorInstance) {\n      console.warn('[Kaptha] Editor not ready yet');\n      return;\n    }\n    this.editorInstance.loadDesign(design);\n  }\n  \n  saveDesign(): EmailDesign {\n    if (!this.editorInstance) {\n      console.warn('[Kaptha] Editor not ready yet');\n      return { components: [] };\n    }\n    return this.editorInstance.saveDesign();\n  }\n  \n  async exportHtml(options?: ExportOptions): Promise<{ html: string; mjml?: string }> {\n    if (!this.editorInstance) {\n      console.warn('[Kaptha] Editor not ready yet');\n      return { html: '', mjml: '' };\n    }\n    return this.editorInstance.exportHtml();\n  }\n  \n  exportMjml(): string {\n    if (!this.editorInstance) {\n      console.warn('[Kaptha] Editor not ready yet');\n      return '';\n    }\n    return this.editorInstance.exportMjml();\n  }\n  \n  exportJson(): EmailDesign {\n    if (!this.editorInstance) {\n      console.warn('[Kaptha] Editor not ready yet');\n      return { components: [] };\n    }\n    return this.editorInstance.exportJson();\n  }\n  \n  addEventListener(event: string, callback: Function): void {\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, []);\n    }\n    this.eventListeners.get(event)!.push(callback);\n  }\n  \n  removeEventListener(event: string, callback: Function): void {\n    const listeners = this.eventListeners.get(event);\n    if (listeners) {\n      const index = listeners.indexOf(callback);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n  \n  setDesignSystem(designSystem: Partial<DesignSystem>): void {\n    console.log('[Kaptha] setDesignSystem called', designSystem);\n    // TODO: Implement with React editor\n    if (this.editorInstance?.setDesignSystem) {\n      this.editorInstance.setDesignSystem(designSystem);\n    }\n  }\n  \n  destroy(): void {\n    // Clean up event listeners\n    this.eventListeners.clear();\n    \n    // Clean up React root\n    if (this.reactRoot) {\n      this.reactRoot.unmount();\n      this.reactRoot = null;\n    }\n    \n    this.editorInstance = null;\n    \n    // Clear container\n    if (this.container) {\n      this.container.innerHTML = '';\n    }\n    \n    console.log('[Kaptha] Editor destroyed');\n  }\n  \n  // Internal method to attach React editor instance\n  _attachEditorInstance(instance: any): void {\n    this.editorInstance = instance;\n    \n    // Call onReady callback\n    if (this.config.onReady) {\n      this.config.onReady();\n    }\n  }\n}\n\n// ============================================================================\n// Global Kaptha API\n// ============================================================================\n\nexport interface KapthaAPI {\n  version: string;\n  init: (config: EditorConfig) => KapthaEditor;\n  createEditor: (config: EditorConfig) => KapthaEditor;\n}\n\n/**\n * Initialize global kaptha namespace\n * This is called when the library is loaded\n */\nexport function initKapthaAPI(): void {\n  if (typeof window === 'undefined') return;\n  \n  const createEditorFn = (config: EditorConfig) => new KapthaEditor(config);\n  \n  window.kaptha = {\n    version: '2.0.0',\n    init: createEditorFn,              // Unlayer-style: kaptha.init()\n    createEditor: createEditorFn,       // Alternative: kaptha.createEditor()\n  };\n  \n  // Also expose as kapthaEmailEditor for convenience\n  (window as any).kapthaEmailEditor = window.kaptha;\n  \n  console.log('[Kaptha] API initialized - window.kaptha.init() and window.kapthaEmailEditor.init() available');\n}\n\n// Auto-initialize when loaded in browser\nif (typeof window !== 'undefined') {\n  initKapthaAPI();\n}\n","/**\n * URL validation utilities to prevent SSRF and other URL-based attacks\n */\n\n/**\n * Configuration options for URL validation\n */\nexport interface UrlValidationOptions {\n  /**\n   * Allowed URL protocols\n   * @default ['https:']\n   */\n  allowedProtocols?: string[];\n\n  /**\n   * Allowed domain whitelist (if provided, only these domains are allowed)\n   * @default undefined (all domains allowed)\n   */\n  allowedDomains?: string[];\n\n  /**\n   * Blocked domains (takes precedence over allowedDomains)\n   * @default [] (localhost, 127.0.0.1, internal IPs blocked by default)\n   */\n  blockedDomains?: string[];\n\n  /**\n   * Whether to allow localhost/internal IPs\n   * @default false\n   */\n  allowLocalhost?: boolean;\n\n  /**\n   * Request timeout in milliseconds\n   * @default 5000\n   */\n  timeout?: number;\n}\n\n/**\n * Default blocked domains and IPs to prevent SSRF\n */\nconst DEFAULT_BLOCKED_DOMAINS = [\n  'localhost',\n  '127.0.0.1',\n  '0.0.0.0',\n  '::1',\n  '169.254.169.254', // AWS metadata endpoint\n  'metadata.google.internal', // GCP metadata endpoint\n];\n\n/**\n * Checks if a hostname is a private/internal IP address\n */\nfunction isPrivateIp(hostname: string): boolean {\n  // IPv4 private ranges\n  const ipv4Patterns = [\n    /^10\\./,                    // 10.0.0.0/8\n    /^172\\.(1[6-9]|2[0-9]|3[01])\\./, // 172.16.0.0/12\n    /^192\\.168\\./,              // 192.168.0.0/16\n    /^127\\./,                   // 127.0.0.0/8 (loopback)\n    /^169\\.254\\./,              // 169.254.0.0/16 (link-local)\n  ];\n\n  // IPv6 private/link-local ranges\n  const ipv6Patterns = [\n    /^::1$/,                    // loopback\n    /^fe80:/i,                  // link-local\n    /^fc00:/i,                  // unique local\n    /^fd00:/i,                  // unique local\n  ];\n\n  return ipv4Patterns.some(pattern => pattern.test(hostname)) ||\n         ipv6Patterns.some(pattern => pattern.test(hostname));\n}\n\n/**\n * Validates a URL against security policies\n *\n * @param url - The URL to validate\n * @param options - Validation options\n * @returns Validation result with details\n *\n * @example\n * ```typescript\n * const result = validateUrl('https://api.example.com/convert');\n * if (!result.isValid) {\n *   console.error('Invalid URL:', result.reason);\n * }\n * ```\n *\n * @example\n * ```typescript\n * // With custom options\n * const result = validateUrl('https://api.example.com', {\n *   allowedDomains: ['api.example.com', 'backup.example.com']\n * });\n * ```\n */\nexport function validateUrl(\n  url: string,\n  options: UrlValidationOptions = {}\n): {\n  isValid: boolean;\n  reason?: string;\n  parsedUrl?: URL;\n} {\n  const {\n    allowedProtocols = ['https:'],\n    allowedDomains,\n    blockedDomains = DEFAULT_BLOCKED_DOMAINS,\n    allowLocalhost = false,\n  } = options;\n\n  // Basic URL format validation\n  let parsedUrl: URL;\n  try {\n    parsedUrl = new URL(url);\n  } catch (error) {\n    return {\n      isValid: false,\n      reason: 'Invalid URL format',\n    };\n  }\n\n  // Check protocol\n  if (!allowedProtocols.includes(parsedUrl.protocol)) {\n    return {\n      isValid: false,\n      reason: `Protocol ${parsedUrl.protocol} not allowed. Allowed protocols: ${allowedProtocols.join(', ')}`,\n      parsedUrl,\n    };\n  }\n\n  // Extract hostname\n  const hostname = parsedUrl.hostname.toLowerCase();\n\n  // Check for blocked domains\n  if (blockedDomains.some(blocked => hostname === blocked || hostname.endsWith(`.${blocked}`))) {\n    return {\n      isValid: false,\n      reason: `Domain ${hostname} is blocked`,\n      parsedUrl,\n    };\n  }\n\n  // Check for private/internal IPs (unless explicitly allowed)\n  if (!allowLocalhost && isPrivateIp(hostname)) {\n    return {\n      isValid: false,\n      reason: `Private IP addresses and localhost are not allowed`,\n      parsedUrl,\n    };\n  }\n\n  // Check domain whitelist (if provided)\n  if (allowedDomains && allowedDomains.length > 0) {\n    const isAllowed = allowedDomains.some(\n      allowed => hostname === allowed || hostname.endsWith(`.${allowed}`)\n    );\n\n    if (!isAllowed) {\n      return {\n        isValid: false,\n        reason: `Domain ${hostname} not in whitelist. Allowed domains: ${allowedDomains.join(', ')}`,\n        parsedUrl,\n      };\n    }\n  }\n\n  return {\n    isValid: true,\n    parsedUrl,\n  };\n}\n\n/**\n * Validates and sanitizes a URL, throwing an error if invalid\n *\n * @param url - The URL to validate\n * @param options - Validation options\n * @returns The parsed URL object\n * @throws Error if URL is invalid\n *\n * @example\n * ```typescript\n * try {\n *   const safeUrl = assertValidUrl('https://api.example.com');\n *   fetch(safeUrl.toString());\n * } catch (error) {\n *   console.error('URL validation failed:', error.message);\n * }\n * ```\n */\nexport function assertValidUrl(\n  url: string,\n  options: UrlValidationOptions = {}\n): URL {\n  const result = validateUrl(url, options);\n\n  if (!result.isValid) {\n    throw new Error(`URL validation failed: ${result.reason}`);\n  }\n\n  return result.parsedUrl!;\n}\n\n/**\n * Creates a timeout-wrapped fetch function\n *\n * @param url - The URL to fetch\n * @param init - Fetch init options\n * @param timeout - Timeout in milliseconds (default: 5000)\n * @returns Promise that resolves to the fetch response\n *\n * @example\n * ```typescript\n * const response = await fetchWithTimeout('https://api.example.com', {\n *   method: 'POST',\n *   body: JSON.stringify(data)\n * }, 5000);\n * ```\n */\nexport async function fetchWithTimeout(\n  url: string,\n  init?: RequestInit,\n  timeout: number = 5000\n): Promise<Response> {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url, {\n      ...init,\n      signal: controller.signal,\n    });\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    if (error instanceof Error && error.name === 'AbortError') {\n      throw new Error(`Request timeout after ${timeout}ms`);\n    }\n    throw error;\n  }\n}\n\n/**\n * Validates URL and performs a safe fetch with timeout\n *\n * @param url - The URL to fetch\n * @param options - Validation and fetch options\n * @returns Promise that resolves to the fetch response\n * @throws Error if URL is invalid or request times out\n *\n * @example\n * ```typescript\n * try {\n *   const response = await safeFetch('https://api.example.com/convert', {\n *     method: 'POST',\n *     headers: { 'Content-Type': 'application/json' },\n *     body: JSON.stringify({ mjml: '...' }),\n *     timeout: 5000,\n *     allowedDomains: ['api.example.com']\n *   });\n *   const data = await response.json();\n * } catch (error) {\n *   console.error('Safe fetch failed:', error.message);\n * }\n * ```\n */\nexport async function safeFetch(\n  url: string,\n  options: UrlValidationOptions & RequestInit = {}\n): Promise<Response> {\n  const {\n    allowedProtocols,\n    allowedDomains,\n    blockedDomains,\n    allowLocalhost,\n    timeout = 5000,\n    ...fetchOptions\n  } = options;\n\n  // Validate URL first - create proper validation options\n  const validationOptions: UrlValidationOptions = {};\n  if (allowedProtocols !== undefined) validationOptions.allowedProtocols = allowedProtocols;\n  if (allowedDomains !== undefined) validationOptions.allowedDomains = allowedDomains;\n  if (blockedDomains !== undefined) validationOptions.blockedDomains = blockedDomains;\n  if (allowLocalhost !== undefined) validationOptions.allowLocalhost = allowLocalhost;\n  \n  const validatedUrl = assertValidUrl(url, validationOptions);\n\n  // Perform fetch with timeout\n  return fetchWithTimeout(validatedUrl.toString(), fetchOptions, timeout);\n}\n\n/**\n * Default export for convenience\n */\nexport default {\n  validateUrl,\n  assertValidUrl,\n  fetchWithTimeout,\n  safeFetch,\n};\n","/**\n * Logging utility with environment-based filtering\n * Prevents sensitive data exposure in production\n */\n\n/**\n * Log levels in order of severity\n */\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  NONE = 4,\n}\n\n/**\n * Logger configuration options\n */\nexport interface LoggerConfig {\n  /**\n   * Minimum log level to output\n   * @default LogLevel.WARN in production, LogLevel.DEBUG in development\n   */\n  minLevel?: LogLevel;\n\n  /**\n   * Whether to include timestamps in logs\n   * @default true\n   */\n  includeTimestamp?: boolean;\n\n  /**\n   * Custom log handler function\n   * @default console methods\n   */\n  customHandler?: (level: LogLevel, message: string, ...args: any[]) => void;\n\n  /**\n   * Prefix to add to all log messages\n   * @default '[EmailEditor]'\n   */\n  prefix?: string;\n}\n\n/**\n * Check if we're in development environment\n */\nfunction isDevelopment(): boolean {\n  // Browser environment\n  if (typeof window !== 'undefined') {\n    return window.location?.hostname === 'localhost' ||\n           window.location?.hostname === '127.0.0.1' ||\n           window.location?.hostname === '';\n  }\n\n  // Node.js environment\n  return process.env.NODE_ENV === 'development' ||\n         process.env.NODE_ENV === 'test';\n}\n\n/**\n * Logger class for consistent, environment-aware logging\n */\nexport class Logger {\n  private config: Required<LoggerConfig>;\n\n  constructor(config: LoggerConfig = {}) {\n    const isDev = isDevelopment();\n\n    this.config = {\n      minLevel: config.minLevel ?? (isDev ? LogLevel.DEBUG : LogLevel.WARN),\n      includeTimestamp: config.includeTimestamp ?? true,\n      customHandler: config.customHandler ?? this.defaultHandler.bind(this),\n      prefix: config.prefix ?? '[EmailEditor]',\n    };\n  }\n\n  /**\n   * Default log handler using console methods\n   */\n  private defaultHandler(level: LogLevel, message: string, ...args: any[]): void {\n    const timestamp = this.config.includeTimestamp\n      ? `[${new Date().toISOString()}]`\n      : '';\n\n    const fullMessage = `${timestamp} ${this.config.prefix} ${message}`;\n\n    switch (level) {\n      case LogLevel.DEBUG:\n        console.log(fullMessage, ...args);\n        break;\n      case LogLevel.INFO:\n        console.info(fullMessage, ...args);\n        break;\n      case LogLevel.WARN:\n        console.warn(fullMessage, ...args);\n        break;\n      case LogLevel.ERROR:\n        console.error(fullMessage, ...args);\n        break;\n    }\n  }\n\n  /**\n   * Check if a log level should be output\n   */\n  private shouldLog(level: LogLevel): boolean {\n    return level >= this.config.minLevel;\n  }\n\n  /**\n   * Log debug message (only in development)\n   */\n  public debug(message: string, ...args: any[]): void {\n    if (this.shouldLog(LogLevel.DEBUG)) {\n      this.config.customHandler(LogLevel.DEBUG, message, ...args);\n    }\n  }\n\n  /**\n   * Log info message\n   */\n  public info(message: string, ...args: any[]): void {\n    if (this.shouldLog(LogLevel.INFO)) {\n      this.config.customHandler(LogLevel.INFO, message, ...args);\n    }\n  }\n\n  /**\n   * Log warning message\n   */\n  public warn(message: string, ...args: any[]): void {\n    if (this.shouldLog(LogLevel.WARN)) {\n      this.config.customHandler(LogLevel.WARN, message, ...args);\n    }\n  }\n\n  /**\n   * Log error message\n   */\n  public error(message: string, ...args: any[]): void {\n    if (this.shouldLog(LogLevel.ERROR)) {\n      this.config.customHandler(LogLevel.ERROR, message, ...args);\n    }\n  }\n\n  /**\n   * Update logger configuration\n   */\n  public configure(config: Partial<LoggerConfig>): void {\n    this.config = {\n      ...this.config,\n      ...config,\n    };\n  }\n\n  /**\n   * Set minimum log level\n   */\n  public setLevel(level: LogLevel): void {\n    this.config.minLevel = level;\n  }\n}\n\n/**\n * Default logger instance\n */\nexport const logger = new Logger();\n\n/**\n * Simple logging functions for convenience\n * These use the default logger instance\n */\nexport const log = {\n  /**\n   * Debug logging (development only)\n   */\n  debug: (...args: any[]): void => {\n    if (isDevelopment()) {\n      console.log('[EmailEditor]', ...args);\n    }\n  },\n\n  /**\n   * Info logging\n   */\n  info: (...args: any[]): void => {\n    console.info('[EmailEditor]', ...args);\n  },\n\n  /**\n   * Warning logging\n   */\n  warn: (...args: any[]): void => {\n    console.warn('[EmailEditor]', ...args);\n  },\n\n  /**\n   * Error logging (always shown)\n   */\n  error: (...args: any[]): void => {\n    console.error('[EmailEditor]', ...args);\n  },\n};\n\n/**\n * Default export\n */\nexport default logger;\n","/**\n * MJML Converter\n * Converts EmailComponent structure to MJML and HTML\n */\n\nimport { EmailComponent, EmailTemplate, ExportOptions, MergeTag } from './types';\nimport { safeFetch, UrlValidationOptions } from './utils/urlValidator';\nimport { log } from './utils/logger';\n\n// Dynamic imports for server-side dependencies\nlet mjml: any;\nlet juice: any;\n\n// Only import MJML and juice in Node.js environment\nif (typeof window === 'undefined') {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  mjml = require('mjml');\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  juice = require('juice');\n}\n\nexport class MJMLConverter {\n  private mergeTags: MergeTag[] = [];\n  private mjmlApiEndpoint?: string;\n  private urlValidationOptions?: UrlValidationOptions;\n\n  constructor(apiEndpoint?: string, urlValidationOptions?: UrlValidationOptions) {\n    if (apiEndpoint !== undefined) {\n      this.mjmlApiEndpoint = apiEndpoint;\n    }\n    if (urlValidationOptions !== undefined) {\n      this.urlValidationOptions = urlValidationOptions;\n    }\n  }\n\n  /**\n   * Add merge tags\n   */\n  public addMergeTags(tags: MergeTag[]): void {\n    this.mergeTags = [...this.mergeTags, ...tags];\n  }\n\n  /**\n   * Get all merge tags\n   */\n  public getMergeTags(): MergeTag[] {\n    return this.mergeTags;\n  }\n\n  /**\n   * Convert component to MJML\n   */\n  public componentToMJML(component: EmailComponent): string {\n    switch (component.type) {\n      case 'text':\n        return this.textToMJML(component);\n      case 'button':\n        return this.buttonToMJML(component);\n      case 'image':\n        return this.imageToMJML(component);\n      case 'divider':\n        return this.dividerToMJML(component);\n      case 'spacer':\n        return this.spacerToMJML(component);\n      case 'social':\n        return this.socialToMJML(component);\n      case 'video':\n        return this.videoToMJML(component);\n      case 'timer':\n        return this.timerToMJML(component);\n      case 'html':\n        return this.htmlToMJML(component);\n      case 'columns':\n        return this.columnsToMJML(component);\n      case 'section':\n        return this.sectionToMJML(component);\n      default:\n        return '';\n    }\n  }\n\n  private textToMJML(component: EmailComponent): string {\n    const { text = '', fontSize, fontWeight, color, align, padding } = component.props;\n    const attrs: string[] = [];\n    \n    if (fontSize) attrs.push(`font-size=\"${fontSize}\"`);\n    if (fontWeight) attrs.push(`font-weight=\"${fontWeight}\"`);\n    if (color) attrs.push(`color=\"${color}\"`);\n    if (align) attrs.push(`align=\"${align}\"`);\n    if (padding) attrs.push(`padding=\"${padding}\"`);\n\n    return `<mj-text ${attrs.join(' ')}>${text}</mj-text>`;\n  }\n\n  private buttonToMJML(component: EmailComponent): string {\n    const { text = 'Button', href = '#', backgroundColor, color, borderRadius, padding, align } = component.props;\n    const attrs: string[] = [`href=\"${href}\"`];\n    \n    if (backgroundColor) attrs.push(`background-color=\"${backgroundColor}\"`);\n    if (color) attrs.push(`color=\"${color}\"`);\n    if (borderRadius) attrs.push(`border-radius=\"${borderRadius}\"`);\n    if (padding) attrs.push(`inner-padding=\"${padding}\"`);\n    if (align) attrs.push(`align=\"${align}\"`);\n\n    return `<mj-button ${attrs.join(' ')}>${text}</mj-button>`;\n  }\n\n  private imageToMJML(component: EmailComponent): string {\n    const { src = '', alt = '', width, height, href, align } = component.props;\n    const attrs: string[] = [`src=\"${src}\"`];\n    \n    if (alt) attrs.push(`alt=\"${alt}\"`);\n    if (width) attrs.push(`width=\"${width}\"`);\n    if (height) attrs.push(`height=\"${height}\"`);\n    if (href) attrs.push(`href=\"${href}\"`);\n    if (align) attrs.push(`align=\"${align}\"`);\n\n    return `<mj-image ${attrs.join(' ')} />`;\n  }\n\n  private dividerToMJML(component: EmailComponent): string {\n    const { borderColor, borderWidth, borderStyle, padding } = component.props;\n    const attrs: string[] = [];\n    \n    if (borderColor) attrs.push(`border-color=\"${borderColor}\"`);\n    if (borderWidth) attrs.push(`border-width=\"${borderWidth}\"`);\n    if (borderStyle) attrs.push(`border-style=\"${borderStyle}\"`);\n    if (padding) attrs.push(`padding=\"${padding}\"`);\n\n    return `<mj-divider ${attrs.join(' ')} />`;\n  }\n\n  private spacerToMJML(component: EmailComponent): string {\n    const { height = '20px' } = component.props;\n    return `<mj-spacer height=\"${height}\" />`;\n  }\n\n  private videoToMJML(component: EmailComponent): string {\n    const { src, poster, width = '600px', height, align = 'center' } = component.props;\n    \n    // Note: Most email clients don't support <video> tags\n    // So we create a fallback image (poster) that links to the video\n    const posterImage = poster || 'https://placehold.co/600x400/000/fff?text=Play+Video';\n    \n    return `<mj-image src=\"${posterImage}\" href=\"${src}\" width=\"${width}\" ${height ? `height=\"${height}\"` : ''} align=\"${align}\" alt=\"Play Video\" />`;\n  }\n\n  private timerToMJML(component: EmailComponent): string {\n    const { targetDate, align = 'center', color = '#dc3545', backgroundColor, padding } = component.props;\n    // Since real-time countdown isn't supported in email, render static target info\n    const target = targetDate ? new Date(targetDate).toISOString() : '';\n    const display = `Countdown to: ${target}`;\n    const attrs: string[] = [];\n    if (align) attrs.push(`align=\"${align}\"`);\n    if (color) attrs.push(`color=\"${color}\"`);\n    if (backgroundColor) attrs.push(`background-color=\"${backgroundColor}\"`);\n    if (padding) attrs.push(`padding=\"${padding}\"`);\n    return `<mj-text ${attrs.join(' ')}>${display}<br/><em>(Will show live timer in builder, static fallback in email)</em></mj-text>`;\n  }\n\n  private htmlToMJML(component: EmailComponent): string {\n    const { code = '', padding, backgroundColor, align } = component.props;\n    // mj-raw allows injecting raw HTML (may be stripped by some clients)\n    const wrapperStartAttrs: string[] = [];\n    if (backgroundColor) wrapperStartAttrs.push(`background-color=\"${backgroundColor}\"`);\n    if (padding) wrapperStartAttrs.push(`padding=\"${padding}\"`);\n    if (align) wrapperStartAttrs.push(`align=\"${align}\"`);\n    const attrsStr = wrapperStartAttrs.join(' ');\n    return `<mj-section ${attrsStr}><mj-column><mj-raw>${code}</mj-raw></mj-column></mj-section>`;\n  }\n\n  private socialToMJML(component: EmailComponent): string {\n    const { mode = 'horizontal', iconSize = '30px', links = [] } = component.props;\n    const attrs = [`mode=\"${mode}\"`, `icon-size=\"${iconSize}\"`];\n    \n    const socialElements = links.map((link: any) => \n      `<mj-social-element name=\"${link.name}\" href=\"${link.href}\" />`\n    ).join('\\n      ');\n\n    return `<mj-social ${attrs.join(' ')}>\n      ${socialElements}\n    </mj-social>`;\n  }\n\n  private columnsToMJML(component: EmailComponent): string {\n    const { columnCount = 2, width1 = 0, width2 = 0, width3 = 0, width4 = 0 } = component.props;\n    const widths = [width1, width2, width3, width4].slice(0, columnCount);\n    \n    // Check if using new column structure or legacy children\n    const hasNewStructure = 'column1' in component;\n    \n    if (hasNewStructure) {\n      // New structure: independent column arrays with settings\n      const columns = Array.from({ length: columnCount }, (_, i) => {\n        const columnKey = `column${i + 1}` as 'column1' | 'column2' | 'column3' | 'column4';\n        const settingsKey = `columnSettings${i + 1}` as string;\n        const columnComponents = (component as any)[columnKey] || [];\n        const columnSettings = (component.props as any)[settingsKey] || {};\n        const content = columnComponents.map((child: EmailComponent) => this.componentToMJML(child)).join('\\n        ');\n        \n        // Calculate width attribute\n        const width = widths[i];\n        const widthAttr = width > 0 ? `width=\"${width}%\"` : '';\n        \n        // Build column attributes from settings\n        const attrs: string[] = [widthAttr];\n        if (columnSettings.backgroundColor) {\n          attrs.push(`background-color=\"${columnSettings.backgroundColor}\"`);\n        }\n        if (columnSettings.padding) {\n          attrs.push(`padding=\"${columnSettings.padding}\"`);\n        }\n        \n        const attrsStr = attrs.filter(a => a).join(' ');\n        \n        return `<mj-column ${attrsStr}>\n        ${content || '<!-- Empty column -->'}\n      </mj-column>`;\n      }).join('\\n      ');\n\n      return `<mj-section>\n      ${columns}\n    </mj-section>`;\n    } else {\n      // Legacy structure: flat children array (backward compatibility)\n      const children = component.children || [];\n      const columns = Array.from({ length: columnCount }, (_, i) => {\n        const columnChildren = children.filter((_, idx) => idx % columnCount === i);\n        const content = columnChildren.map(child => this.componentToMJML(child)).join('\\n        ');\n        \n        const width = widths[i];\n        const widthAttr = width > 0 ? `width=\"${width}%\"` : '';\n        \n        return `<mj-column ${widthAttr}>\n        ${content}\n      </mj-column>`;\n      }).join('\\n      ');\n\n      return `<mj-section>\n      ${columns}\n    </mj-section>`;\n    }\n  }\n\n  private sectionToMJML(component: EmailComponent): string {\n    const { backgroundColor, padding } = component.props;\n    const attrs: string[] = [];\n    \n    if (backgroundColor) attrs.push(`background-color=\"${backgroundColor}\"`);\n    if (padding) attrs.push(`padding=\"${padding}\"`);\n\n    const children = component.children || [];\n    const content = children.map(child => this.componentToMJML(child)).join('\\n      ');\n\n    return `<mj-section ${attrs.join(' ')}>\n      <mj-column>\n        ${content}\n      </mj-column>\n    </mj-section>`;\n  }\n\n  /**\n   * Convert email template to MJML\n   */\n  public templateToMJML(template: EmailTemplate): string {\n    const components = template.components || [];\n    const body = components.map(comp => '    ' + this.componentToMJML(comp)).join('\\n');\n\n    return `<mjml>\n  <mj-head>\n    <mj-title>${template.name || 'Email Template'}</mj-title>\n    ${template.subject ? `<mj-preview>${template.subject}</mj-preview>` : ''}\n    <mj-attributes>\n      <mj-all font-family=\"'Helvetica Neue', Helvetica, Arial, sans-serif\" />\n    </mj-attributes>\n  </mj-head>\n  <mj-body>\n${body}\n  </mj-body>\n</mjml>`;\n  }\n\n  /**\n   * Convert MJML to HTML\n   */\n  public async mjmlToHTML(mjmlCode: string, options: ExportOptions = {}): Promise<string> {\n    // If API endpoint is configured, use it (for browser environments)\n    if (this.mjmlApiEndpoint) {\n      try {\n        // Validate and fetch using safe fetch with URL validation\n        const response = await safeFetch(this.mjmlApiEndpoint, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ mjml: mjmlCode }),\n          timeout: 10000, // 10 second timeout for MJML conversion\n          ...this.urlValidationOptions,\n        });\n\n        if (!response.ok) {\n          throw new Error(`API request failed: ${response.statusText}`);\n        }\n\n        const data = await response.json();\n\n        if (data.errors && data.errors.length > 0) {\n          log.error('MJML Errors:', data.errors);\n        }\n\n        return data.html;\n      } catch (error) {\n        log.error('Error converting MJML to HTML via API:', error);\n        throw error;\n      }\n    }\n\n    // Server-side conversion (Node.js environment)\n    if (!mjml || !juice) {\n      throw new Error('MJML conversion is only available in Node.js environment or via API endpoint. Please configure mjmlApiEndpoint.');\n    }\n\n    const { beautify = true, minify = false, inlineCSS = true } = options;\n\n    try {\n      const result = mjml(mjmlCode, {\n        keepComments: false,\n        beautify,\n        minify,\n      });\n\n      if (result.errors && result.errors.length > 0) {\n        console.error('MJML Errors:', result.errors);\n      }\n\n      // Inline CSS for better email client compatibility\n      if (inlineCSS) {\n        return juice(result.html);\n      }\n\n      return result.html;\n    } catch (error) {\n      console.error('Error converting MJML to HTML:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Replace merge tags in HTML\n   */\n  public replaceMergeTags(html: string, data: Record<string, string>): string {\n    let result = html;\n    this.mergeTags.forEach((tag) => {\n      const regex = new RegExp(`{{${tag.value}}}`, 'g');\n      result = result.replace(regex, data[tag.value] || '');\n    });\n    return result;\n  }\n\n  /**\n   * Export template to HTML\n   */\n  public async exportTemplate(template: EmailTemplate, options: ExportOptions = {}): Promise<string> {\n    const mjmlCode = this.templateToMJML(template);\n    return await this.mjmlToHTML(mjmlCode, options);\n  }\n}\n\nexport default MJMLConverter;\n","/**\n * Email Builder Core Types\n */\n\n// Component Types\nexport type ComponentType = \n  | 'text' \n  | 'button' \n  | 'image' \n  | 'divider' \n  | 'spacer' \n  | 'social'\n  | 'columns'\n  | 'section'\n  | 'video'\n  | 'timer'\n  | 'html';\n\nexport interface EmailComponent {\n  id: string;\n  type: ComponentType;\n  props: Record<string, any>;\n  children?: EmailComponent[];\n}\n\nexport interface TextComponent extends EmailComponent {\n  type: 'text';\n  props: {\n    content: string;\n    fontSize?: string;\n    fontWeight?: string;\n    color?: string;\n    align?: 'left' | 'center' | 'right';\n    padding?: string;\n  };\n}\n\nexport interface ButtonComponent extends EmailComponent {\n  type: 'button';\n  props: {\n    text: string;\n    href: string;\n    backgroundColor?: string;\n    color?: string;\n    borderRadius?: string;\n    padding?: string;\n    align?: 'left' | 'center' | 'right';\n  };\n}\n\nexport interface ImageComponent extends EmailComponent {\n  type: 'image';\n  props: {\n    src: string;\n    alt?: string;\n    width?: string;\n    height?: string;\n    href?: string;\n    align?: 'left' | 'center' | 'right';\n  };\n}\n\nexport interface DividerComponent extends EmailComponent {\n  type: 'divider';\n  props: {\n    borderColor?: string;\n    borderWidth?: string;\n    borderStyle?: string;\n    padding?: string;\n  };\n}\n\nexport interface SpacerComponent extends EmailComponent {\n  type: 'spacer';\n  props: {\n    height?: string;\n  };\n}\n\nexport interface SocialComponent extends EmailComponent {\n  type: 'social';\n  props: {\n    mode?: 'horizontal' | 'vertical';\n    iconSize?: string;\n    links: Array<{\n      name: string;\n      href: string;\n    }>;\n  };\n}\n\nexport interface VideoComponent extends EmailComponent {\n  type: 'video';\n  props: {\n    src: string; // Video URL (YouTube, Vimeo, or direct MP4)\n    poster?: string; // Thumbnail/poster image URL\n    width?: string; // Video width\n    height?: string; // Video height\n    align?: 'left' | 'center' | 'right';\n    autoplay?: boolean;\n    controls?: boolean;\n  };\n}\n\nexport interface TimerComponent extends EmailComponent {\n  type: 'timer';\n  props: {\n    targetDate: string; // ISO string for countdown target\n    format?: string; // e.g. DD:HH:mm:ss\n    expiredText?: string; // Text to show when expired\n    align?: 'left' | 'center' | 'right';\n    color?: string;\n    backgroundColor?: string;\n    padding?: string;\n    timezone?: string; // e.g. UTC, America/New_York\n  };\n}\n\nexport interface HtmlComponent extends EmailComponent {\n  type: 'html';\n  props: {\n    code: string; // Raw HTML code\n    align?: 'left' | 'center' | 'right';\n    padding?: string;\n    backgroundColor?: string;\n  };\n}\n\nexport interface ColumnSettings {\n  backgroundColor?: string;\n  padding?: string;\n  align?: 'left' | 'center' | 'right';\n}\n\nexport interface ColumnsComponent extends EmailComponent {\n  type: 'columns';\n  props: {\n    columnCount: number;\n    // Custom width percentages for each column (0 = auto-equal distribution)\n    width1?: number;\n    width2?: number;\n    width3?: number;\n    width4?: number;\n    // Column-specific settings\n    columnSettings1?: ColumnSettings;\n    columnSettings2?: ColumnSettings;\n    columnSettings3?: ColumnSettings;\n    columnSettings4?: ColumnSettings;\n  };\n  // Independent column arrays instead of flat children\n  column1: EmailComponent[];\n  column2: EmailComponent[];\n  column3?: EmailComponent[];\n  column4?: EmailComponent[];\n  // Legacy support: flat children array (deprecated)\n  children?: EmailComponent[];\n}\n\nexport interface SectionComponent extends EmailComponent {\n  type: 'section';\n  props: {\n    backgroundColor?: string;\n    padding?: string;\n  };\n  children: EmailComponent[];\n}\n\n// Email Template\nexport interface EmailTemplate {\n  id?: string;\n  name: string;\n  subject?: string;\n  components?: EmailComponent[];\n  mjml?: string;\n  html?: string;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n// Merge Tags\nexport interface MergeTag {\n  name: string;\n  value: string;\n  category?: string;\n  description?: string;\n}\n\n// Export Options\nexport interface ExportOptions {\n  beautify?: boolean;\n  minify?: boolean;\n  inlineCSS?: boolean;\n}\n\n// Builder Configuration (for compatibility)\nexport interface EmailEditorConfig {\n  container?: string | HTMLElement;\n  height?: string;\n  width?: string;\n  mjmlApiEndpoint?: string; // API endpoint for server-side MJML conversion\n  storageManager?: any;\n  assetManager?: any;\n  plugins?: EmailEditorPlugin[];\n  pluginsOpts?: Record<string, any>;\n  canvas?: any;\n}\n\nexport type EmailEditorPlugin = string | ((editor: any, options?: any) => void) | { id: string; options?: Record<string, any> };\n\n// Design System\nexport interface DesignSystem {\n  colors: {\n    primary: string;\n    secondary: string;\n    accent: string;\n    text: string;\n    textSecondary: string;\n    background: string;\n    border: string;\n  };\n  typography: {\n    fontFamily: string;\n    headingFont?: string;\n    bodyFont?: string;\n    fontSize: {\n      xs: string;\n      sm: string;\n      md: string;\n      lg: string;\n      xl: string;\n      xxl: string;\n    };\n    fontWeight: {\n      normal: string;\n      medium: string;\n      semibold: string;\n      bold: string;\n    };\n  };\n  spacing: {\n    xs: string;\n    sm: string;\n    md: string;\n    lg: string;\n    xl: string;\n    xxl: string;\n  };\n  borderRadius: {\n    none: string;\n    sm: string;\n    md: string;\n    lg: string;\n    full: string;\n  };\n  containerWidth: string;\n  contentAlignment: 'left' | 'center' | 'right';\n  links: {\n    color: string;\n    underline: boolean;\n  };\n}\n\nexport const defaultDesignSystem: DesignSystem = {\n  colors: {\n    primary: '#007bff',\n    secondary: '#6c757d',\n    accent: '#28a745',\n    text: '#212529',\n    textSecondary: '#6c757d',\n    background: '#d97707',\n    border: '#dee2e6',\n  },\n  typography: {\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n    headingFont: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n    bodyFont: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n    fontSize: {\n      xs: '12px',\n      sm: '14px',\n      md: '16px',\n      lg: '18px',\n      xl: '24px',\n      xxl: '32px',\n    },\n    fontWeight: {\n      normal: '400',\n      medium: '500',\n      semibold: '600',\n      bold: '700',\n    },\n  },\n  spacing: {\n    xs: '4px',\n    sm: '8px',\n    md: '16px',\n    lg: '24px',\n    xl: '32px',\n    xxl: '48px',\n  },\n  borderRadius: {\n    none: '0',\n    sm: '4px',\n    md: '6px',\n    lg: '8px',\n    full: '9999px',\n  },\n  containerWidth: '600px',\n  contentAlignment: 'left',\n  links: {\n    color: '#007bff',\n    underline: true,\n  },\n};\n","/**\n * Pre-built Email Templates\n */\n\nimport { EmailTemplate } from './types';\n\nexport const emailTemplates: Record<string, EmailTemplate> = {\n  blank: {\n    name: 'Blank Template',\n    subject: '',\n    components: [],\n  },\n\n  welcome: {\n    name: 'Welcome Email',\n    subject: 'Welcome to {{company_name}}!',\n    components: [\n      {\n        id: 'section-1',\n        type: 'section',\n        props: {\n          backgroundColor: '#f8f9fa',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-1',\n            type: 'text',\n            props: {\n              text: 'Welcome!',\n              fontSize: '32px',\n              color: '#007bff',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-2',\n            type: 'text',\n            props: {\n              text: 'Thanks for joining us. We\\'re excited to have you on board!',\n              fontSize: '16px',\n              color: '#6c757d',\n              align: 'center',\n            },\n          },\n          {\n            id: 'button-1',\n            type: 'button',\n            props: {\n              text: 'Get Started',\n              href: 'https://example.com/get-started',\n              backgroundColor: '#007bff',\n              color: '#ffffff',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  newsletter: {\n    name: 'Newsletter',\n    subject: '{{month}} Newsletter - Latest Updates',\n    components: [\n      {\n        id: 'section-header',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '20px',\n        },\n        children: [\n          {\n            id: 'text-header',\n            type: 'text',\n            props: {\n              text: 'Monthly Newsletter',\n              fontSize: '28px',\n              color: '#212529',\n              align: 'center',\n            },\n          },\n          {\n            id: 'divider-1',\n            type: 'divider',\n            props: {\n              borderColor: '#dee2e6',\n              borderWidth: '2px',\n            },\n          },\n        ],\n      },\n      {\n        id: 'section-content',\n        type: 'section',\n        props: {\n          backgroundColor: '#f8f9fa',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'text-article-1',\n            type: 'text',\n            props: {\n              text: 'Feature Article Title',\n              fontSize: '22px',\n              color: '#212529',\n              align: 'left',\n            },\n          },\n          {\n            id: 'text-article-desc',\n            type: 'text',\n            props: {\n              text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',\n              fontSize: '16px',\n              color: '#6c757d',\n              align: 'left',\n            },\n          },\n          {\n            id: 'button-read-more',\n            type: 'button',\n            props: {\n              text: 'Read More',\n              href: 'https://example.com/article',\n              backgroundColor: '#28a745',\n              color: '#ffffff',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  promotional: {\n    name: 'Promotional Campaign',\n    subject: ' Special Offer - {{discount}}% Off!',\n    components: [\n      {\n        id: 'section-promo',\n        type: 'section',\n        props: {\n          backgroundColor: '#dc3545',\n          padding: '50px 20px',\n        },\n        children: [\n          {\n            id: 'text-promo-1',\n            type: 'text',\n            props: {\n              text: 'SPECIAL OFFER',\n              fontSize: '36px',\n              color: '#ffffff',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-promo-2',\n            type: 'text',\n            props: {\n              text: 'Save {{discount}}% Today!',\n              fontSize: '28px',\n              color: '#ffffff',\n              align: 'center',\n            },\n          },\n          {\n            id: 'spacer-1',\n            type: 'spacer',\n            props: {\n              height: '20px',\n            },\n          },\n          {\n            id: 'button-shop',\n            type: 'button',\n            props: {\n              text: 'Shop Now',\n              href: 'https://example.com/shop',\n              backgroundColor: '#ffffff',\n              color: '#dc3545',\n            },\n          },\n        ],\n      },\n      {\n        id: 'section-details',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'text-details',\n            type: 'text',\n            props: {\n              text: 'Limited time offer. Use code SAVE{{discount}} at checkout.',\n              fontSize: '14px',\n              color: '#6c757d',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  transactional: {\n    name: 'Order Confirmation',\n    subject: 'Order Confirmation #{{order_number}}',\n    components: [\n      {\n        id: 'section-header',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'text-thanks',\n            type: 'text',\n            props: {\n              text: 'Thanks for your order!',\n              fontSize: '24px',\n              color: '#212529',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-order-num',\n            type: 'text',\n            props: {\n              text: 'Order #{{order_number}}',\n              fontSize: '16px',\n              color: '#6c757d',\n              align: 'center',\n            },\n          },\n        ],\n      },\n      {\n        id: 'divider-1',\n        type: 'divider',\n        props: {\n          borderColor: '#dee2e6',\n          borderWidth: '1px',\n        },\n      },\n      {\n        id: 'section-details',\n        type: 'section',\n        props: {\n          backgroundColor: '#f8f9fa',\n          padding: '20px',\n        },\n        children: [\n          {\n            id: 'text-order-details',\n            type: 'text',\n            props: {\n              text: 'Order Details: {{order_details}}',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n            },\n          },\n        ],\n      },\n      {\n        id: 'section-cta',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'button-track',\n            type: 'button',\n            props: {\n              text: 'Track Your Order',\n              href: 'https://example.com/track/{{order_number}}',\n              backgroundColor: '#007bff',\n              color: '#ffffff',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  invitation: {\n    name: 'Event Invitation',\n    subject: 'You\\'re Invited: {{event_name}}',\n    components: [\n      {\n        id: 'section-hero',\n        type: 'section',\n        props: {\n          backgroundColor: '#6f42c1',\n          padding: '60px 20px',\n        },\n        children: [\n          {\n            id: 'text-invited',\n            type: 'text',\n            props: {\n              text: '<h1 style=\"margin: 0; color: #ffffff;\">You\\'re Invited!</h1>',\n              fontSize: '32px',\n              color: '#ffffff',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-event-name',\n            type: 'text',\n            props: {\n              text: '<h2 style=\"margin: 15px 0 0 0; color: #ffffff;\">{{event_name}}</h2>',\n              fontSize: '24px',\n              color: '#ffffff',\n              align: 'center',\n            },\n          },\n        ],\n      },\n      {\n        id: 'section-details',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-date',\n            type: 'text',\n            props: {\n              text: ' <strong>When:</strong> {{event_date}}',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n              padding: '10px 0',\n            },\n          },\n          {\n            id: 'text-location',\n            type: 'text',\n            props: {\n              text: ' <strong>Where:</strong> {{event_location}}',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n              padding: '10px 0',\n            },\n          },\n          {\n            id: 'spacer-1',\n            type: 'spacer',\n            props: {\n              height: '30px',\n            },\n          },\n          {\n            id: 'button-rsvp',\n            type: 'button',\n            props: {\n              text: 'RSVP Now',\n              href: 'https://example.com/rsvp',\n              backgroundColor: '#6f42c1',\n              color: '#ffffff',\n              borderRadius: '6px',\n              padding: '14px 30px',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  announcement: {\n    name: 'Product Announcement',\n    subject: 'Introducing {{product_name}}',\n    components: [\n      {\n        id: 'section-header',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-new',\n            type: 'text',\n            props: {\n              text: '<span style=\"color: #28a745; font-weight: bold;\">NEW</span>',\n              fontSize: '14px',\n              color: '#28a745',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-product',\n            type: 'text',\n            props: {\n              text: '<h1 style=\"margin: 10px 0;\">{{product_name}}</h1>',\n              fontSize: '32px',\n              color: '#212529',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-tagline',\n            type: 'text',\n            props: {\n              text: 'The future of {{category}} is here.',\n              fontSize: '18px',\n              color: '#6c757d',\n              align: 'center',\n              padding: '10px 0',\n            },\n          },\n        ],\n      },\n      {\n        id: 'image-product',\n        type: 'image',\n        props: {\n          src: 'https://placehold.co/600x400',\n          alt: 'Product Image',\n          width: '100%',\n          align: 'center',\n        },\n      },\n      {\n        id: 'section-cta',\n        type: 'section',\n        props: {\n          backgroundColor: '#f8f9fa',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-cta',\n            type: 'text',\n            props: {\n              text: 'Be among the first to experience {{product_name}}.',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'center',\n              padding: '0 0 20px 0',\n            },\n          },\n          {\n            id: 'button-learn',\n            type: 'button',\n            props: {\n              text: 'Learn More',\n              href: 'https://example.com/product',\n              backgroundColor: '#28a745',\n              color: '#ffffff',\n              borderRadius: '4px',\n              padding: '12px 24px',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  feedback: {\n    name: 'Feedback Request',\n    subject: 'We\\'d love your feedback!',\n    components: [\n      {\n        id: 'section-main',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-hello',\n            type: 'text',\n            props: {\n              text: '<h2 style=\"margin: 0;\">Hi {{first_name}},</h2>',\n              fontSize: '24px',\n              color: '#212529',\n              align: 'left',\n            },\n          },\n          {\n            id: 'text-question',\n            type: 'text',\n            props: {\n              text: 'How was your experience with us?',\n              fontSize: '18px',\n              color: '#6c757d',\n              align: 'left',\n              padding: '20px 0',\n            },\n          },\n          {\n            id: 'text-help',\n            type: 'text',\n            props: {\n              text: 'Your feedback helps us improve our service.',\n              fontSize: '16px',\n              color: '#6c757d',\n              align: 'left',\n              padding: '0 0 30px 0',\n            },\n          },\n          {\n            id: 'button-feedback',\n            type: 'button',\n            props: {\n              text: 'Give Feedback',\n              href: 'https://example.com/feedback',\n              backgroundColor: '#17a2b8',\n              color: '#ffffff',\n              borderRadius: '6px',\n              padding: '14px 28px',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  reminder: {\n    name: 'Appointment Reminder',\n    subject: 'Reminder: Your appointment on {{date}}',\n    components: [\n      {\n        id: 'section-reminder',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffc107',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'text-reminder',\n            type: 'text',\n            props: {\n              text: ' <strong>Reminder</strong>',\n              fontSize: '20px',\n              color: '#212529',\n              align: 'center',\n            },\n          },\n        ],\n      },\n      {\n        id: 'section-details',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '40px 20px',\n        },\n        children: [\n          {\n            id: 'text-hello',\n            type: 'text',\n            props: {\n              text: 'Hi {{first_name}},',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n              padding: '0 0 20px 0',\n            },\n          },\n          {\n            id: 'text-appointment',\n            type: 'text',\n            props: {\n              text: 'This is a reminder about your upcoming appointment:',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n              padding: '0 0 20px 0',\n            },\n          },\n          {\n            id: 'text-date',\n            type: 'text',\n            props: {\n              text: ' <strong>Date:</strong> {{date}}<br/> <strong>Time:</strong> {{time}}',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'left',\n              padding: '0 0 30px 0',\n            },\n          },\n          {\n            id: 'button-confirm',\n            type: 'button',\n            props: {\n              text: 'Confirm Appointment',\n              href: 'https://example.com/confirm',\n              backgroundColor: '#28a745',\n              color: '#ffffff',\n              borderRadius: '4px',\n              padding: '12px 24px',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  reengagement: {\n    name: 'Re-engagement Campaign',\n    subject: 'We miss you, {{first_name}}!',\n    components: [\n      {\n        id: 'section-main',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '50px 20px',\n        },\n        children: [\n          {\n            id: 'text-miss',\n            type: 'text',\n            props: {\n              text: '<h1 style=\"margin: 0;\">We Miss You! </h1>',\n              fontSize: '32px',\n              color: '#007bff',\n              align: 'center',\n            },\n          },\n          {\n            id: 'text-comeback',\n            type: 'text',\n            props: {\n              text: 'It\\'s been a while since we\\'ve seen you. Come back and see what\\'s new!',\n              fontSize: '18px',\n              color: '#6c757d',\n              align: 'center',\n              padding: '20px 0',\n            },\n          },\n          {\n            id: 'text-offer',\n            type: 'text',\n            props: {\n              text: '<strong>Special offer just for you:</strong><br/>Get {{discount}}% off your next purchase',\n              fontSize: '16px',\n              color: '#212529',\n              align: 'center',\n              padding: '0 0 30px 0',\n            },\n          },\n          {\n            id: 'button-return',\n            type: 'button',\n            props: {\n              text: 'Welcome Back Offer',\n              href: 'https://example.com/welcome-back',\n              backgroundColor: '#007bff',\n              color: '#ffffff',\n              borderRadius: '6px',\n              padding: '14px 30px',\n              align: 'center',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  // Advanced column layout showcase\n  columnShowcase: {\n    name: 'Column Showcase',\n    subject: 'Advanced Layout Examples',\n    components: [\n      {\n        id: 'section-intro',\n        type: 'section',\n        props: {\n          backgroundColor: '#ffffff',\n          padding: '30px 20px',\n        },\n        children: [\n          {\n            id: 'text-title',\n            type: 'text',\n            props: {\n              text: '<h2>Advanced Column Layouts</h2>',\n              fontSize: '28px',\n              color: '#212529',\n              align: 'center',\n            },\n          },\n        ],\n      },\n      // 70-30 Sidebar Layout\n      {\n        id: 'columns-70-30',\n        type: 'columns',\n        props: {\n          columnCount: 2,\n          width1: 70,\n          width2: 30,\n        },\n        column1: [\n          {\n            id: 'main-content',\n            type: 'text',\n            props: {\n              text: '<h3>Main Content (70%)</h3><p>This is the primary content area with more space for your message.</p>',\n              fontSize: '16px',\n              padding: '15px',\n            },\n          },\n        ],\n        column2: [\n          {\n            id: 'sidebar',\n            type: 'text',\n            props: {\n              text: '<h4>Sidebar (30%)</h4><p>Quick links or CTA</p>',\n              fontSize: '14px',\n              padding: '15px',\n              color: '#6c757d',\n            },\n          },\n        ],\n      } as any,\n      // 25-50-25 Featured Content\n      {\n        id: 'columns-25-50-25',\n        type: 'columns',\n        props: {\n          columnCount: 3,\n          width1: 25,\n          width2: 50,\n          width3: 25,\n        },\n        column1: [\n          {\n            id: 'left-feature',\n            type: 'image',\n            props: {\n              src: 'https://placehold.co/150x150',\n              alt: 'Feature 1',\n              width: '100%',\n            },\n          },\n        ],\n        column2: [\n          {\n            id: 'center-feature',\n            type: 'text',\n            props: {\n              text: '<h3>Featured Content</h3><p>Center spotlight with 50% width</p>',\n              fontSize: '16px',\n              align: 'center',\n              padding: '15px',\n            },\n          },\n        ],\n        column3: [\n          {\n            id: 'right-feature',\n            type: 'image',\n            props: {\n              src: 'https://placehold.co/150x150',\n              alt: 'Feature 2',\n              width: '100%',\n            },\n          },\n        ],\n      } as any,\n      // Auto-equal 3 columns\n      {\n        id: 'columns-auto-3',\n        type: 'columns',\n        props: {\n          columnCount: 3,\n          width1: 0, // Auto-equal distribution\n          width2: 0,\n          width3: 0,\n        },\n        column1: [\n          {\n            id: 'col1-title',\n            type: 'text',\n            props: {\n              text: '<h4>Equal Column 1</h4>',\n              fontSize: '16px',\n              align: 'center',\n            },\n          },\n        ],\n        column2: [\n          {\n            id: 'col2-title',\n            type: 'text',\n            props: {\n              text: '<h4>Equal Column 2</h4>',\n              fontSize: '16px',\n              align: 'center',\n            },\n          },\n        ],\n        column3: [\n          {\n            id: 'col3-title',\n            type: 'text',\n            props: {\n              text: '<h4>Equal Column 3</h4>',\n              fontSize: '16px',\n              align: 'center',\n            },\n          },\n        ],\n      } as any,\n    ],\n  },\n};\n\nexport const templateCategories = {\n  all: Object.keys(emailTemplates),\n  popular: ['welcome', 'newsletter', 'promotional', 'columnShowcase'],\n  transactional: ['transactional', 'reminder'],\n  marketing: ['promotional', 'announcement', 'reengagement'],\n  engagement: ['welcome', 'feedback', 'invitation'],\n};\n","/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(func, thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    return func.apply(thisArg, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(Func) {\n  return function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return construct(Func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'search', 'section', 'select', 'shadow', 'slot', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'enterkeyhint', 'exportparts', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'inputmode', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'part', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'exportparts', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inert', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'part', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'slot', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'mask-type', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.3.0';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    }\n  }));\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!(EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function && EXTRA_ELEMENT_HANDLING.tagCheck(tagName)) && (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function && EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","import DOMPurify from 'dompurify';\n\n/**\n * Configuration options for HTML sanitization\n */\nexport interface SanitizeOptions {\n  /**\n   * Allowed HTML tags\n   * @default ['p', 'br', 'strong', 'em', 'u', 'a', 'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'span', 'div', 'table', 'tr', 'td', 'th', 'tbody', 'thead']\n   */\n  allowedTags?: string[];\n\n  /**\n   * Allowed HTML attributes\n   * @default ['href', 'target', 'rel', 'style', 'class']\n   */\n  allowedAttributes?: string[];\n\n  /**\n   * Whether to allow data URIs in href and src attributes\n   * @default false\n   */\n  allowDataUri?: boolean;\n\n}\n\n/**\n * Default allowed HTML tags for email content\n */\nconst DEFAULT_ALLOWED_TAGS = [\n  'p', 'br', 'strong', 'em', 'u', 'a', 'ul', 'ol', 'li',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'span', 'div',\n  'table', 'tr', 'td', 'th', 'tbody', 'thead', 'tfoot',\n  'img', 'b', 'i', 's', 'sub', 'sup', 'hr', 'blockquote',\n  'pre', 'code'\n];\n\n/**\n * Default allowed HTML attributes\n */\nconst DEFAULT_ALLOWED_ATTRIBUTES = [\n  'href', 'target', 'rel', 'style', 'class', 'id',\n  'src', 'alt', 'width', 'height', 'title', 'align',\n  'border', 'cellpadding', 'cellspacing', 'bgcolor',\n  'colspan', 'rowspan'\n];\n\n/**\n * Sanitizes HTML content to prevent XSS attacks while preserving safe formatting\n *\n * @param html - The HTML string to sanitize\n * @param options - Configuration options for sanitization\n * @returns Sanitized HTML string safe for rendering\n *\n * @example\n * ```typescript\n * const dirty = '<script>alert(\"xss\")</script><p>Safe content</p>';\n * const clean = sanitizeHtml(dirty);\n * // Returns: '<p>Safe content</p>'\n * ```\n *\n * @example\n * ```typescript\n * const html = '<p>Text with <a href=\"javascript:alert()\">link</a></p>';\n * const clean = sanitizeHtml(html);\n * // Returns: '<p>Text with <a>link</a></p>' (javascript: protocol removed)\n * ```\n */\nexport function sanitizeHtml(html: string, options: SanitizeOptions = {}): string {\n  const {\n    allowedTags = DEFAULT_ALLOWED_TAGS,\n    allowedAttributes = DEFAULT_ALLOWED_ATTRIBUTES,\n    allowDataUri = false,\n  } = options;\n\n  // Configure DOMPurify - use Partial to avoid type conflicts\n  const config = {\n    ALLOWED_TAGS: allowedTags,\n    ALLOWED_ATTR: allowedAttributes,\n    ALLOW_DATA_ATTR: false, // Prevent data-* attributes by default\n    ALLOW_UNKNOWN_PROTOCOLS: false,\n    SAFE_FOR_TEMPLATES: true,\n    ...(allowDataUri ? {} : {\n      FORBID_ATTR: ['src', 'href'].filter(\n        attr => allowedAttributes.includes(attr)\n      )\n    })\n  };\n\n  // Sanitize the HTML\n  return DOMPurify.sanitize(html, config);\n}\n\n/**\n * Checks if HTML content contains potentially dangerous elements\n *\n * @param html - The HTML string to check\n * @returns Object containing check results\n *\n * @example\n * ```typescript\n * const check = checkHtmlSafety('<script>alert(\"xss\")</script>');\n * // Returns: { isSafe: false, threats: ['script tag detected'] }\n * ```\n */\nexport function checkHtmlSafety(html: string): {\n  isSafe: boolean;\n  threats: string[];\n} {\n  const threats: string[] = [];\n\n  // Check for script tags\n  if (/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi.test(html)) {\n    threats.push('script tag detected');\n  }\n\n  // Check for event handlers\n  if (/on\\w+\\s*=/gi.test(html)) {\n    threats.push('event handler detected');\n  }\n\n  // Check for javascript: protocol\n  if (/javascript:/gi.test(html)) {\n    threats.push('javascript: protocol detected');\n  }\n\n  // Check for data: URIs (can be used for XSS)\n  if (/data:text\\/html/gi.test(html)) {\n    threats.push('data:text/html URI detected');\n  }\n\n  // Check for iframe tags\n  if (/<iframe[\\s\\S]*?>/gi.test(html)) {\n    threats.push('iframe tag detected');\n  }\n\n  // Check for object/embed tags\n  if (/<(object|embed)[\\s\\S]*?>/gi.test(html)) {\n    threats.push('object/embed tag detected');\n  }\n\n  return {\n    isSafe: threats.length === 0,\n    threats,\n  };\n}\n\n/**\n * Sanitizes HTML and provides a safety report\n *\n * @param html - The HTML string to sanitize\n * @param options - Configuration options for sanitization\n * @returns Object with sanitized HTML and safety information\n *\n * @example\n * ```typescript\n * const result = sanitizeWithReport('<p>Good</p><script>Bad</script>');\n * console.log(result.sanitizedHtml); // '<p>Good</p>'\n * console.log(result.wasModified); // true\n * console.log(result.threats); // ['script tag detected']\n * ```\n */\nexport function sanitizeWithReport(\n  html: string,\n  options: SanitizeOptions = {}\n): {\n  sanitizedHtml: string;\n  wasModified: boolean;\n  threats: string[];\n} {\n  const safety = checkHtmlSafety(html);\n  const sanitizedHtml = sanitizeHtml(html, options);\n  const wasModified = sanitizedHtml !== html;\n\n  return {\n    sanitizedHtml,\n    wasModified,\n    threats: safety.threats,\n  };\n}\n\n/**\n * Default export for convenience\n */\nexport default {\n  sanitizeHtml,\n  checkHtmlSafety,\n  sanitizeWithReport,\n};\n","/**\n * Kaptha Email Editor Wrapper\n * React wrapper that uses window.kaptha.createEditor() API\n * Similar to react-email-editor (Unlayer's wrapper pattern)\n */\n\nimport React, { useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport type { \n  EditorConfig, \n  EditorMethods, \n  EmailDesign,\n  KapthaEditor,\n  KapthaAPI\n} from '@kaptha/email-editor-core';\n\n// Extend Window type for kapthaEmailEditor\ndeclare global {\n  interface Window {\n    kapthaEmailEditor?: KapthaAPI;\n    kaptha?: KapthaAPI;\n  }\n}\n\nexport interface KapthaEmailEditorProps extends Omit<EditorConfig, 'id'> {\n  /**\n   * Minimum height of the editor\n   * @default '600px'\n   */\n  minHeight?: string;\n  \n  /**\n   * React ref to access editor methods\n   */\n  ref?: React.Ref<EditorMethods>;\n  \n  /**\n   * Additional styles for the container\n   */\n  style?: React.CSSProperties;\n  \n  /**\n   * Additional CSS classes for the container\n   */\n  className?: string;\n}\n\n/**\n * Kaptha Email Editor React Component\n * \n * @example\n * ```tsx\n * import { KapthaEmailEditorWrapper } from '@kaptha/email-editor-react';\n * \n * function App() {\n *   const editorRef = useRef<EditorMethods>(null);\n *   \n *   const handleSave = () => {\n *     const design = editorRef.current?.saveDesign();\n *     console.log(design);\n *   };\n *   \n *   return (\n *     <KapthaEmailEditorWrapper\n *       ref={editorRef}\n *       apiKey=\"kpt_dev_ws001_demo12345678\"\n *       minHeight=\"600px\"\n *       onReady={() => console.log('Editor ready!')}\n *     />\n *   );\n * }\n * ```\n */\nexport const KapthaEmailEditorWrapper = forwardRef<EditorMethods, KapthaEmailEditorProps>(\n  (props, ref) => {\n    const {\n      apiKey,\n      workspaceId,\n      minHeight = '600px',\n      displayMode,\n      appearance,\n      customFonts,\n      customBlocks,\n      designSystem,\n      onLoad,\n      onReady,\n      onDesignChange,\n      style,\n      className,\n    } = props;\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const editorInstanceRef = useRef<KapthaEditor | null>(null);\n    const editorIdRef = useRef<string>(`kaptha-editor-${Math.random().toString(36).substr(2, 9)}`);\n\n    // Initialize editor\n    useEffect(() => {\n      if (!containerRef.current) return;\n      \n      // Check if window.kaptha or kapthaEmailEditor is available\n      if (typeof window === 'undefined' || (!window.kaptha && !window.kapthaEmailEditor)) {\n        console.error('[Kaptha] API not found. Make sure the CDN script is loaded.');\n        return;\n      }\n\n      try {\n        // Create editor config\n        const config: EditorConfig = {\n          id: editorIdRef.current,\n          apiKey,\n          ...(workspaceId && { workspaceId }),\n          ...(minHeight && { minHeight }),\n          ...(displayMode && { displayMode }),\n          ...(appearance && { appearance }),\n          ...(customFonts && { customFonts }),\n          ...(customBlocks && { customBlocks }),\n          ...(designSystem && { designSystem }),\n          ...(onLoad && { onLoad }),\n          ...(onReady && { onReady }),\n          ...(onDesignChange && { onDesignChange }),\n        };\n\n        // Create editor instance using global API (support both namespaces)\n        const api = window.kapthaEmailEditor || window.kaptha;\n        const editor = api!.init(config);\n        editorInstanceRef.current = editor;\n\n        console.log('[Kaptha React] Editor instance created');\n      } catch (error) {\n        console.error('[Kaptha React] Failed to create editor:', error);\n      }\n\n      // Cleanup on unmount\n      return () => {\n        if (editorInstanceRef.current) {\n          editorInstanceRef.current.destroy();\n          editorInstanceRef.current = null;\n        }\n      };\n    }, [apiKey, workspaceId, minHeight, displayMode, appearance, customFonts, customBlocks, designSystem, onLoad, onReady, onDesignChange]);\n\n    // Expose editor methods via ref\n    useImperativeHandle(ref, () => ({\n      loadDesign: (design: EmailDesign) => {\n        editorInstanceRef.current?.loadDesign(design);\n      },\n      saveDesign: () => {\n        return editorInstanceRef.current?.saveDesign() || { components: [] };\n      },\n      exportHtml: async (options) => {\n        return editorInstanceRef.current?.exportHtml(options) || { html: '', mjml: '' };\n      },\n      exportMjml: () => {\n        return editorInstanceRef.current?.exportMjml() || '';\n      },\n      exportJson: () => {\n        return editorInstanceRef.current?.exportJson() || { components: [] };\n      },\n      addEventListener: (event: string, callback: Function) => {\n        editorInstanceRef.current?.addEventListener(event, callback);\n      },\n      removeEventListener: (event: string, callback: Function) => {\n        editorInstanceRef.current?.removeEventListener(event, callback);\n      },\n      setDesignSystem: (designSystem) => {\n        editorInstanceRef.current?.setDesignSystem(designSystem);\n      },\n      destroy: () => {\n        editorInstanceRef.current?.destroy();\n      },\n    }), []);\n\n    return (\n      <div\n        ref={containerRef}\n        id={editorIdRef.current}\n        className={className}\n        style={{\n          width: '100%',\n          minHeight,\n          ...style,\n        }}\n      />\n    );\n  }\n);\n\nKapthaEmailEditorWrapper.displayName = 'KapthaEmailEditorWrapper';\n","import { createContext } from 'react';\n/**\n * Create the React Context\n */ export const DndContext = createContext({\n    dragDropManager: undefined\n});\n\n//# sourceMappingURL=DndContext.js.map","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */ export function invariant(condition, format, ...args) {\n    if (isProduction()) {\n        if (format === undefined) {\n            throw new Error('invariant requires an error message argument');\n        }\n    }\n    if (!condition) {\n        let error;\n        if (format === undefined) {\n            error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n        } else {\n            let argIndex = 0;\n            error = new Error(format.replace(/%s/g, function() {\n                return args[argIndex++];\n            }));\n            error.name = 'Invariant Violation';\n        }\n        error.framesToPop = 1 // we don't care about invariant's own frame\n        ;\n        throw error;\n    }\n}\nfunction isProduction() {\n    return typeof process !== 'undefined' && process.env['NODE_ENV'] === 'production';\n}\n\n//# sourceMappingURL=index.js.map","// cheap lodash replacements\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */ export function get(obj, path, defaultValue) {\n    return path.split('.').reduce((a, c)=>a && a[c] ? a[c] : defaultValue || null\n    , obj);\n}\n/**\n * drop-in replacement for _.without\n */ export function without(items, item) {\n    return items.filter((i)=>i !== item\n    );\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */ export function isString(input) {\n    return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */ export function isObject(input) {\n    return typeof input === 'object';\n}\n/**\n * replacement for _.xor\n * @param itemsA\n * @param itemsB\n */ export function xor(itemsA, itemsB) {\n    const map = new Map();\n    const insertItem = (item)=>{\n        map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n    };\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    const result = [];\n    map.forEach((count, key)=>{\n        if (count === 1) {\n            result.push(key);\n        }\n    });\n    return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */ export function intersection(itemsA, itemsB) {\n    return itemsA.filter((t)=>itemsB.indexOf(t) > -1\n    );\n}\n\n//# sourceMappingURL=js_utils.js.map","export const INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport const BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport const PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport const HOVER = 'dnd-core/HOVER';\nexport const DROP = 'dnd-core/DROP';\nexport const END_DRAG = 'dnd-core/END_DRAG';\n\n//# sourceMappingURL=types.js.map","import { INIT_COORDS } from '../types.js';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n    return {\n        type: INIT_COORDS,\n        payload: {\n            sourceClientOffset: sourceClientOffset || null,\n            clientOffset: clientOffset || null\n        }\n    };\n}\n\n//# sourceMappingURL=setClientOffset.js.map","import { invariant } from '@react-dnd/invariant';\nimport { isObject } from '../../utils/js_utils.js';\nimport { setClientOffset } from './local/setClientOffset.js';\nimport { BEGIN_DRAG, INIT_COORDS } from './types.js';\nconst ResetCoordinatesAction = {\n    type: INIT_COORDS,\n    payload: {\n        clientOffset: null,\n        sourceClientOffset: null\n    }\n};\nexport function createBeginDrag(manager) {\n    return function beginDrag(sourceIds = [], options = {\n        publishSource: true\n    }) {\n        const { publishSource =true , clientOffset , getSourceClientOffset ,  } = options;\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        // Initialize the coordinates using the client offset\n        manager.dispatch(setClientOffset(clientOffset));\n        verifyInvariants(sourceIds, monitor, registry);\n        // Get the draggable source\n        const sourceId = getDraggableSource(sourceIds, monitor);\n        if (sourceId == null) {\n            manager.dispatch(ResetCoordinatesAction);\n            return;\n        }\n        // Get the source client offset\n        let sourceClientOffset = null;\n        if (clientOffset) {\n            if (!getSourceClientOffset) {\n                throw new Error('getSourceClientOffset must be defined');\n            }\n            verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n            sourceClientOffset = getSourceClientOffset(sourceId);\n        }\n        // Initialize the full coordinates\n        manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n        const source = registry.getSource(sourceId);\n        const item = source.beginDrag(monitor, sourceId);\n        // If source.beginDrag returns null, this is an indicator to cancel the drag\n        if (item == null) {\n            return undefined;\n        }\n        verifyItemIsObject(item);\n        registry.pinSource(sourceId);\n        const itemType = registry.getSourceType(sourceId);\n        return {\n            type: BEGIN_DRAG,\n            payload: {\n                itemType,\n                item,\n                sourceId,\n                clientOffset: clientOffset || null,\n                sourceClientOffset: sourceClientOffset || null,\n                isSourcePublic: !!publishSource\n            }\n        };\n    };\n}\nfunction verifyInvariants(sourceIds, monitor, registry) {\n    invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n    sourceIds.forEach(function(sourceId) {\n        invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n    });\n}\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n    invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\nfunction verifyItemIsObject(item) {\n    invariant(isObject(item), 'Item must be an object.');\n}\nfunction getDraggableSource(sourceIds, monitor) {\n    let sourceId = null;\n    for(let i = sourceIds.length - 1; i >= 0; i--){\n        if (monitor.canDragSource(sourceIds[i])) {\n            sourceId = sourceIds[i];\n            break;\n        }\n    }\n    return sourceId;\n}\n\n//# sourceMappingURL=beginDrag.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { invariant } from '@react-dnd/invariant';\nimport { isObject } from '../../utils/js_utils.js';\nimport { DROP } from './types.js';\nexport function createDrop(manager) {\n    return function drop(options = {}) {\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        verifyInvariants(monitor);\n        const targetIds = getDroppableTargets(monitor);\n        // Multiple actions are dispatched here, which is why this doesn't return an action\n        targetIds.forEach((targetId, index)=>{\n            const dropResult = determineDropResult(targetId, index, registry, monitor);\n            const action = {\n                type: DROP,\n                payload: {\n                    dropResult: _objectSpread({}, options, dropResult)\n                }\n            };\n            manager.dispatch(action);\n        });\n    };\n}\nfunction verifyInvariants(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\nfunction determineDropResult(targetId, index, registry, monitor) {\n    const target = registry.getTarget(targetId);\n    let dropResult = target ? target.drop(monitor, targetId) : undefined;\n    verifyDropResultType(dropResult);\n    if (typeof dropResult === 'undefined') {\n        dropResult = index === 0 ? {} : monitor.getDropResult();\n    }\n    return dropResult;\n}\nfunction verifyDropResultType(dropResult) {\n    invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\nfunction getDroppableTargets(monitor) {\n    const targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n    targetIds.reverse();\n    return targetIds;\n}\n\n//# sourceMappingURL=drop.js.map","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types.js';\nexport function createEndDrag(manager) {\n    return function endDrag() {\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        verifyIsDragging(monitor);\n        const sourceId = monitor.getSourceId();\n        if (sourceId != null) {\n            const source = registry.getSource(sourceId, true);\n            source.endDrag(monitor, sourceId);\n            registry.unpinSource();\n        }\n        return {\n            type: END_DRAG\n        };\n    };\n}\nfunction verifyIsDragging(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\n//# sourceMappingURL=endDrag.js.map","export function matchesType(targetType, draggedItemType) {\n    if (draggedItemType === null) {\n        return targetType === null;\n    }\n    return Array.isArray(targetType) ? targetType.some((t)=>t === draggedItemType\n    ) : targetType === draggedItemType;\n}\n\n//# sourceMappingURL=matchesType.js.map","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType.js';\nimport { HOVER } from './types.js';\nexport function createHover(manager) {\n    return function hover(targetIdsArg, { clientOffset  } = {}) {\n        verifyTargetIdsIsArray(targetIdsArg);\n        const targetIds = targetIdsArg.slice(0);\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        const draggedItemType = monitor.getItemType();\n        removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n        checkInvariants(targetIds, monitor, registry);\n        hoverAllTargets(targetIds, monitor, registry);\n        return {\n            type: HOVER,\n            payload: {\n                targetIds,\n                clientOffset: clientOffset || null\n            }\n        };\n    };\n}\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n    invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\nfunction checkInvariants(targetIds, monitor, registry) {\n    invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n    for(let i = 0; i < targetIds.length; i++){\n        const targetId = targetIds[i];\n        invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n        const target = registry.getTarget(targetId);\n        invariant(target, 'Expected targetIds to be registered.');\n    }\n}\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n    // Remove those targetIds that don't match the targetType.  This\n    // fixes shallow isOver which would only be non-shallow because of\n    // non-matching targets.\n    for(let i = targetIds.length - 1; i >= 0; i--){\n        const targetId = targetIds[i];\n        const targetType = registry.getTargetType(targetId);\n        if (!matchesType(targetType, draggedItemType)) {\n            targetIds.splice(i, 1);\n        }\n    }\n}\nfunction hoverAllTargets(targetIds, monitor, registry) {\n    // Finally call hover on all matching targets.\n    targetIds.forEach(function(targetId) {\n        const target = registry.getTarget(targetId);\n        target.hover(monitor, targetId);\n    });\n}\n\n//# sourceMappingURL=hover.js.map","import { PUBLISH_DRAG_SOURCE } from './types.js';\nexport function createPublishDragSource(manager) {\n    return function publishDragSource() {\n        const monitor = manager.getMonitor();\n        if (monitor.isDragging()) {\n            return {\n                type: PUBLISH_DRAG_SOURCE\n            };\n        }\n        return;\n    };\n}\n\n//# sourceMappingURL=publishDragSource.js.map","import { createDragDropActions } from '../actions/dragDrop/index.js';\nexport class DragDropManagerImpl {\n    receiveBackend(backend) {\n        this.backend = backend;\n    }\n    getMonitor() {\n        return this.monitor;\n    }\n    getBackend() {\n        return this.backend;\n    }\n    getRegistry() {\n        return this.monitor.registry;\n    }\n    getActions() {\n        /* eslint-disable-next-line @typescript-eslint/no-this-alias */ const manager = this;\n        const { dispatch  } = this.store;\n        function bindActionCreator(actionCreator) {\n            return (...args)=>{\n                const action = actionCreator.apply(manager, args);\n                if (typeof action !== 'undefined') {\n                    dispatch(action);\n                }\n            };\n        }\n        const actions = createDragDropActions(this);\n        return Object.keys(actions).reduce((boundActions, key)=>{\n            const action = actions[key];\n            boundActions[key] = bindActionCreator(action);\n            return boundActions;\n        }, {});\n    }\n    dispatch(action) {\n        this.store.dispatch(action);\n    }\n    constructor(store, monitor){\n        this.isSetUp = false;\n        this.handleRefCountChange = ()=>{\n            const shouldSetUp = this.store.getState().refCount > 0;\n            if (this.backend) {\n                if (shouldSetUp && !this.isSetUp) {\n                    this.backend.setup();\n                    this.isSetUp = true;\n                } else if (!shouldSetUp && this.isSetUp) {\n                    this.backend.teardown();\n                    this.isSetUp = false;\n                }\n            }\n        };\n        this.store = store;\n        this.monitor = monitor;\n        store.subscribe(this.handleRefCountChange);\n    }\n}\n\n//# sourceMappingURL=DragDropManagerImpl.js.map","import { createBeginDrag } from './beginDrag.js';\nimport { createDrop } from './drop.js';\nimport { createEndDrag } from './endDrag.js';\nimport { createHover } from './hover.js';\nimport { createPublishDragSource } from './publishDragSource.js';\nexport * from './types.js';\nexport function createDragDropActions(manager) {\n    return {\n        beginDrag: createBeginDrag(manager),\n        publishDragSource: createPublishDragSource(manager),\n        hover: createHover(manager),\n        drop: createDrop(manager),\n        endDrag: createEndDrag(manager)\n    };\n}\n\n//# sourceMappingURL=index.js.map","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */ export function add(a, b) {\n    return {\n        x: a.x + b.x,\n        y: a.y + b.y\n    };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */ export function subtract(a, b) {\n    return {\n        x: a.x - b.x,\n        y: a.y - b.y\n    };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */ export function getSourceClientOffset(state) {\n    const { clientOffset , initialClientOffset , initialSourceClientOffset  } = state;\n    if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n        return null;\n    }\n    return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */ export function getDifferenceFromInitialOffset(state) {\n    const { clientOffset , initialClientOffset  } = state;\n    if (!clientOffset || !initialClientOffset) {\n        return null;\n    }\n    return subtract(clientOffset, initialClientOffset);\n}\n\n//# sourceMappingURL=coords.js.map","import { intersection } from './js_utils.js';\nexport const NONE = [];\nexport const ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */ export function areDirty(dirtyIds, handlerIds) {\n    if (dirtyIds === NONE) {\n        return false;\n    }\n    if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n        return true;\n    }\n    const commonIds = intersection(handlerIds, dirtyIds);\n    return commonIds.length > 0;\n}\n\n//# sourceMappingURL=dirtiness.js.map","import { invariant } from '@react-dnd/invariant';\nimport { getDifferenceFromInitialOffset, getSourceClientOffset } from '../utils/coords.js';\nimport { areDirty } from '../utils/dirtiness.js';\nimport { matchesType } from '../utils/matchesType.js';\nexport class DragDropMonitorImpl {\n    subscribeToStateChange(listener, options = {}) {\n        const { handlerIds  } = options;\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n        let prevStateId = this.store.getState().stateId;\n        const handleChange = ()=>{\n            const state = this.store.getState();\n            const currentStateId = state.stateId;\n            try {\n                const canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n                if (!canSkipListener) {\n                    listener();\n                }\n            } finally{\n                prevStateId = currentStateId;\n            }\n        };\n        return this.store.subscribe(handleChange);\n    }\n    subscribeToOffsetChange(listener) {\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        let previousState = this.store.getState().dragOffset;\n        const handleChange = ()=>{\n            const nextState = this.store.getState().dragOffset;\n            if (nextState === previousState) {\n                return;\n            }\n            previousState = nextState;\n            listener();\n        };\n        return this.store.subscribe(handleChange);\n    }\n    canDragSource(sourceId) {\n        if (!sourceId) {\n            return false;\n        }\n        const source = this.registry.getSource(sourceId);\n        invariant(source, `Expected to find a valid source. sourceId=${sourceId}`);\n        if (this.isDragging()) {\n            return false;\n        }\n        return source.canDrag(this, sourceId);\n    }\n    canDropOnTarget(targetId) {\n        // undefined on initial render\n        if (!targetId) {\n            return false;\n        }\n        const target = this.registry.getTarget(targetId);\n        invariant(target, `Expected to find a valid target. targetId=${targetId}`);\n        if (!this.isDragging() || this.didDrop()) {\n            return false;\n        }\n        const targetType = this.registry.getTargetType(targetId);\n        const draggedItemType = this.getItemType();\n        return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n    isDragging() {\n        return Boolean(this.getItemType());\n    }\n    isDraggingSource(sourceId) {\n        // undefined on initial render\n        if (!sourceId) {\n            return false;\n        }\n        const source = this.registry.getSource(sourceId, true);\n        invariant(source, `Expected to find a valid source. sourceId=${sourceId}`);\n        if (!this.isDragging() || !this.isSourcePublic()) {\n            return false;\n        }\n        const sourceType = this.registry.getSourceType(sourceId);\n        const draggedItemType = this.getItemType();\n        if (sourceType !== draggedItemType) {\n            return false;\n        }\n        return source.isDragging(this, sourceId);\n    }\n    isOverTarget(targetId, options = {\n        shallow: false\n    }) {\n        // undefined on initial render\n        if (!targetId) {\n            return false;\n        }\n        const { shallow  } = options;\n        if (!this.isDragging()) {\n            return false;\n        }\n        const targetType = this.registry.getTargetType(targetId);\n        const draggedItemType = this.getItemType();\n        if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n            return false;\n        }\n        const targetIds = this.getTargetIds();\n        if (!targetIds.length) {\n            return false;\n        }\n        const index = targetIds.indexOf(targetId);\n        if (shallow) {\n            return index === targetIds.length - 1;\n        } else {\n            return index > -1;\n        }\n    }\n    getItemType() {\n        return this.store.getState().dragOperation.itemType;\n    }\n    getItem() {\n        return this.store.getState().dragOperation.item;\n    }\n    getSourceId() {\n        return this.store.getState().dragOperation.sourceId;\n    }\n    getTargetIds() {\n        return this.store.getState().dragOperation.targetIds;\n    }\n    getDropResult() {\n        return this.store.getState().dragOperation.dropResult;\n    }\n    didDrop() {\n        return this.store.getState().dragOperation.didDrop;\n    }\n    isSourcePublic() {\n        return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n    getInitialClientOffset() {\n        return this.store.getState().dragOffset.initialClientOffset;\n    }\n    getInitialSourceClientOffset() {\n        return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n    getClientOffset() {\n        return this.store.getState().dragOffset.clientOffset;\n    }\n    getSourceClientOffset() {\n        return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n    getDifferenceFromInitialOffset() {\n        return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n    constructor(store, registry){\n        this.store = store;\n        this.registry = registry;\n    }\n}\n\n//# sourceMappingURL=DragDropMonitorImpl.js.map","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n/* globals self */ const scope = typeof global !== 'undefined' ? global : self;\nconst BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\nexport function makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        const timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        const intervalHandle = setInterval(handleTimer, 50);\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback) {\n    let toggle = 1;\n    const observer = new BrowserMutationObserver(callback);\n    const node = document.createTextNode('');\n    observer.observe(node, {\n        characterData: true\n    });\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\nexport const makeRequestCall = typeof BrowserMutationObserver === 'function' ? // reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nmakeRequestCallFromMutationObserver : // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\nmakeRequestCallFromTimer;\n\n//# sourceMappingURL=makeRequestCall.js.map","// `call`, just like a function.\nexport class RawTask {\n    call() {\n        try {\n            this.task && this.task();\n        } catch (error) {\n            this.onError(error);\n        } finally{\n            this.task = null;\n            this.release(this);\n        }\n    }\n    constructor(onError, release){\n        this.onError = onError;\n        this.release = release;\n        this.task = null;\n    }\n}\n\n//# sourceMappingURL=RawTask.js.map","import { AsapQueue } from './AsapQueue.js';\nimport { TaskFactory } from './TaskFactory.js';\nconst asapQueue = new AsapQueue();\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError);\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */ export function asap(task) {\n    asapQueue.enqueueTask(taskFactory.create(task));\n}\n\n//# sourceMappingURL=asap.js.map","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */ import { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js';\nexport class AsapQueue {\n    // Use the fastest means possible to execute a task in its own turn, with\n    // priority over other events including IO, animation, reflow, and redraw\n    // events in browsers.\n    //\n    // An exception thrown by a task will permanently interrupt the processing of\n    // subsequent tasks. The higher level `asap` function ensures that if an\n    // exception is thrown by a task, that the task queue will continue flushing as\n    // soon as possible, but if you use `rawAsap` directly, you are responsible to\n    // either ensure that no exceptions are thrown from your task, or to manually\n    // call `rawAsap.requestFlush` if an exception is thrown.\n    enqueueTask(task) {\n        const { queue: q , requestFlush  } = this;\n        if (!q.length) {\n            requestFlush();\n            this.flushing = true;\n        }\n        // Equivalent to push, but avoids a function call.\n        q[q.length] = task;\n    }\n    constructor(){\n        this.queue = [];\n        // We queue errors to ensure they are thrown in right order (FIFO).\n        // Array-as-queue is good enough here, since we are just dealing with exceptions.\n        this.pendingErrors = [];\n        // Once a flush has been requested, no further calls to `requestFlush` are\n        // necessary until the next `flush` completes.\n        // @ts-ignore\n        this.flushing = false;\n        // The position of the next task to execute in the task queue. This is\n        // preserved between calls to `flush` so that it can be resumed if\n        // a task throws an exception.\n        this.index = 0;\n        // If a task schedules additional tasks recursively, the task queue can grow\n        // unbounded. To prevent memory exhaustion, the task queue will periodically\n        // truncate already-completed tasks.\n        this.capacity = 1024;\n        // The flush function processes all tasks that have been scheduled with\n        // `rawAsap` unless and until one of those tasks throws an exception.\n        // If a task throws an exception, `flush` ensures that its state will remain\n        // consistent and will resume where it left off when called again.\n        // However, `flush` does not make any arrangements to be called again if an\n        // exception is thrown.\n        this.flush = ()=>{\n            const { queue: q  } = this;\n            while(this.index < q.length){\n                const currentIndex = this.index;\n                // Advance the index before calling the task. This ensures that we will\n                // begin flushing on the next task the task throws an error.\n                this.index++;\n                q[currentIndex].call();\n                // Prevent leaking memory for long chains of recursive calls to `asap`.\n                // If we call `asap` within tasks scheduled by `asap`, the queue will\n                // grow, but to avoid an O(n) walk for every task we execute, we don't\n                // shift tasks off the queue after they have been executed.\n                // Instead, we periodically shift 1024 tasks off the queue.\n                if (this.index > this.capacity) {\n                    // Manually shift all values starting at the index back to the\n                    // beginning of the queue.\n                    for(let scan = 0, newLength = q.length - this.index; scan < newLength; scan++){\n                        q[scan] = q[scan + this.index];\n                    }\n                    q.length -= this.index;\n                    this.index = 0;\n                }\n            }\n            q.length = 0;\n            this.index = 0;\n            this.flushing = false;\n        };\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        this.registerPendingError = (err)=>{\n            this.pendingErrors.push(err);\n            this.requestErrorThrow();\n        };\n        // `requestFlush` requests that the high priority event queue be flushed as\n        // soon as possible.\n        // This is useful to prevent an error thrown in a task from stalling the event\n        // queue if the exception handled by Node.jss\n        // `process.on(\"uncaughtException\")` or by a domain.\n        // `requestFlush` is implemented using a strategy based on data collected from\n        // every available SauceLabs Selenium web driver worker at time of writing.\n        // https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n        this.requestFlush = makeRequestCall(this.flush);\n        this.requestErrorThrow = makeRequestCallFromTimer(()=>{\n            // Throw first error\n            if (this.pendingErrors.length) {\n                throw this.pendingErrors.shift();\n            }\n        });\n    }\n} // The message channel technique was discovered by Malte Ubl and was the\n // original foundation for this library.\n // http://www.nonblocking.io/2011/06/windownexttick.html\n // Safari 6.0.5 (at least) intermittently fails to create message ports on a\n // page's first load. Thankfully, this version of Safari supports\n // MutationObservers, so we don't need to fall back in that case.\n // function makeRequestCallFromMessageChannel(callback) {\n //     var channel = new MessageChannel();\n //     channel.port1.onmessage = callback;\n //     return function requestCall() {\n //         channel.port2.postMessage(0);\n //     };\n // }\n // For reasons explained above, we are also unable to use `setImmediate`\n // under any circumstances.\n // Even if we were, there is another bug in Internet Explorer 10.\n // It is not sufficient to assign `setImmediate` to `requestFlush` because\n // `setImmediate` must be called *by name* and therefore must be wrapped in a\n // closure.\n // Never forget.\n // function makeRequestCallFromSetImmediate(callback) {\n //     return function requestCall() {\n //         setImmediate(callback);\n //     };\n // }\n // Safari 6.0 has a problem where timers will get lost while the user is\n // scrolling. This problem does not impact ASAP because Safari 6.0 supports\n // mutation observers, so that implementation is used instead.\n // However, if we ever elect to use timers in Safari, the prevalent work-around\n // is to add a scroll event listener that calls for a flush.\n // `setTimeout` does not call the passed callback if the delay is less than\n // approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n // even then.\n // This is for `asap.js` only.\n // Its name will be periodically randomized to break any code that depends on\n // // its existence.\n // rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n // ASAP was originally a nextTick shim included in Q. This was factored out\n // into this ASAP package. It was later adapted to RSVP which made further\n // amendments. These decisions, particularly to marginalize MessageChannel and\n // to capture the MutationObserver implementation in a closure, were integrated\n // back into ASAP proper.\n // https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n//# sourceMappingURL=AsapQueue.js.map","import { RawTask } from './RawTask.js';\nexport class TaskFactory {\n    create(task) {\n        const tasks = this.freeTasks;\n        const t1 = tasks.length ? tasks.pop() : new RawTask(this.onError, (t)=>tasks[tasks.length] = t\n        );\n        t1.task = task;\n        return t1;\n    }\n    constructor(onError){\n        this.onError = onError;\n        this.freeTasks = [];\n    }\n}\n\n//# sourceMappingURL=TaskFactory.js.map","export const ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport const ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport const REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport const REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n    return {\n        type: ADD_SOURCE,\n        payload: {\n            sourceId\n        }\n    };\n}\nexport function addTarget(targetId) {\n    return {\n        type: ADD_TARGET,\n        payload: {\n            targetId\n        }\n    };\n}\nexport function removeSource(sourceId) {\n    return {\n        type: REMOVE_SOURCE,\n        payload: {\n            sourceId\n        }\n    };\n}\nexport function removeTarget(targetId) {\n    return {\n        type: REMOVE_TARGET,\n        payload: {\n            targetId\n        }\n    };\n}\n\n//# sourceMappingURL=registry.js.map","import { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n    invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n    invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n    invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n    invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n    invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n    invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n    if (allowArray && Array.isArray(type)) {\n        type.forEach((t)=>validateType(t, false)\n        );\n        return;\n    }\n    invariant(typeof type === 'string' || typeof type === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}\n\n//# sourceMappingURL=contracts.js.map","export var HandlerRole;\n(function(HandlerRole) {\n    HandlerRole[\"SOURCE\"] = \"SOURCE\";\n    HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n\n//# sourceMappingURL=interfaces.js.map","let nextUniqueId = 0;\nexport function getNextUniqueId() {\n    return nextUniqueId++;\n}\n\n//# sourceMappingURL=getNextUniqueId.js.map","import { asap } from '@react-dnd/asap';\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource, addTarget, removeSource, removeTarget } from '../actions/registry.js';\nimport { validateSourceContract, validateTargetContract, validateType } from '../contracts.js';\nimport { HandlerRole } from '../interfaces.js';\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js';\nfunction getNextHandlerId(role) {\n    const id = getNextUniqueId().toString();\n    switch(role){\n        case HandlerRole.SOURCE:\n            return `S${id}`;\n        case HandlerRole.TARGET:\n            return `T${id}`;\n        default:\n            throw new Error(`Unknown Handler Role: ${role}`);\n    }\n}\nfunction parseRoleFromHandlerId(handlerId) {\n    switch(handlerId[0]){\n        case 'S':\n            return HandlerRole.SOURCE;\n        case 'T':\n            return HandlerRole.TARGET;\n        default:\n            throw new Error(`Cannot parse handler ID: ${handlerId}`);\n    }\n}\nfunction mapContainsValue(map, searchValue) {\n    const entries = map.entries();\n    let isDone = false;\n    do {\n        const { done , value: [, value] ,  } = entries.next();\n        if (value === searchValue) {\n            return true;\n        }\n        isDone = !!done;\n    }while (!isDone)\n    return false;\n}\nexport class HandlerRegistryImpl {\n    addSource(type, source) {\n        validateType(type);\n        validateSourceContract(source);\n        const sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n        this.store.dispatch(addSource(sourceId));\n        return sourceId;\n    }\n    addTarget(type, target) {\n        validateType(type, true);\n        validateTargetContract(target);\n        const targetId = this.addHandler(HandlerRole.TARGET, type, target);\n        this.store.dispatch(addTarget(targetId));\n        return targetId;\n    }\n    containsHandler(handler) {\n        return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n    getSource(sourceId, includePinned = false) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        const isPinned = includePinned && sourceId === this.pinnedSourceId;\n        const source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n        return source;\n    }\n    getTarget(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.dropTargets.get(targetId);\n    }\n    getSourceType(sourceId) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        return this.types.get(sourceId);\n    }\n    getTargetType(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.types.get(targetId);\n    }\n    isSourceId(handlerId) {\n        const role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.SOURCE;\n    }\n    isTargetId(handlerId) {\n        const role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.TARGET;\n    }\n    removeSource(sourceId) {\n        invariant(this.getSource(sourceId), 'Expected an existing source.');\n        this.store.dispatch(removeSource(sourceId));\n        asap(()=>{\n            this.dragSources.delete(sourceId);\n            this.types.delete(sourceId);\n        });\n    }\n    removeTarget(targetId) {\n        invariant(this.getTarget(targetId), 'Expected an existing target.');\n        this.store.dispatch(removeTarget(targetId));\n        this.dropTargets.delete(targetId);\n        this.types.delete(targetId);\n    }\n    pinSource(sourceId) {\n        const source = this.getSource(sourceId);\n        invariant(source, 'Expected an existing source.');\n        this.pinnedSourceId = sourceId;\n        this.pinnedSource = source;\n    }\n    unpinSource() {\n        invariant(this.pinnedSource, 'No source is pinned at the time.');\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n    }\n    addHandler(role, type, handler) {\n        const id = getNextHandlerId(role);\n        this.types.set(id, type);\n        if (role === HandlerRole.SOURCE) {\n            this.dragSources.set(id, handler);\n        } else if (role === HandlerRole.TARGET) {\n            this.dropTargets.set(id, handler);\n        }\n        return id;\n    }\n    constructor(store){\n        this.types = new Map();\n        this.dragSources = new Map();\n        this.dropTargets = new Map();\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n        this.store = store;\n    }\n}\n\n//# sourceMappingURL=HandlerRegistryImpl.js.map","export const strictEquality = (a, b)=>a === b\n;\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */ export function areCoordsEqual(offsetA, offsetB) {\n    if (!offsetA && !offsetB) {\n        return true;\n    } else if (!offsetA || !offsetB) {\n        return false;\n    } else {\n        return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n    }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */ export function areArraysEqual(a, b, isEqual = strictEquality) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    for(let i = 0; i < a.length; ++i){\n        if (!isEqual(a[i], b[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\n//# sourceMappingURL=equality.js.map","import { BEGIN_DRAG, DROP, END_DRAG, HOVER, PUBLISH_DRAG_SOURCE } from '../actions/dragDrop/index.js';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry.js';\nimport { ALL, NONE } from '../utils/dirtiness.js';\nimport { areArraysEqual } from '../utils/equality.js';\nimport { xor } from '../utils/js_utils.js';\nexport function reduce(// eslint-disable-next-line @typescript-eslint/no-unused-vars\n_state = NONE, action) {\n    switch(action.type){\n        case HOVER:\n            break;\n        case ADD_SOURCE:\n        case ADD_TARGET:\n        case REMOVE_TARGET:\n        case REMOVE_SOURCE:\n            return NONE;\n        case BEGIN_DRAG:\n        case PUBLISH_DRAG_SOURCE:\n        case END_DRAG:\n        case DROP:\n        default:\n            return ALL;\n    }\n    const { targetIds =[] , prevTargetIds =[]  } = action.payload;\n    const result = xor(targetIds, prevTargetIds);\n    const didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n    if (!didChange) {\n        return NONE;\n    }\n    // Check the target ids at the innermost position. If they are valid, add them\n    // to the result\n    const prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n    const innermostTargetId = targetIds[targetIds.length - 1];\n    if (prevInnermostTargetId !== innermostTargetId) {\n        if (prevInnermostTargetId) {\n            result.push(prevInnermostTargetId);\n        }\n        if (innermostTargetId) {\n            result.push(innermostTargetId);\n        }\n    }\n    return result;\n}\n\n//# sourceMappingURL=dirtyHandlerIds.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { BEGIN_DRAG, DROP, END_DRAG, HOVER, INIT_COORDS } from '../actions/dragDrop/index.js';\nimport { areCoordsEqual } from '../utils/equality.js';\nconst initialState = {\n    initialSourceClientOffset: null,\n    initialClientOffset: null,\n    clientOffset: null\n};\nexport function reduce(state = initialState, action) {\n    const { payload  } = action;\n    switch(action.type){\n        case INIT_COORDS:\n        case BEGIN_DRAG:\n            return {\n                initialSourceClientOffset: payload.sourceClientOffset,\n                initialClientOffset: payload.clientOffset,\n                clientOffset: payload.clientOffset\n            };\n        case HOVER:\n            if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n                return state;\n            }\n            return _objectSpread({}, state, {\n                clientOffset: payload.clientOffset\n            });\n        case END_DRAG:\n        case DROP:\n            return initialState;\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=dragOffset.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { BEGIN_DRAG, DROP, END_DRAG, HOVER, PUBLISH_DRAG_SOURCE } from '../actions/dragDrop/index.js';\nimport { REMOVE_TARGET } from '../actions/registry.js';\nimport { without } from '../utils/js_utils.js';\nconst initialState = {\n    itemType: null,\n    item: null,\n    sourceId: null,\n    targetIds: [],\n    dropResult: null,\n    didDrop: false,\n    isSourcePublic: null\n};\nexport function reduce(state = initialState, action) {\n    const { payload  } = action;\n    switch(action.type){\n        case BEGIN_DRAG:\n            return _objectSpread({}, state, {\n                itemType: payload.itemType,\n                item: payload.item,\n                sourceId: payload.sourceId,\n                isSourcePublic: payload.isSourcePublic,\n                dropResult: null,\n                didDrop: false\n            });\n        case PUBLISH_DRAG_SOURCE:\n            return _objectSpread({}, state, {\n                isSourcePublic: true\n            });\n        case HOVER:\n            return _objectSpread({}, state, {\n                targetIds: payload.targetIds\n            });\n        case REMOVE_TARGET:\n            if (state.targetIds.indexOf(payload.targetId) === -1) {\n                return state;\n            }\n            return _objectSpread({}, state, {\n                targetIds: without(state.targetIds, payload.targetId)\n            });\n        case DROP:\n            return _objectSpread({}, state, {\n                dropResult: payload.dropResult,\n                didDrop: true,\n                targetIds: []\n            });\n        case END_DRAG:\n            return _objectSpread({}, state, {\n                itemType: null,\n                item: null,\n                sourceId: null,\n                dropResult: null,\n                didDrop: false,\n                isSourcePublic: null,\n                targetIds: []\n            });\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=dragOperation.js.map","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry.js';\nexport function reduce(state = 0, action) {\n    switch(action.type){\n        case ADD_SOURCE:\n        case ADD_TARGET:\n            return state + 1;\n        case REMOVE_SOURCE:\n        case REMOVE_TARGET:\n            return state - 1;\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=refCount.js.map","export function reduce(state = 0) {\n    return state + 1;\n}\n\n//# sourceMappingURL=stateId.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { get } from '../utils/js_utils.js';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds.js';\nimport { reduce as dragOffset } from './dragOffset.js';\nimport { reduce as dragOperation } from './dragOperation.js';\nimport { reduce as refCount } from './refCount.js';\nimport { reduce as stateId } from './stateId.js';\nexport function reduce(state = {}, action) {\n    return {\n        dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n            type: action.type,\n            payload: _objectSpread({}, action.payload, {\n                prevTargetIds: get(state, 'dragOperation.targetIds', [])\n            })\n        }),\n        dragOffset: dragOffset(state.dragOffset, action),\n        refCount: refCount(state.refCount, action),\n        dragOperation: dragOperation(state.dragOperation, action),\n        stateId: stateId(state.stateId)\n    };\n}\n\n//# sourceMappingURL=index.js.map","import { createStore } from 'redux';\nimport { DragDropManagerImpl } from './classes/DragDropManagerImpl.js';\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js';\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js';\nimport { reduce } from './reducers/index.js';\nexport function createDragDropManager(backendFactory, globalContext = undefined, backendOptions = {}, debugMode = false) {\n    const store = makeStoreInstance(debugMode);\n    const monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n    const manager = new DragDropManagerImpl(store, monitor);\n    const backend = backendFactory(manager, globalContext, backendOptions);\n    manager.receiveBackend(backend);\n    return manager;\n}\nfunction makeStoreInstance(debugMode) {\n    // TODO: if we ever make a react-native version of this,\n    // we'll need to consider how to pull off dev-tooling\n    const reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n    return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n        name: 'dnd-core',\n        instanceId: 'dnd-core'\n    }));\n}\n\n//# sourceMappingURL=createDragDropManager.js.map","function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n    var key, i;\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n        for(i = 0; i < sourceSymbolKeys.length; i++){\n            key = sourceSymbolKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for(i = 0; i < sourceKeys.length; i++){\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n    return target;\n}\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createDragDropManager } from 'dnd-core';\nimport { memo, useEffect } from 'react';\nimport { DndContext } from './DndContext.js';\nlet refCount = 0;\nconst INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\nvar DndProvider = /*#__PURE__*/ memo(function DndProvider(_param) {\n    var { children  } = _param, props = _objectWithoutProperties(_param, [\n        \"children\"\n    ]);\n    const [manager, isGlobalInstance] = getDndContextValue(props) // memoized from props\n    ;\n    /**\n\t\t * If the global context was used to store the DND context\n\t\t * then where theres no more references to it we should\n\t\t * clean it up to avoid memory leaks\n\t\t */ useEffect(()=>{\n        if (isGlobalInstance) {\n            const context = getGlobalContext();\n            ++refCount;\n            return ()=>{\n                if (--refCount === 0) {\n                    context[INSTANCE_SYM] = null;\n                }\n            };\n        }\n        return;\n    }, []);\n    return /*#__PURE__*/ _jsx(DndContext.Provider, {\n        value: manager,\n        children: children\n    });\n});\n/**\n * A React component that provides the React-DnD context\n */ export { DndProvider,  };\nfunction getDndContextValue(props) {\n    if ('manager' in props) {\n        const manager = {\n            dragDropManager: props.manager\n        };\n        return [\n            manager,\n            false\n        ];\n    }\n    const manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n    const isGlobalInstance = !props.context;\n    return [\n        manager,\n        isGlobalInstance\n    ];\n}\nfunction createSingletonDndContext(backend, context = getGlobalContext(), options, debugMode) {\n    const ctx = context;\n    if (!ctx[INSTANCE_SYM]) {\n        ctx[INSTANCE_SYM] = {\n            dragDropManager: createDragDropManager(backend, context, options, debugMode)\n        };\n    }\n    return ctx[INSTANCE_SYM];\n}\nfunction getGlobalContext() {\n    return typeof global !== 'undefined' ? global : window;\n}\n\n//# sourceMappingURL=DndProvider.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import { useEffect, useLayoutEffect } from 'react';\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\n//# sourceMappingURL=useIsomorphicLayoutEffect.js.map","import { useCollector } from './useCollector.js';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n    const [collected, updateCollected] = useCollector(monitor, collect, onCollect);\n    useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n        const handlerId = monitor.getHandlerId();\n        if (handlerId == null) {\n            return;\n        }\n        return monitor.subscribeToStateChange(updateCollected, {\n            handlerIds: [\n                handlerId\n            ]\n        });\n    }, [\n        monitor,\n        updateCollected\n    ]);\n    return collected;\n}\n\n//# sourceMappingURL=useMonitorOutput.js.map","import equal from 'fast-deep-equal';\nimport { useCallback, useState } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */ export function useCollector(monitor, collect, onUpdate) {\n    const [collected, setCollected] = useState(()=>collect(monitor)\n    );\n    const updateCollected = useCallback(()=>{\n        const nextValue = collect(monitor);\n        // This needs to be a deep-equality check because some monitor-collected values\n        // include XYCoord objects that may be equivalent, but do not have instance equality.\n        if (!equal(collected, nextValue)) {\n            setCollected(nextValue);\n            if (onUpdate) {\n                onUpdate();\n            }\n        }\n    }, [\n        collected,\n        monitor,\n        onUpdate\n    ]);\n    // update the collected properties after react renders.\n    // Note that the \"Dustbin Stress Test\" fails if this is not\n    // done when the component updates\n    useIsomorphicLayoutEffect(updateCollected);\n    return [\n        collected,\n        updateCollected\n    ];\n}\n\n//# sourceMappingURL=useCollector.js.map","import { useMonitorOutput } from './useMonitorOutput.js';\nexport function useCollectedProps(collector, monitor, connector) {\n    return useMonitorOutput(monitor, collector || (()=>({})\n    ), ()=>connector.reconnect()\n    );\n}\n\n//# sourceMappingURL=useCollectedProps.js.map","import { useMemo } from 'react';\nexport function useOptionalFactory(arg, deps) {\n    const memoDeps = [\n        ...deps || []\n    ];\n    if (deps == null && typeof arg !== 'function') {\n        memoDeps.push(arg);\n    }\n    return useMemo(()=>{\n        return typeof arg === 'function' ? arg() : arg;\n    }, memoDeps);\n}\n\n//# sourceMappingURL=useOptionalFactory.js.map","import { useMemo } from 'react';\nexport function useConnectDragSource(connector) {\n    return useMemo(()=>connector.hooks.dragSource()\n    , [\n        connector\n    ]);\n}\nexport function useConnectDragPreview(connector) {\n    return useMemo(()=>connector.hooks.dragPreview()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrag = false;\nlet isCallingIsDragging = false;\nexport class DragSourceMonitorImpl {\n    receiveHandlerId(sourceId) {\n        this.sourceId = sourceId;\n    }\n    getHandlerId() {\n        return this.sourceId;\n    }\n    canDrag() {\n        invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingCanDrag = true;\n            return this.internalMonitor.canDragSource(this.sourceId);\n        } finally{\n            isCallingCanDrag = false;\n        }\n    }\n    isDragging() {\n        if (!this.sourceId) {\n            return false;\n        }\n        invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingIsDragging = true;\n            return this.internalMonitor.isDraggingSource(this.sourceId);\n        } finally{\n            isCallingIsDragging = false;\n        }\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    isDraggingSource(sourceId) {\n        return this.internalMonitor.isDraggingSource(sourceId);\n    }\n    isOverTarget(targetId, options) {\n        return this.internalMonitor.isOverTarget(targetId, options);\n    }\n    getTargetIds() {\n        return this.internalMonitor.getTargetIds();\n    }\n    isSourcePublic() {\n        return this.internalMonitor.isSourcePublic();\n    }\n    getSourceId() {\n        return this.internalMonitor.getSourceId();\n    }\n    subscribeToOffsetChange(listener) {\n        return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n    canDragSource(sourceId) {\n        return this.internalMonitor.canDragSource(sourceId);\n    }\n    canDropOnTarget(targetId) {\n        return this.internalMonitor.canDropOnTarget(targetId);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.sourceId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DragSourceMonitorImpl.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrop = false;\nexport class DropTargetMonitorImpl {\n    receiveHandlerId(targetId) {\n        this.targetId = targetId;\n    }\n    getHandlerId() {\n        return this.targetId;\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    canDrop() {\n        // Cut out early if the target id has not been set. This should prevent errors\n        // where the user has an older version of dnd-core like in\n        // https://github.com/react-dnd/react-dnd/issues/1310\n        if (!this.targetId) {\n            return false;\n        }\n        invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n        try {\n            isCallingCanDrop = true;\n            return this.internalMonitor.canDropOnTarget(this.targetId);\n        } finally{\n            isCallingCanDrop = false;\n        }\n    }\n    isOver(options) {\n        if (!this.targetId) {\n            return false;\n        }\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.targetId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DropTargetMonitorImpl.js.map","export function shallowEqual(objA, objB, compare, compareContext) {\n    let compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n    if (compareResult !== void 0) {\n        return !!compareResult;\n    }\n    if (objA === objB) {\n        return true;\n    }\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n        return false;\n    }\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n    const bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n    // Test for A's keys different from B.\n    for(let idx = 0; idx < keysA.length; idx++){\n        const key = keysA[idx];\n        if (!bHasOwnProperty(key)) {\n            return false;\n        }\n        const valueA = objA[key];\n        const valueB = objB[key];\n        compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n        if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n            return false;\n        }\n    }\n    return true;\n}\n\n//# sourceMappingURL=index.js.map","export function isRef(obj) {\n    return(// eslint-disable-next-line no-prototype-builtins\n    obj !== null && typeof obj === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current'));\n}\n\n//# sourceMappingURL=isRef.js.map","import { invariant } from '@react-dnd/invariant';\nimport { cloneElement, isValidElement } from 'react';\nfunction throwIfCompositeComponentElement(element) {\n    // Custom components can no longer be wrapped directly in React DnD 2.0\n    // so that we don't need to depend on findDOMNode() from react-dom.\n    if (typeof element.type === 'string') {\n        return;\n    }\n    const displayName = element.type.displayName || element.type.name || 'the component';\n    throw new Error('Only native element nodes can now be passed to React DnD connectors.' + `You can either wrap ${displayName} into a <div>, or turn it into a ` + 'drag source or a drop target itself.');\n}\nfunction wrapHookToRecognizeElement(hook) {\n    return (elementOrNode = null, options = null)=>{\n        // When passed a node, call the hook straight away.\n        if (!isValidElement(elementOrNode)) {\n            const node = elementOrNode;\n            hook(node, options);\n            // return the node so it can be chained (e.g. when within callback refs\n            // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n            return node;\n        }\n        // If passed a ReactElement, clone it and attach this function as a ref.\n        // This helps us achieve a neat API where user doesn't even know that refs\n        // are being used under the hood.\n        const element = elementOrNode;\n        throwIfCompositeComponentElement(element);\n        // When no options are passed, use the hook directly\n        const ref = options ? (node)=>hook(node, options)\n         : hook;\n        return cloneWithRef(element, ref);\n    };\n}\nexport function wrapConnectorHooks(hooks) {\n    const wrappedHooks = {};\n    Object.keys(hooks).forEach((key)=>{\n        const hook = hooks[key];\n        // ref objects should be passed straight through without wrapping\n        if (key.endsWith('Ref')) {\n            wrappedHooks[key] = hooks[key];\n        } else {\n            const wrappedHook = wrapHookToRecognizeElement(hook);\n            wrappedHooks[key] = ()=>wrappedHook\n            ;\n        }\n    });\n    return wrappedHooks;\n}\nfunction setRef(ref, node) {\n    if (typeof ref === 'function') {\n        ref(node);\n    } else {\n        ref.current = node;\n    }\n}\nfunction cloneWithRef(element, newRef) {\n    const previousRef = element.ref;\n    invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n    if (!previousRef) {\n        // When there is no ref on the element, use the new ref directly\n        return cloneElement(element, {\n            ref: newRef\n        });\n    } else {\n        return cloneElement(element, {\n            ref: (node)=>{\n                setRef(previousRef, node);\n                setRef(newRef, node);\n            }\n        });\n    }\n}\n\n//# sourceMappingURL=wrapConnectorHooks.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class SourceConnector {\n    receiveHandlerId(newHandlerId) {\n        if (this.handlerId === newHandlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get connectTarget() {\n        return this.dragSource;\n    }\n    get dragSourceOptions() {\n        return this.dragSourceOptionsInternal;\n    }\n    set dragSourceOptions(options) {\n        this.dragSourceOptionsInternal = options;\n    }\n    get dragPreviewOptions() {\n        return this.dragPreviewOptionsInternal;\n    }\n    set dragPreviewOptions(options) {\n        this.dragPreviewOptionsInternal = options;\n    }\n    reconnect() {\n        const didChange = this.reconnectDragSource();\n        this.reconnectDragPreview(didChange);\n    }\n    reconnectDragSource() {\n        const dragSource = this.dragSource;\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n        if (didChange) {\n            this.disconnectDragSource();\n        }\n        if (!this.handlerId) {\n            return didChange;\n        }\n        if (!dragSource) {\n            this.lastConnectedDragSource = dragSource;\n            return didChange;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragSource = dragSource;\n            this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n            this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n        }\n        return didChange;\n    }\n    reconnectDragPreview(forceDidChange = false) {\n        const dragPreview = this.dragPreview;\n        // if nothing has changed then don't resubscribe\n        const didChange = forceDidChange || this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n        if (didChange) {\n            this.disconnectDragPreview();\n        }\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dragPreview) {\n            this.lastConnectedDragPreview = dragPreview;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragPreview = dragPreview;\n            this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n            this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n        }\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didConnectedDragSourceChange() {\n        return this.lastConnectedDragSource !== this.dragSource;\n    }\n    didConnectedDragPreviewChange() {\n        return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n    didDragSourceOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n    didDragPreviewOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n    disconnectDragSource() {\n        if (this.dragSourceUnsubscribe) {\n            this.dragSourceUnsubscribe();\n            this.dragSourceUnsubscribe = undefined;\n        }\n    }\n    disconnectDragPreview() {\n        if (this.dragPreviewUnsubscribe) {\n            this.dragPreviewUnsubscribe();\n            this.dragPreviewUnsubscribe = undefined;\n            this.dragPreviewNode = null;\n            this.dragPreviewRef = null;\n        }\n    }\n    get dragSource() {\n        return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n    get dragPreview() {\n        return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n    clearDragSource() {\n        this.dragSourceNode = null;\n        this.dragSourceRef = null;\n    }\n    clearDragPreview() {\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dragSource: (node, options)=>{\n                this.clearDragSource();\n                this.dragSourceOptions = options || null;\n                if (isRef(node)) {\n                    this.dragSourceRef = node;\n                } else {\n                    this.dragSourceNode = node;\n                }\n                this.reconnectDragSource();\n            },\n            dragPreview: (node, options)=>{\n                this.clearDragPreview();\n                this.dragPreviewOptions = options || null;\n                if (isRef(node)) {\n                    this.dragPreviewRef = node;\n                } else {\n                    this.dragPreviewNode = node;\n                }\n                this.reconnectDragPreview();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dragSourceRef = null;\n        this.dragSourceOptionsInternal = null;\n        // The drag preview may either be attached via ref or connect function\n        this.dragPreviewRef = null;\n        this.dragPreviewOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDragSource = null;\n        this.lastConnectedDragSourceOptions = null;\n        this.lastConnectedDragPreview = null;\n        this.lastConnectedDragPreviewOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=SourceConnector.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class TargetConnector {\n    get connectTarget() {\n        return this.dropTarget;\n    }\n    reconnect() {\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n        if (didChange) {\n            this.disconnectDropTarget();\n        }\n        const dropTarget = this.dropTarget;\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dropTarget) {\n            this.lastConnectedDropTarget = dropTarget;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDropTarget = dropTarget;\n            this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n            this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n        }\n    }\n    receiveHandlerId(newHandlerId) {\n        if (newHandlerId === this.handlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get dropTargetOptions() {\n        return this.dropTargetOptionsInternal;\n    }\n    set dropTargetOptions(options) {\n        this.dropTargetOptionsInternal = options;\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didDropTargetChange() {\n        return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n    didOptionsChange() {\n        return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n    disconnectDropTarget() {\n        if (this.unsubscribeDropTarget) {\n            this.unsubscribeDropTarget();\n            this.unsubscribeDropTarget = undefined;\n        }\n    }\n    get dropTarget() {\n        return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n    clearDropTarget() {\n        this.dropTargetRef = null;\n        this.dropTargetNode = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dropTarget: (node, options)=>{\n                this.clearDropTarget();\n                this.dropTargetOptions = options;\n                if (isRef(node)) {\n                    this.dropTargetRef = node;\n                } else {\n                    this.dropTargetNode = node;\n                }\n                this.reconnect();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dropTargetRef = null;\n        this.dropTargetOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDropTarget = null;\n        this.lastConnectedDropTargetOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=TargetConnector.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useContext } from 'react';\nimport { DndContext } from '../core/index.js';\n/**\n * A hook to retrieve the DragDropManager from Context\n */ export function useDragDropManager() {\n    const { dragDropManager  } = useContext(DndContext);\n    invariant(dragDropManager != null, 'Expected drag drop context');\n    return dragDropManager;\n}\n\n//# sourceMappingURL=useDragDropManager.js.map","export class DragSourceImpl {\n    beginDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        let result = null;\n        if (typeof spec.item === 'object') {\n            result = spec.item;\n        } else if (typeof spec.item === 'function') {\n            result = spec.item(monitor);\n        } else {\n            result = {};\n        }\n        return result !== null && result !== void 0 ? result : null;\n    }\n    canDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (typeof spec.canDrag === 'boolean') {\n            return spec.canDrag;\n        } else if (typeof spec.canDrag === 'function') {\n            return spec.canDrag(monitor);\n        } else {\n            return true;\n        }\n    }\n    isDragging(globalMonitor, target) {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const { isDragging  } = spec;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n    endDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const connector = this.connector;\n        const { end  } = spec;\n        if (end) {\n            end(monitor.getItem(), monitor);\n        }\n        connector.reconnect();\n    }\n    constructor(spec, monitor, connector){\n        this.spec = spec;\n        this.monitor = monitor;\n        this.connector = connector;\n    }\n}\n\n//# sourceMappingURL=DragSourceImpl.js.map","import { registerSource } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useDragSource } from './useDragSource.js';\nimport { useDragType } from './useDragType.js';\nexport function useRegisteredDragSource(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const handler = useDragSource(spec, monitor, connector);\n    const itemType = useDragType(spec);\n    useIsomorphicLayoutEffect(function registerDragSource() {\n        if (itemType != null) {\n            const [handlerId, unregister] = registerSource(itemType, handler, manager);\n            monitor.receiveHandlerId(handlerId);\n            connector.receiveHandlerId(handlerId);\n            return unregister;\n        }\n        return;\n    }, [\n        manager,\n        monitor,\n        connector,\n        handler,\n        itemType\n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDragSource.js.map","import { useEffect, useMemo } from 'react';\nimport { DragSourceImpl } from './DragSourceImpl.js';\nexport function useDragSource(spec, monitor, connector) {\n    const handler = useMemo(()=>new DragSourceImpl(spec, monitor, connector)\n    , [\n        monitor,\n        connector\n    ]);\n    useEffect(()=>{\n        handler.spec = spec;\n    }, [\n        spec\n    ]);\n    return handler;\n}\n\n//# sourceMappingURL=useDragSource.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\nexport function useDragType(spec) {\n    return useMemo(()=>{\n        const result = spec.type;\n        invariant(result != null, 'spec.type must be defined');\n        return result;\n    }, [\n        spec\n    ]);\n}\n\n//# sourceMappingURL=useDragType.js.map","export function registerTarget(type, target, manager) {\n    const registry = manager.getRegistry();\n    const targetId = registry.addTarget(type, target);\n    return [\n        targetId,\n        ()=>registry.removeTarget(targetId)\n    ];\n}\nexport function registerSource(type, source, manager) {\n    const registry = manager.getRegistry();\n    const sourceId = registry.addSource(type, source);\n    return [\n        sourceId,\n        ()=>registry.removeSource(sourceId)\n    ];\n}\n\n//# sourceMappingURL=registration.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js';\nimport { useDragSourceConnector } from './useDragSourceConnector.js';\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js';\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrag(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    invariant(!spec.begin, `useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);\n    const monitor = useDragSourceMonitor();\n    const connector = useDragSourceConnector(spec.options, spec.previewOptions);\n    useRegisteredDragSource(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDragSource(connector),\n        useConnectDragPreview(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrag.js.map","import { useMemo } from 'react';\nimport { DragSourceMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDragSourceMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DragSourceMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDragSourceMonitor.js.map","import { useMemo } from 'react';\nimport { SourceConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new SourceConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragSourceOptions = dragSourceOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragSource()\n        ;\n    }, [\n        connector,\n        dragSourceOptions\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragPreviewOptions = dragPreviewOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragPreview()\n        ;\n    }, [\n        connector,\n        dragPreviewOptions\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDragSourceConnector.js.map","import { useMemo } from 'react';\nexport function useConnectDropTarget(connector) {\n    return useMemo(()=>connector.hooks.dropTarget()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","export class DropTargetImpl {\n    canDrop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n    hover() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.hover) {\n            spec.hover(monitor.getItem(), monitor);\n        }\n    }\n    drop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.drop) {\n            return spec.drop(monitor.getItem(), monitor);\n        }\n        return;\n    }\n    constructor(spec, monitor){\n        this.spec = spec;\n        this.monitor = monitor;\n    }\n}\n\n//# sourceMappingURL=DropTargetImpl.js.map","import { registerTarget } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useAccept } from './useAccept.js';\nimport { useDropTarget } from './useDropTarget.js';\nexport function useRegisteredDropTarget(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const dropTarget = useDropTarget(spec, monitor);\n    const accept = useAccept(spec);\n    useIsomorphicLayoutEffect(function registerDropTarget() {\n        const [handlerId, unregister] = registerTarget(accept, dropTarget, manager);\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, [\n        manager,\n        monitor,\n        dropTarget,\n        connector,\n        accept.map((a)=>a.toString()\n        ).join('|'), \n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDropTarget.js.map","import { useEffect, useMemo } from 'react';\nimport { DropTargetImpl } from './DropTargetImpl.js';\nexport function useDropTarget(spec, monitor) {\n    const dropTarget = useMemo(()=>new DropTargetImpl(spec, monitor)\n    , [\n        monitor\n    ]);\n    useEffect(()=>{\n        dropTarget.spec = spec;\n    }, [\n        spec\n    ]);\n    return dropTarget;\n}\n\n//# sourceMappingURL=useDropTarget.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */ export function useAccept(spec) {\n    const { accept  } = spec;\n    return useMemo(()=>{\n        invariant(spec.accept != null, 'accept must be defined');\n        return Array.isArray(accept) ? accept : [\n            accept\n        ];\n    }, [\n        accept\n    ]);\n}\n\n//# sourceMappingURL=useAccept.js.map","import { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDropTarget } from './connectors.js';\nimport { useDropTargetConnector } from './useDropTargetConnector.js';\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js';\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrop(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    const monitor = useDropTargetMonitor();\n    const connector = useDropTargetConnector(spec.options);\n    useRegisteredDropTarget(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDropTarget(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrop.js.map","import { useMemo } from 'react';\nimport { DropTargetMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDropTargetMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DropTargetMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDropTargetMonitor.js.map","import { useMemo } from 'react';\nimport { TargetConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDropTargetConnector(options) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new TargetConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dropTargetOptions = options || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDropTarget()\n        ;\n    }, [\n        options\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDropTargetConnector.js.map","// cheap lodash replacements\nexport function memoize(fn) {\n    let result = null;\n    const memoized = ()=>{\n        if (result == null) {\n            result = fn();\n        }\n        return result;\n    };\n    return memoized;\n}\n/**\n * drop-in replacement for _.without\n */ export function without(items, item) {\n    return items.filter((i)=>i !== item\n    );\n}\nexport function union(itemsA, itemsB) {\n    const set = new Set();\n    const insertItem = (item)=>set.add(item)\n    ;\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    const result = [];\n    set.forEach((key)=>result.push(key)\n    );\n    return result;\n}\n\n//# sourceMappingURL=js_utils.js.map","import { union, without } from './utils/js_utils.js';\nexport class EnterLeaveCounter {\n    enter(enteringNode) {\n        const previousLength = this.entered.length;\n        const isNodeEntered = (node)=>this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode))\n        ;\n        this.entered = union(this.entered.filter(isNodeEntered), [\n            enteringNode\n        ]);\n        return previousLength === 0 && this.entered.length > 0;\n    }\n    leave(leavingNode) {\n        const previousLength = this.entered.length;\n        this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n        return previousLength > 0 && this.entered.length === 0;\n    }\n    reset() {\n        this.entered = [];\n    }\n    constructor(isNodeInDocument){\n        this.entered = [];\n        this.isNodeInDocument = isNodeInDocument;\n    }\n}\n\n//# sourceMappingURL=EnterLeaveCounter.js.map","export class NativeDragSource {\n    initializeExposedProperties() {\n        Object.keys(this.config.exposeProperties).forEach((property)=>{\n            Object.defineProperty(this.item, property, {\n                configurable: true,\n                enumerable: true,\n                get () {\n                    // eslint-disable-next-line no-console\n                    console.warn(`Browser doesn't allow reading \"${property}\" until the drop event.`);\n                    return null;\n                }\n            });\n        });\n    }\n    loadDataTransfer(dataTransfer) {\n        if (dataTransfer) {\n            const newProperties = {};\n            Object.keys(this.config.exposeProperties).forEach((property)=>{\n                const propertyFn = this.config.exposeProperties[property];\n                if (propertyFn != null) {\n                    newProperties[property] = {\n                        value: propertyFn(dataTransfer, this.config.matchesTypes),\n                        configurable: true,\n                        enumerable: true\n                    };\n                }\n            });\n            Object.defineProperties(this.item, newProperties);\n        }\n    }\n    canDrag() {\n        return true;\n    }\n    beginDrag() {\n        return this.item;\n    }\n    isDragging(monitor, handle) {\n        return handle === monitor.getSourceId();\n    }\n    endDrag() {\n    // empty\n    }\n    constructor(config){\n        this.config = config;\n        this.item = {};\n        this.initializeExposedProperties();\n    }\n}\n\n//# sourceMappingURL=NativeDragSource.js.map","export const FILE = '__NATIVE_FILE__';\nexport const URL = '__NATIVE_URL__';\nexport const TEXT = '__NATIVE_TEXT__';\nexport const HTML = '__NATIVE_HTML__';\n\n//# sourceMappingURL=NativeTypes.js.map","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n    const result = typesToTry.reduce((resultSoFar, typeToTry)=>resultSoFar || dataTransfer.getData(typeToTry)\n    , '');\n    return result != null ? result : defaultValue;\n}\n\n//# sourceMappingURL=getDataFromDataTransfer.js.map","import * as NativeTypes from '../NativeTypes.js';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js';\nexport const nativeTypesConfig = {\n    [NativeTypes.FILE]: {\n        exposeProperties: {\n            files: (dataTransfer)=>Array.prototype.slice.call(dataTransfer.files)\n            ,\n            items: (dataTransfer)=>dataTransfer.items\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Files'\n        ]\n    },\n    [NativeTypes.HTML]: {\n        exposeProperties: {\n            html: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Html',\n            'text/html'\n        ]\n    },\n    [NativeTypes.URL]: {\n        exposeProperties: {\n            urls: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Url',\n            'text/uri-list'\n        ]\n    },\n    [NativeTypes.TEXT]: {\n        exposeProperties: {\n            text: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Text',\n            'text/plain'\n        ]\n    }\n};\n\n//# sourceMappingURL=nativeTypesConfig.js.map","import { NativeDragSource } from './NativeDragSource.js';\nimport { nativeTypesConfig } from './nativeTypesConfig.js';\nexport function createNativeDragSource(type, dataTransfer) {\n    const config = nativeTypesConfig[type];\n    if (!config) {\n        throw new Error(`native type ${type} has no configuration`);\n    }\n    const result = new NativeDragSource(config);\n    result.loadDataTransfer(dataTransfer);\n    return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n    if (!dataTransfer) {\n        return null;\n    }\n    const dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n    return Object.keys(nativeTypesConfig).filter((nativeItemType)=>{\n        const typeConfig = nativeTypesConfig[nativeItemType];\n        if (!(typeConfig === null || typeConfig === void 0 ? void 0 : typeConfig.matchesTypes)) {\n            return false;\n        }\n        return typeConfig.matchesTypes.some((t)=>dataTransferTypes.indexOf(t) > -1\n        );\n    })[0] || null;\n}\n\n//# sourceMappingURL=index.js.map","import { memoize } from './utils/js_utils.js';\nexport const isFirefox = memoize(()=>/firefox/i.test(navigator.userAgent)\n);\nexport const isSafari = memoize(()=>Boolean(window.safari)\n);\n\n//# sourceMappingURL=BrowserDetector.js.map","export class MonotonicInterpolant {\n    interpolate(x) {\n        const { xs , ys , c1s , c2s , c3s  } = this;\n        // The rightmost point in the dataset should give an exact result\n        let i = xs.length - 1;\n        if (x === xs[i]) {\n            return ys[i];\n        }\n        // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n        let low = 0;\n        let high = c3s.length - 1;\n        let mid;\n        while(low <= high){\n            mid = Math.floor(0.5 * (low + high));\n            const xHere = xs[mid];\n            if (xHere < x) {\n                low = mid + 1;\n            } else if (xHere > x) {\n                high = mid - 1;\n            } else {\n                return ys[mid];\n            }\n        }\n        i = Math.max(0, high);\n        // Interpolate\n        const diff = x - xs[i];\n        const diffSq = diff * diff;\n        return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n    constructor(xs, ys){\n        const { length  } = xs;\n        // Rearrange xs and ys so that xs is sorted\n        const indexes = [];\n        for(let i = 0; i < length; i++){\n            indexes.push(i);\n        }\n        indexes.sort((a, b)=>xs[a] < xs[b] ? -1 : 1\n        );\n        // Get consecutive differences and slopes\n        const dys = [];\n        const dxs = [];\n        const ms = [];\n        let dx;\n        let dy;\n        for(let i1 = 0; i1 < length - 1; i1++){\n            dx = xs[i1 + 1] - xs[i1];\n            dy = ys[i1 + 1] - ys[i1];\n            dxs.push(dx);\n            dys.push(dy);\n            ms.push(dy / dx);\n        }\n        // Get degree-1 coefficients\n        const c1s = [\n            ms[0]\n        ];\n        for(let i2 = 0; i2 < dxs.length - 1; i2++){\n            const m2 = ms[i2];\n            const mNext = ms[i2 + 1];\n            if (m2 * mNext <= 0) {\n                c1s.push(0);\n            } else {\n                dx = dxs[i2];\n                const dxNext = dxs[i2 + 1];\n                const common = dx + dxNext;\n                c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n            }\n        }\n        c1s.push(ms[ms.length - 1]);\n        // Get degree-2 and degree-3 coefficients\n        const c2s = [];\n        const c3s = [];\n        let m;\n        for(let i3 = 0; i3 < c1s.length - 1; i3++){\n            m = ms[i3];\n            const c1 = c1s[i3];\n            const invDx = 1 / dxs[i3];\n            const common = c1 + c1s[i3 + 1] - m - m;\n            c2s.push((m - c1 - common) * invDx);\n            c3s.push(common * invDx * invDx);\n        }\n        this.xs = xs;\n        this.ys = ys;\n        this.c1s = c1s;\n        this.c2s = c2s;\n        this.c3s = c3s;\n    }\n}\n\n//# sourceMappingURL=MonotonicInterpolant.js.map","import { isFirefox, isSafari } from './BrowserDetector.js';\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js';\nconst ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n    const el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n    if (!el) {\n        return null;\n    }\n    const { top , left  } = el.getBoundingClientRect();\n    return {\n        x: left,\n        y: top\n    };\n}\nexport function getEventClientOffset(e) {\n    return {\n        x: e.clientX,\n        y: e.clientY\n    };\n}\nfunction isImageNode(node) {\n    var ref;\n    return node.nodeName === 'IMG' && (isFirefox() || !((ref = document.documentElement) === null || ref === void 0 ? void 0 : ref.contains(node)));\n}\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n    let dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n    let dragPreviewHeight = isImage ? dragPreview.height : sourceHeight;\n    // Work around @2x coordinate discrepancies in browsers\n    if (isSafari() && isImage) {\n        dragPreviewHeight /= window.devicePixelRatio;\n        dragPreviewWidth /= window.devicePixelRatio;\n    }\n    return {\n        dragPreviewWidth,\n        dragPreviewHeight\n    };\n}\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n    // The browsers will use the image intrinsic size under different conditions.\n    // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n    const isImage = isImageNode(dragPreview);\n    const dragPreviewNode = isImage ? sourceNode : dragPreview;\n    const dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n    const offsetFromDragPreview = {\n        x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n        y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n    };\n    const { offsetWidth: sourceWidth , offsetHeight: sourceHeight  } = sourceNode;\n    const { anchorX , anchorY  } = anchorPoint;\n    const { dragPreviewWidth , dragPreviewHeight  } = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight);\n    const calculateYOffset = ()=>{\n        const interpolantY = new MonotonicInterpolant([\n            0,\n            0.5,\n            1\n        ], [\n            // Dock to the top\n            offsetFromDragPreview.y,\n            // Align at the center\n            (offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n            // Dock to the bottom\n            offsetFromDragPreview.y + dragPreviewHeight - sourceHeight, \n        ]);\n        let y = interpolantY.interpolate(anchorY);\n        // Work around Safari 8 positioning bug\n        if (isSafari() && isImage) {\n            // We'll have to wait for @3x to see if this is entirely correct\n            y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n        }\n        return y;\n    };\n    const calculateXOffset = ()=>{\n        // Interpolate coordinates depending on anchor point\n        // If you know a simpler way to do this, let me know\n        const interpolantX = new MonotonicInterpolant([\n            0,\n            0.5,\n            1\n        ], [\n            // Dock to the left\n            offsetFromDragPreview.x,\n            // Align at the center\n            (offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n            // Dock to the right\n            offsetFromDragPreview.x + dragPreviewWidth - sourceWidth, \n        ]);\n        return interpolantX.interpolate(anchorX);\n    };\n    // Force offsets if specified in the options.\n    const { offsetX , offsetY  } = offsetPoint;\n    const isManualOffsetX = offsetX === 0 || offsetX;\n    const isManualOffsetY = offsetY === 0 || offsetY;\n    return {\n        x: isManualOffsetX ? offsetX : calculateXOffset(),\n        y: isManualOffsetY ? offsetY : calculateYOffset()\n    };\n}\n\n//# sourceMappingURL=OffsetUtils.js.map","export class OptionsReader {\n    get window() {\n        if (this.globalContext) {\n            return this.globalContext;\n        } else if (typeof window !== 'undefined') {\n            return window;\n        }\n        return undefined;\n    }\n    get document() {\n        var ref;\n        if ((ref = this.globalContext) === null || ref === void 0 ? void 0 : ref.document) {\n            return this.globalContext.document;\n        } else if (this.window) {\n            return this.window.document;\n        } else {\n            return undefined;\n        }\n    }\n    get rootElement() {\n        var ref;\n        return ((ref = this.optionsArgs) === null || ref === void 0 ? void 0 : ref.rootElement) || this.window;\n    }\n    constructor(globalContext, options){\n        this.ownerDocument = null;\n        this.globalContext = globalContext;\n        this.optionsArgs = options;\n    }\n}\n\n//# sourceMappingURL=OptionsReader.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources/index.js';\nimport * as NativeTypes from './NativeTypes.js';\nimport { getDragPreviewOffset, getEventClientOffset, getNodeClientOffset } from './OffsetUtils.js';\nimport { OptionsReader } from './OptionsReader.js';\nexport class HTML5BackendImpl {\n    /**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */ profile() {\n        var ref, ref1;\n        return {\n            sourcePreviewNodes: this.sourcePreviewNodes.size,\n            sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n            sourceNodeOptions: this.sourceNodeOptions.size,\n            sourceNodes: this.sourceNodes.size,\n            dragStartSourceIds: ((ref = this.dragStartSourceIds) === null || ref === void 0 ? void 0 : ref.length) || 0,\n            dropTargetIds: this.dropTargetIds.length,\n            dragEnterTargetIds: this.dragEnterTargetIds.length,\n            dragOverTargetIds: ((ref1 = this.dragOverTargetIds) === null || ref1 === void 0 ? void 0 : ref1.length) || 0\n        };\n    }\n    // public for test\n    get window() {\n        return this.options.window;\n    }\n    get document() {\n        return this.options.document;\n    }\n    /**\n\t * Get the root element to use for event subscriptions\n\t */ get rootElement() {\n        return this.options.rootElement;\n    }\n    setup() {\n        const root = this.rootElement;\n        if (root === undefined) {\n            return;\n        }\n        if (root.__isReactDndBackendSetUp) {\n            throw new Error('Cannot have two HTML5 backends at the same time.');\n        }\n        root.__isReactDndBackendSetUp = true;\n        this.addEventListeners(root);\n    }\n    teardown() {\n        const root = this.rootElement;\n        if (root === undefined) {\n            return;\n        }\n        root.__isReactDndBackendSetUp = false;\n        this.removeEventListeners(this.rootElement);\n        this.clearCurrentDragSourceNode();\n        if (this.asyncEndDragFrameId) {\n            var ref;\n            (ref = this.window) === null || ref === void 0 ? void 0 : ref.cancelAnimationFrame(this.asyncEndDragFrameId);\n        }\n    }\n    connectDragPreview(sourceId, node, options) {\n        this.sourcePreviewNodeOptions.set(sourceId, options);\n        this.sourcePreviewNodes.set(sourceId, node);\n        return ()=>{\n            this.sourcePreviewNodes.delete(sourceId);\n            this.sourcePreviewNodeOptions.delete(sourceId);\n        };\n    }\n    connectDragSource(sourceId, node, options) {\n        this.sourceNodes.set(sourceId, node);\n        this.sourceNodeOptions.set(sourceId, options);\n        const handleDragStart = (e)=>this.handleDragStart(e, sourceId)\n        ;\n        const handleSelectStart = (e)=>this.handleSelectStart(e)\n        ;\n        node.setAttribute('draggable', 'true');\n        node.addEventListener('dragstart', handleDragStart);\n        node.addEventListener('selectstart', handleSelectStart);\n        return ()=>{\n            this.sourceNodes.delete(sourceId);\n            this.sourceNodeOptions.delete(sourceId);\n            node.removeEventListener('dragstart', handleDragStart);\n            node.removeEventListener('selectstart', handleSelectStart);\n            node.setAttribute('draggable', 'false');\n        };\n    }\n    connectDropTarget(targetId, node) {\n        const handleDragEnter = (e)=>this.handleDragEnter(e, targetId)\n        ;\n        const handleDragOver = (e)=>this.handleDragOver(e, targetId)\n        ;\n        const handleDrop = (e)=>this.handleDrop(e, targetId)\n        ;\n        node.addEventListener('dragenter', handleDragEnter);\n        node.addEventListener('dragover', handleDragOver);\n        node.addEventListener('drop', handleDrop);\n        return ()=>{\n            node.removeEventListener('dragenter', handleDragEnter);\n            node.removeEventListener('dragover', handleDragOver);\n            node.removeEventListener('drop', handleDrop);\n        };\n    }\n    addEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.addEventListener) {\n            return;\n        }\n        target.addEventListener('dragstart', this.handleTopDragStart);\n        target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.addEventListener('dragenter', this.handleTopDragEnter);\n        target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.addEventListener('dragover', this.handleTopDragOver);\n        target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.addEventListener('drop', this.handleTopDrop);\n        target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n    removeEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.removeEventListener) {\n            return;\n        }\n        target.removeEventListener('dragstart', this.handleTopDragStart);\n        target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.removeEventListener('dragenter', this.handleTopDragEnter);\n        target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.removeEventListener('dragover', this.handleTopDragOver);\n        target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.removeEventListener('drop', this.handleTopDrop);\n        target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n    getCurrentSourceNodeOptions() {\n        const sourceId = this.monitor.getSourceId();\n        const sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n        return _objectSpread({\n            dropEffect: this.altKeyPressed ? 'copy' : 'move'\n        }, sourceNodeOptions || {});\n    }\n    getCurrentDropEffect() {\n        if (this.isDraggingNativeItem()) {\n            // It makes more sense to default to 'copy' for native resources\n            return 'copy';\n        }\n        return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n    getCurrentSourcePreviewNodeOptions() {\n        const sourceId = this.monitor.getSourceId();\n        const sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n        return _objectSpread({\n            anchorX: 0.5,\n            anchorY: 0.5,\n            captureDraggingState: false\n        }, sourcePreviewNodeOptions || {});\n    }\n    isDraggingNativeItem() {\n        const itemType = this.monitor.getItemType();\n        return Object.keys(NativeTypes).some((key)=>NativeTypes[key] === itemType\n        );\n    }\n    beginDragNativeItem(type, dataTransfer) {\n        this.clearCurrentDragSourceNode();\n        this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n        this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n        this.actions.beginDrag([\n            this.currentNativeHandle\n        ]);\n    }\n    setCurrentDragSourceNode(node) {\n        this.clearCurrentDragSourceNode();\n        this.currentDragSourceNode = node;\n        // A timeout of > 0 is necessary to resolve Firefox issue referenced\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        const MOUSE_MOVE_TIMEOUT = 1000;\n        // Receiving a mouse event in the middle of a dragging operation\n        // means it has ended and the drag source node disappeared from DOM,\n        // so the browser didn't dispatch the dragend event.\n        //\n        // We need to wait before we start listening for mousemove events.\n        // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n        // immediately in some browsers.\n        //\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        //\n        this.mouseMoveTimeoutTimer = setTimeout(()=>{\n            var ref;\n            return (ref = this.rootElement) === null || ref === void 0 ? void 0 : ref.addEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }, MOUSE_MOVE_TIMEOUT);\n    }\n    clearCurrentDragSourceNode() {\n        if (this.currentDragSourceNode) {\n            this.currentDragSourceNode = null;\n            if (this.rootElement) {\n                var ref;\n                (ref = this.window) === null || ref === void 0 ? void 0 : ref.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n                this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n            }\n            this.mouseMoveTimeoutTimer = null;\n            return true;\n        }\n        return false;\n    }\n    handleDragStart(e, sourceId) {\n        if (e.defaultPrevented) {\n            return;\n        }\n        if (!this.dragStartSourceIds) {\n            this.dragStartSourceIds = [];\n        }\n        this.dragStartSourceIds.unshift(sourceId);\n    }\n    handleDragEnter(_e, targetId) {\n        this.dragEnterTargetIds.unshift(targetId);\n    }\n    handleDragOver(_e, targetId) {\n        if (this.dragOverTargetIds === null) {\n            this.dragOverTargetIds = [];\n        }\n        this.dragOverTargetIds.unshift(targetId);\n    }\n    handleDrop(_e, targetId) {\n        this.dropTargetIds.unshift(targetId);\n    }\n    constructor(manager, globalContext, options){\n        this.sourcePreviewNodes = new Map();\n        this.sourcePreviewNodeOptions = new Map();\n        this.sourceNodes = new Map();\n        this.sourceNodeOptions = new Map();\n        this.dragStartSourceIds = null;\n        this.dropTargetIds = [];\n        this.dragEnterTargetIds = [];\n        this.currentNativeSource = null;\n        this.currentNativeHandle = null;\n        this.currentDragSourceNode = null;\n        this.altKeyPressed = false;\n        this.mouseMoveTimeoutTimer = null;\n        this.asyncEndDragFrameId = null;\n        this.dragOverTargetIds = null;\n        this.lastClientOffset = null;\n        this.hoverRafId = null;\n        this.getSourceClientOffset = (sourceId)=>{\n            const source = this.sourceNodes.get(sourceId);\n            return source && getNodeClientOffset(source) || null;\n        };\n        this.endDragNativeItem = ()=>{\n            if (!this.isDraggingNativeItem()) {\n                return;\n            }\n            this.actions.endDrag();\n            if (this.currentNativeHandle) {\n                this.registry.removeSource(this.currentNativeHandle);\n            }\n            this.currentNativeHandle = null;\n            this.currentNativeSource = null;\n        };\n        this.isNodeInDocument = (node)=>{\n            // Check the node either in the main document or in the current context\n            return Boolean(node && this.document && this.document.body && this.document.body.contains(node));\n        };\n        this.endDragIfSourceWasRemovedFromDOM = ()=>{\n            const node = this.currentDragSourceNode;\n            if (node == null || this.isNodeInDocument(node)) {\n                return;\n            }\n            if (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.scheduleHover = (dragOverTargetIds)=>{\n            if (this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n                this.hoverRafId = requestAnimationFrame(()=>{\n                    if (this.monitor.isDragging()) {\n                        this.actions.hover(dragOverTargetIds || [], {\n                            clientOffset: this.lastClientOffset\n                        });\n                    }\n                    this.hoverRafId = null;\n                });\n            }\n        };\n        this.cancelHover = ()=>{\n            if (this.hoverRafId !== null && typeof cancelAnimationFrame !== 'undefined') {\n                cancelAnimationFrame(this.hoverRafId);\n                this.hoverRafId = null;\n            }\n        };\n        this.handleTopDragStartCapture = ()=>{\n            this.clearCurrentDragSourceNode();\n            this.dragStartSourceIds = [];\n        };\n        this.handleTopDragStart = (e)=>{\n            if (e.defaultPrevented) {\n                return;\n            }\n            const { dragStartSourceIds  } = this;\n            this.dragStartSourceIds = null;\n            const clientOffset = getEventClientOffset(e);\n            // Avoid crashing if we missed a drop event or our previous drag died\n            if (this.monitor.isDragging()) {\n                this.actions.endDrag();\n                this.cancelHover();\n            }\n            // Don't publish the source just yet (see why below)\n            this.actions.beginDrag(dragStartSourceIds || [], {\n                publishSource: false,\n                getSourceClientOffset: this.getSourceClientOffset,\n                clientOffset\n            });\n            const { dataTransfer  } = e;\n            const nativeType = matchNativeItemType(dataTransfer);\n            if (this.monitor.isDragging()) {\n                if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n                    // Use custom drag image if user specifies it.\n                    // If child drag source refuses drag but parent agrees,\n                    // use parent's node as drag image. Neither works in IE though.\n                    const sourceId = this.monitor.getSourceId();\n                    const sourceNode = this.sourceNodes.get(sourceId);\n                    const dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode;\n                    if (dragPreview) {\n                        const { anchorX , anchorY , offsetX , offsetY  } = this.getCurrentSourcePreviewNodeOptions();\n                        const anchorPoint = {\n                            anchorX,\n                            anchorY\n                        };\n                        const offsetPoint = {\n                            offsetX,\n                            offsetY\n                        };\n                        const dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n                        dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n                    }\n                }\n                try {\n                    // Firefox won't drag without setting data\n                    dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n                } catch (err) {\n                // IE doesn't support MIME types in setData\n                }\n                // Store drag source node so we can check whether\n                // it is removed from DOM and trigger endDrag manually.\n                this.setCurrentDragSourceNode(e.target);\n                // Now we are ready to publish the drag source.. or are we not?\n                const { captureDraggingState  } = this.getCurrentSourcePreviewNodeOptions();\n                if (!captureDraggingState) {\n                    // Usually we want to publish it in the next tick so that browser\n                    // is able to screenshot the current (not yet dragging) state.\n                    //\n                    // It also neatly avoids a situation where render() returns null\n                    // in the same tick for the source element, and browser freaks out.\n                    setTimeout(()=>this.actions.publishDragSource()\n                    , 0);\n                } else {\n                    // In some cases the user may want to override this behavior, e.g.\n                    // to work around IE not supporting custom drag previews.\n                    //\n                    // When using a custom drag layer, the only way to prevent\n                    // the default drag preview from drawing in IE is to screenshot\n                    // the dragging state in which the node itself has zero opacity\n                    // and height. In this case, though, returning null from render()\n                    // will abruptly end the dragging, which is not obvious.\n                    //\n                    // This is the reason such behavior is strictly opt-in.\n                    this.actions.publishDragSource();\n                }\n            } else if (nativeType) {\n                // A native item (such as URL) dragged from inside the document\n                this.beginDragNativeItem(nativeType);\n            } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n                // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n                // Just let it drag. It's a native type (URL or text) and will be picked up in\n                // dragenter handler.\n                return;\n            } else {\n                // If by this time no drag source reacted, tell browser not to drag.\n                e.preventDefault();\n            }\n        };\n        this.handleTopDragEndCapture = ()=>{\n            if (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n                // Firefox can dispatch this event in an infinite loop\n                // if dragend handler does something like showing an alert.\n                // Only proceed if we have not handled it already.\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.handleTopDragEnterCapture = (e)=>{\n            this.dragEnterTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            }\n            const isFirstEnter = this.enterLeaveCounter.enter(e.target);\n            if (!isFirstEnter || this.monitor.isDragging()) {\n                return;\n            }\n            const { dataTransfer  } = e;\n            const nativeType = matchNativeItemType(dataTransfer);\n            if (nativeType) {\n                // A native item (such as file or URL) dragged from outside the document\n                this.beginDragNativeItem(nativeType, dataTransfer);\n            }\n        };\n        this.handleTopDragEnter = (e)=>{\n            const { dragEnterTargetIds  } = this;\n            this.dragEnterTargetIds = [];\n            if (!this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                return;\n            }\n            this.altKeyPressed = e.altKey;\n            // If the target changes position as the result of `dragenter`, `dragover` might still\n            // get dispatched despite target being no longer there. The easy solution is to check\n            // whether there actually is a target before firing `hover`.\n            if (dragEnterTargetIds.length > 0) {\n                this.actions.hover(dragEnterTargetIds, {\n                    clientOffset: getEventClientOffset(e)\n                });\n            }\n            const canDrop = dragEnterTargetIds.some((targetId)=>this.monitor.canDropOnTarget(targetId)\n            );\n            if (canDrop) {\n                // IE requires this to fire dragover events\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = this.getCurrentDropEffect();\n                }\n            }\n        };\n        this.handleTopDragOverCapture = (e)=>{\n            this.dragOverTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            }\n        };\n        this.handleTopDragOver = (e)=>{\n            const { dragOverTargetIds  } = this;\n            this.dragOverTargetIds = [];\n            if (!this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                // Prevent default \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = 'none';\n                }\n                return;\n            }\n            this.altKeyPressed = e.altKey;\n            this.lastClientOffset = getEventClientOffset(e);\n            this.scheduleHover(dragOverTargetIds);\n            const canDrop = (dragOverTargetIds || []).some((targetId)=>this.monitor.canDropOnTarget(targetId)\n            );\n            if (canDrop) {\n                // Show user-specified drop effect.\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = this.getCurrentDropEffect();\n                }\n            } else if (this.isDraggingNativeItem()) {\n                // Don't show a nice cursor but still prevent default\n                // \"drop and blow away the whole document\" action.\n                e.preventDefault();\n            } else {\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = 'none';\n                }\n            }\n        };\n        this.handleTopDragLeaveCapture = (e)=>{\n            if (this.isDraggingNativeItem()) {\n                e.preventDefault();\n            }\n            const isLastLeave = this.enterLeaveCounter.leave(e.target);\n            if (!isLastLeave) {\n                return;\n            }\n            if (this.isDraggingNativeItem()) {\n                setTimeout(()=>this.endDragNativeItem()\n                , 0);\n            }\n            this.cancelHover();\n        };\n        this.handleTopDropCapture = (e)=>{\n            this.dropTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                e.preventDefault();\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            } else if (matchNativeItemType(e.dataTransfer)) {\n                // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n                // even if the current drag event matches a user-defined type.\n                // Stop the default behavior when we're not expecting a native item to be dropped.\n                e.preventDefault();\n            }\n            this.enterLeaveCounter.reset();\n        };\n        this.handleTopDrop = (e)=>{\n            const { dropTargetIds  } = this;\n            this.dropTargetIds = [];\n            this.actions.hover(dropTargetIds, {\n                clientOffset: getEventClientOffset(e)\n            });\n            this.actions.drop({\n                dropEffect: this.getCurrentDropEffect()\n            });\n            if (this.isDraggingNativeItem()) {\n                this.endDragNativeItem();\n            } else if (this.monitor.isDragging()) {\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.handleSelectStart = (e)=>{\n            const target = e.target;\n            // Only IE requires us to explicitly say\n            // we want drag drop operation to start\n            if (typeof target.dragDrop !== 'function') {\n                return;\n            }\n            // Inputs and textareas should be selectable\n            if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n                return;\n            }\n            // For other targets, ask IE\n            // to enable drag and drop\n            e.preventDefault();\n            target.dragDrop();\n        };\n        this.options = new OptionsReader(globalContext, options);\n        this.actions = manager.getActions();\n        this.monitor = manager.getMonitor();\n        this.registry = manager.getRegistry();\n        this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n    }\n}\n\n//# sourceMappingURL=HTML5BackendImpl.js.map","import { HTML5BackendImpl } from './HTML5BackendImpl.js';\nimport * as _NativeTypes from './NativeTypes.js';\nexport { getEmptyImage } from './getEmptyImage.js';\nexport { _NativeTypes as NativeTypes };\nexport const HTML5Backend = function createBackend(manager, context, options) {\n    return new HTML5BackendImpl(manager, context, options);\n};\n\n//# sourceMappingURL=index.js.map","/**\n * Email Builder Context\n */\n\nimport React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { EmailComponent, EmailTemplate, MergeTag, DesignSystem, defaultDesignSystem, log } from '@kaptha/email-editor-core';\n\n// ID counter for deterministic IDs in E2E tests\nlet __idCounter = 0;\n\n// Generate component ID (deterministic for E2E tests if enabled)\nexport const generateComponentId = () => {\n  const deterministic = typeof window !== 'undefined' && (window as any).__E2E_DETERMINISTIC_IDS;\n  if (deterministic) {\n    __idCounter += 1;\n    return `comp-${__idCounter}`;\n  }\n  return `comp-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n};\n\nexport interface SavedBlockEntry {\n  id: string;\n  name: string;\n  components: EmailComponent[];\n  createdAt: string;\n}\n\ninterface EmailEditorContextType {\n  components: EmailComponent[];\n  setComponents: (components: EmailComponent[]) => void;\n  addComponent: (component: EmailComponent, index?: number) => void;\n  removeComponent: (id: string) => void;\n  updateComponent: (id: string, updates: Partial<EmailComponent>) => void;\n  cloneComponent: (id: string) => void;\n  moveComponent: (dragIndex: number, hoverIndex: number) => void;\n  selectedComponent: string | null;\n  setSelectedComponent: (id: string | null) => void;\n  mergeTags: MergeTag[];\n  addMergeTags: (tags: MergeTag[]) => void;\n  template: EmailTemplate;\n  setTemplate: (template: EmailTemplate) => void;\n  undo: () => void;\n  redo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n  designSystem: DesignSystem;\n  setDesignSystem: (designSystem: DesignSystem) => void;\n  savedBlocks: SavedBlockEntry[];\n  addSavedBlock: (name: string, comps?: EmailComponent[]) => void;\n  removeSavedBlock: (id: string) => void;\n  insertSavedBlock: (blockId: string, index?: number) => void;\n  renameSavedBlock: (id: string, name: string) => void;\n}\n\nconst EmailEditorContext = createContext<EmailEditorContextType | undefined>(undefined);\n\nexport const useEmailEditor = () => {\n  const context = useContext(EmailEditorContext);\n  if (!context) {\n    throw new Error('useEmailEditor must be used within EmailEditorProvider');\n  }\n  return context;\n};\n\ninterface EmailEditorProviderProps {\n  children: ReactNode;\n  initialTemplate?: EmailTemplate;\n}\n\nexport const EmailEditorProvider: React.FC<EmailEditorProviderProps> = ({ \n  children, \n  initialTemplate \n}) => {\n  const [components, setComponentsState] = useState<EmailComponent[]>(\n    initialTemplate?.components || []\n  );\n  const [selectedComponent, setSelectedComponent] = useState<string | null>(null);\n  const [mergeTags, setMergeTags] = useState<MergeTag[]>([]);\n  const [template, setTemplateState] = useState<EmailTemplate>(\n    initialTemplate || {\n      name: 'Untitled',\n      components: [],\n    }\n  );\n\n  // History management for undo/redo\n  const [history, setHistory] = useState<EmailComponent[][]>([[...(initialTemplate?.components || [])]]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n\n  // Design System\n  const [designSystem, setDesignSystem] = useState<DesignSystem>(defaultDesignSystem);\n\n  // Saved Blocks (localStorage persistence)\n  const [savedBlocks, setSavedBlocks] = useState<SavedBlockEntry[]>(() => {\n    try {\n      const raw = localStorage.getItem('emailbuilder.savedBlocks');\n      if (!raw) return [];\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return [];\n    } catch { return []; }\n  });\n\n  const persistBlocks = (next: SavedBlockEntry[]) => {\n    setSavedBlocks(next);\n    try {\n      localStorage.setItem('emailbuilder.savedBlocks', JSON.stringify(next));\n    } catch { /* ignore */ }\n  };\n\n  const deepCloneComponents = (src: EmailComponent[]): EmailComponent[] => {\n    return src.map(c => JSON.parse(JSON.stringify(c)));\n  };\n\n  const addSavedBlock = (name: string, comps?: EmailComponent[]) => {\n    if (!name.trim()) return;\n    const block: SavedBlockEntry = {\n      id: `block-${Date.now()}`,\n      name: name.trim(),\n      components: deepCloneComponents(comps || components),\n      createdAt: new Date().toISOString(),\n    };\n    persistBlocks([...savedBlocks, block]);\n  };\n\n  const removeSavedBlock = (id: string) => {\n    persistBlocks(savedBlocks.filter(b => b.id !== id));\n  };\n\n  const insertSavedBlock = (blockId: string, index?: number) => {\n    const block = savedBlocks.find(b => b.id === blockId);\n    if (!block) return;\n    const cloned = deepCloneComponents(block.components);\n    const newComponents = [...components];\n    if (index !== undefined) {\n      // Insert maintaining order\n      cloned.forEach((comp, i) => {\n        newComponents.splice(index + i, 0, comp);\n      });\n    } else {\n      newComponents.push(...cloned);\n    }\n    setComponents(newComponents);\n  };\n\n  const renameSavedBlock = (id: string, name: string) => {\n    if (!name.trim()) return;\n    const next = savedBlocks.map(b => b.id === id ? { ...b, name: name.trim() } : b);\n    persistBlocks(next);\n  };\n\n  // Update history when components change (debounced to avoid too many history entries)\n  const updateHistory = (newComponents: EmailComponent[]) => {\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push([...newComponents]);\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  };\n\n  const setComponents = (newComponents: EmailComponent[]) => {\n    setComponentsState(newComponents);\n    updateHistory(newComponents);\n  };\n\n  const addComponent = (component: EmailComponent, index?: number) => {\n    const newComponents = [...components];\n    if (index !== undefined) {\n      newComponents.splice(index, 0, component);\n    } else {\n      newComponents.push(component);\n    }\n    setComponents(newComponents);\n  };\n\n  const removeComponent = (id: string) => {\n    // Recursively remove component from nested structures\n    const removeComponentDeep = (comps: EmailComponent[]): EmailComponent[] => {\n      return comps.filter(comp => {\n        if (comp.id === id) return false; // Remove this component\n        return true;\n      }).map(comp => {\n        // Check in section children\n        if (comp.type === 'section' && comp.children) {\n          return { ...comp, children: removeComponentDeep(comp.children) };\n        }\n        \n        // Check in columns\n        if (comp.type === 'columns') {\n          const updated: any = { ...comp };\n          for (let i = 1; i <= 4; i++) {\n            const colKey = `column${i}`;\n            if ((comp as any)[colKey] && Array.isArray((comp as any)[colKey])) {\n              updated[colKey] = removeComponentDeep((comp as any)[colKey]);\n            }\n          }\n          return updated;\n        }\n        \n        return comp;\n      });\n    };\n\n    const newComponents = removeComponentDeep(components);\n    setComponents(newComponents);\n    if (selectedComponent === id) {\n      setSelectedComponent(null);\n    }\n  };\n\n  // Deep clone a component with new IDs\n  const deepCloneComponent = (comp: EmailComponent): EmailComponent => {\n    const cloned: any = {\n      ...comp,\n      id: generateComponentId(),\n    };\n\n    // Clone children (for sections)\n    if (comp.children && Array.isArray(comp.children)) {\n      cloned.children = comp.children.map(child => deepCloneComponent(child));\n    }\n\n    // Clone columns\n    if (comp.type === 'columns') {\n      for (let i = 1; i <= 4; i++) {\n        const colKey = `column${i}` as const;\n        if ((comp as any)[colKey] && Array.isArray((comp as any)[colKey])) {\n          cloned[colKey] = (comp as any)[colKey].map((child: EmailComponent) => deepCloneComponent(child));\n        }\n      }\n    }\n\n    return cloned;\n  };\n\n  // Find component and its parent info for cloning\n  const findComponentWithContext = (\n    comps: EmailComponent[],\n    id: string,\n    parentInfo?: { parent: EmailComponent; key: string; index: number }\n  ): { component: EmailComponent | null; parentInfo?: { parent: EmailComponent; key: string; index: number }; topLevelIndex?: number } => {\n    for (let i = 0; i < comps.length; i++) {\n      const comp = comps[i];\n      if (!comp) continue;\n      \n      if (comp.id === id) {\n        return { \n          component: comp, \n          ...(parentInfo && { parentInfo }),\n          ...(parentInfo === undefined && { topLevelIndex: i })\n        };\n      }\n\n      // Check in section children\n      if (comp.type === 'section' && comp.children) {\n        for (let j = 0; j < comp.children.length; j++) {\n          const child = comp.children[j];\n          if (!child) continue;\n          \n          const result = findComponentWithContext(\n            [child],\n            id,\n            { parent: comp, key: 'children', index: j }\n          );\n          if (result.component) return result;\n        }\n      }\n\n      // Check in columns\n      if (comp.type === 'columns') {\n        for (let colIdx = 1; colIdx <= 4; colIdx++) {\n          const colKey = `column${colIdx}` as const;\n          const column = (comp as any)[colKey];\n          if (column && Array.isArray(column)) {\n            for (let j = 0; j < column.length; j++) {\n              const colItem = column[j];\n              if (!colItem) continue;\n              \n              const result = findComponentWithContext(\n                [colItem],\n                id,\n                { parent: comp, key: colKey, index: j }\n              );\n              if (result.component) return result;\n            }\n          }\n        }\n      }\n    }\n    return { component: null };\n  };\n\n  const cloneComponent = (id: string) => {\n    const { component, parentInfo, topLevelIndex } = findComponentWithContext(components, id);\n    if (!component) return;\n\n    const cloned = deepCloneComponent(component);\n\n    if (topLevelIndex !== undefined) {\n      // Top-level component - insert after original\n      const newComponents = [...components];\n      newComponents.splice(topLevelIndex + 1, 0, cloned);\n      setComponents(newComponents);\n    } else if (parentInfo) {\n      // Nested component - insert after original in parent\n      const newComponents = updateComponentDeep(components, parentInfo.parent.id, (() => {\n        if (parentInfo.key === 'children') {\n          const newChildren = [...(parentInfo.parent.children || [])];\n          newChildren.splice(parentInfo.index + 1, 0, cloned);\n          return { children: newChildren };\n        } else {\n          // Column\n          const column = [...((parentInfo.parent as any)[parentInfo.key] || [])];\n          column.splice(parentInfo.index + 1, 0, cloned);\n          return { [parentInfo.key]: column };\n        }\n      })());\n      setComponents(newComponents);\n    }\n\n    // Select the cloned component\n    setSelectedComponent(cloned.id);\n  };\n\n  // Recursively update a component by id in the tree\n  const updateComponentDeep = (comps: EmailComponent[], id: string, updates: Partial<EmailComponent>, path: string = ''): EmailComponent[] => {\n    return comps.map((comp, idx) => {\n      const currentPath = path ? `${path} > ${comp.type}[${comp.id}]` : `${comp.type}[${comp.id}]`;\n      if (comp.id === id) {\n        log.debug('[updateComponentDeep] MATCH at', currentPath, 'Applying updates:', updates);\n        log.debug('[updateComponentDeep] comp BEFORE:', JSON.stringify(comp, null, 2));\n        // For columns, always create new arrays for columns if present in updates\n        if (comp.type === 'columns') {\n          const colComp = comp as any;\n          const newObj: any = { ...colComp };\n          for (let i = 1; i <= 4; i++) {\n            const colKey = `column${i}` as const;\n            const u: any = updates as any;\n            if (u[colKey]) {\n              // Always create a new array reference\n              newObj[colKey] = Array.isArray(u[colKey]) ? [...u[colKey]] : u[colKey];\n              log.debug('[updateComponentDeep]', colKey, 'updated to:', newObj[colKey]);\n            }\n          }\n          const result = { ...newObj, ...updates };\n          log.debug('[updateComponentDeep] comp AFTER:', JSON.stringify(result, null, 2));\n          return result;\n        }\n        return { ...comp, ...updates };\n      }\n      // Handle columns children\n      if (comp.type === 'columns') {\n        const colComp = comp as any;\n        const updated: any = { ...colComp };\n        for (let i = 1; i <= 4; i++) {\n          const colKey = `column${i}`;\n          if (colComp[colKey]) {\n            // Always create a new array reference for columns\n            updated[colKey] = updateComponentDeep([...colComp[colKey]], id, updates, `${currentPath} > ${colKey}`);\n          }\n        }\n        return updated;\n      }\n      // Handle generic children\n      if (Array.isArray(comp.children) && comp.children.length > 0) {\n        return { ...comp, children: updateComponentDeep([...comp.children], id, updates, `${currentPath} > children`)};\n      }\n      return comp;\n    });\n  };\n\n  const updateComponent = (id: string, updates: Partial<EmailComponent>) => {\n    log.debug('[updateComponent] Called with id:', id, 'updates:', updates);\n    const newComponents = updateComponentDeep(components, id, updates);\n    log.debug('[updateComponent] Setting new components:', JSON.stringify(newComponents, null, 2));\n    setComponents(newComponents);\n  };\n\n  const moveComponent = (dragIndex: number, hoverIndex: number) => {\n    const newComponents = [...components];\n    const [removed] = newComponents.splice(dragIndex, 1);\n    if (removed) {\n      newComponents.splice(hoverIndex, 0, removed);\n      setComponents(newComponents);\n    }\n  };\n\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      const prevState = history[newIndex];\n      if (prevState) {\n        setComponentsState(prevState);\n      }\n    }\n  };\n\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      const nextState = history[newIndex];\n      if (nextState) {\n        setComponentsState(nextState);\n      }\n    }\n  };\n\n  const addMergeTagsHandler = (tags: MergeTag[]) => {\n    setMergeTags((prev) => [...prev, ...tags]);\n  };\n\n  const setTemplate = (newTemplate: EmailTemplate) => {\n    setTemplateState(newTemplate);\n    setComponents(newTemplate.components || []);\n  };\n\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < history.length - 1;\n\n  return (\n    <EmailEditorContext.Provider\n      value={{\n        components,\n        setComponents,\n        addComponent,\n        removeComponent,\n        updateComponent,\n        cloneComponent,\n        moveComponent,\n        selectedComponent,\n        setSelectedComponent,\n        mergeTags,\n        addMergeTags: addMergeTagsHandler,\n        template,\n        setTemplate,\n        undo,\n        redo,\n        canUndo,\n        canRedo,\n        designSystem,\n        setDesignSystem,\n        savedBlocks,\n        addSavedBlock,\n        removeSavedBlock,\n        insertSavedBlock,\n        renameSavedBlock,\n      }}\n    >\n      {children}\n    </EmailEditorContext.Provider>\n  );\n};\n","import React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\n\ninterface DropMessage {\n  id: string;\n  text: string;\n  createdAt: number;\n}\n\ninterface DropFeedbackContextType {\n  messages: DropMessage[];\n  pushMessage: (text: string) => void;\n}\n\nconst DropFeedbackContext = createContext<DropFeedbackContextType | undefined>(undefined);\n\nexport const useDropFeedback = () => {\n  const ctx = useContext(DropFeedbackContext);\n  if (!ctx) throw new Error('useDropFeedback must be used within DropFeedbackProvider');\n  return ctx;\n};\n\nexport const DropFeedbackProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [messages, setMessages] = useState<DropMessage[]>([]);\n\n  const pushMessage = useCallback((text: string) => {\n    setMessages(prev => [\n      ...prev,\n      { id: `msg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`, text, createdAt: Date.now() }\n    ]);\n  }, []);\n\n  // Auto prune messages older than 4s\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setMessages(prev => prev.filter(m => Date.now() - m.createdAt < 4000));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <DropFeedbackContext.Provider value={{ messages, pushMessage }}>\n      {children}\n      <div\n        style={{\n          position: 'fixed',\n          top: '18px',\n          right: '18px',\n          zIndex: 9999,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '8px'\n        }}\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n      >\n        {messages.map(m => (\n          <div\n            key={m.id}\n            data-testid=\"drop-feedback-toast\"\n            style={{\n              background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n              color: '#ffffff',\n              padding: '14px 20px',\n              borderRadius: '12px',\n              boxShadow: '0 12px 32px rgba(59, 130, 246, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3)',\n              fontSize: '14px',\n              fontWeight: 600,\n              fontFamily: 'system-ui, -apple-system, Segoe UI, Roboto, sans-serif',\n              transition: 'all 200ms cubic-bezier(0.4, 0, 0.2, 1)',\n              transform: 'translateY(0)',\n              opacity: 1,\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              backdropFilter: 'blur(10px)',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n            }}\n          >\n            <span style={{ fontSize: '18px' }}></span>\n            {m.text}\n          </div>\n        ))}\n      </div>\n    </DropFeedbackContext.Provider>\n  );\n};\n","/**\n * Component Templates\n * Default templates for all email components\n */\n\nimport { ComponentType, EmailComponent } from '@kaptha/email-editor-core';\n\n/**\n * Default component templates with initial properties\n * Used by ComponentToolbar and CanvasDropZone\n */\nexport const componentTemplates: Record<ComponentType, Partial<EmailComponent>> = {\n  text: {\n    type: 'text',\n    props: {\n      text: 'Enter your text here',\n      fontSize: '16px',\n      color: '#000000',\n      align: 'left',\n    },\n  },\n  button: {\n    type: 'button',\n    props: {\n      text: 'Click me',\n      href: '#',\n      backgroundColor: '#007bff',\n      color: '#ffffff',\n      borderRadius: '4px',\n      padding: '10px 20px',\n      align: 'center',\n    },\n  },\n  image: {\n    type: 'image',\n    props: {\n      src: 'https://placehold.co/600x400',\n      alt: 'Image',\n      width: '100%',\n      align: 'center',\n    },\n  },\n  divider: {\n    type: 'divider',\n    props: {\n      borderColor: '#dddddd',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n    },\n  },\n  spacer: {\n    type: 'spacer',\n    props: {\n      height: '20px',\n    },\n  },\n  social: {\n    type: 'social',\n    props: {\n      mode: 'horizontal',\n      iconSize: '30px',\n      links: [\n        { name: 'Facebook', href: 'https://facebook.com' },\n        { name: 'Twitter', href: 'https://twitter.com' },\n        { name: 'Instagram', href: 'https://instagram.com' },\n      ],\n    },\n  },\n  video: {\n    type: 'video',\n    props: {\n      src: 'https://www.youtube.com/embed/dQw4w9WgXcQ',\n      poster: 'https://placehold.co/600x400/000/fff?text=Video+Thumbnail',\n      width: '100%',\n      height: '400px',\n      align: 'center',\n      controls: true,\n    },\n  },\n  timer: {\n    type: 'timer',\n    props: {\n      targetDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n      format: 'DD:HH:mm:ss',\n      expiredText: 'Offer expired',\n      align: 'center',\n      color: '#dc3545',\n      backgroundColor: 'transparent',\n      timezone: 'UTC',\n    },\n  },\n  html: {\n    type: 'html',\n    props: {\n      html: '<div style=\"font-size:18px;color:#007bff;font-weight:bold;\">Custom HTML Block</div>',\n      align: 'left',\n      padding: '10px',\n      backgroundColor: 'transparent',\n    },\n  },\n  columns: {\n    type: 'columns',\n    props: {\n      columnCount: 2,\n    },\n    children: [],\n  },\n  section: {\n    type: 'section',\n    props: {\n      backgroundColor: '#ffffff',\n      padding: '20px',\n    },\n    children: [],\n  },\n};\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n];\nconst Box = createLucideIcon(\"box\", __iconNode);\n\nexport { __iconNode, Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]];\nconst ChevronLeft = createLucideIcon(\"chevron-left\", __iconNode);\n\nexport { __iconNode, ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 18 6-6-6-6\", key: \"eg8j8\" }],\n  [\"path\", { d: \"m8 6-6 6 6 6\", key: \"ppft3o\" }]\n];\nconst Code = createLucideIcon(\"code\", __iconNode);\n\nexport { __iconNode, Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M9 3v18\", key: \"fh3hqa\" }],\n  [\"path\", { d: \"M15 3v18\", key: \"14nvp0\" }]\n];\nconst Columns3 = createLucideIcon(\"columns-3\", __iconNode);\n\nexport { __iconNode, Columns3 as default };\n//# sourceMappingURL=columns-3.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M7.5 3v18\", key: \"w0wo6v\" }],\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"path\", { d: \"M16.5 3v18\", key: \"10tjh1\" }]\n];\nconst Columns4 = createLucideIcon(\"columns-4\", __iconNode);\n\nexport { __iconNode, Columns4 as default };\n//# sourceMappingURL=columns-4.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n];\nconst Copy = createLucideIcon(\"copy\", __iconNode);\n\nexport { __iconNode, Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 15V3\", key: \"m9g1x1\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"path\", { d: \"m7 10 5 5 5-5\", key: \"brsn70\" }]\n];\nconst Download = createLucideIcon(\"download\", __iconNode);\n\nexport { __iconNode, Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Eye = createLucideIcon(\"eye\", __iconNode);\n\nexport { __iconNode, Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n];\nconst LayoutGrid = createLucideIcon(\"layout-grid\", __iconNode);\n\nexport { __iconNode, LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"7\", height: \"18\", x: \"3\", y: \"3\", rx: \"1\", key: \"2obqm\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }]\n];\nconst LayoutPanelLeft = createLucideIcon(\"layout-panel-left\", __iconNode);\n\nexport { __iconNode, LayoutPanelLeft as default };\n//# sourceMappingURL=layout-panel-left.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }]];\nconst Minus = createLucideIcon(\"minus\", __iconNode);\n\nexport { __iconNode, Minus as default };\n//# sourceMappingURL=minus.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"3\", rx: \"2\", key: \"48i651\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"21\", y2: \"21\", key: \"1svkeh\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"17\", y2: \"21\", key: \"vw1qmm\" }]\n];\nconst Monitor = createLucideIcon(\"monitor\", __iconNode);\n\nexport { __iconNode, Monitor as default };\n//# sourceMappingURL=monitor.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n];\nconst Moon = createLucideIcon(\"moon\", __iconNode);\n\nexport { __iconNode, Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M14 4.1 12 6\", key: \"ita8i4\" }],\n  [\"path\", { d: \"m5.1 8-2.9-.8\", key: \"1go3kf\" }],\n  [\"path\", { d: \"m6 12-1.9 2\", key: \"mnht97\" }],\n  [\"path\", { d: \"M7.2 2.2 8 5.1\", key: \"1cfko1\" }],\n  [\n    \"path\",\n    {\n      d: \"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z\",\n      key: \"s0h3yz\"\n    }\n  ]\n];\nconst MousePointerClick = createLucideIcon(\"mouse-pointer-click\", __iconNode);\n\nexport { __iconNode, MousePointerClick as default };\n//# sourceMappingURL=mouse-pointer-click.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 2v20\", key: \"t6zp3m\" }],\n  [\"path\", { d: \"m8 18 4 4 4-4\", key: \"bh5tu3\" }],\n  [\"path\", { d: \"m8 6 4-4 4 4\", key: \"ybng9g\" }]\n];\nconst MoveVertical = createLucideIcon(\"move-vertical\", __iconNode);\n\nexport { __iconNode, MoveVertical as default };\n//# sourceMappingURL=move-vertical.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z\",\n      key: \"e79jfc\"\n    }\n  ],\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", fill: \"currentColor\", key: \"1okk4w\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", fill: \"currentColor\", key: \"f64h9f\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", fill: \"currentColor\", key: \"qy21gx\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"fotxhn\" }]\n];\nconst Palette = createLucideIcon(\"palette\", __iconNode);\n\nexport { __iconNode, Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m15 14 5-5-5-5\", key: \"12vg1m\" }],\n  [\"path\", { d: \"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13\", key: \"6uklza\" }]\n];\nconst Redo2 = createLucideIcon(\"redo-2\", __iconNode);\n\nexport { __iconNode, Redo2 as default };\n//# sourceMappingURL=redo-2.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\"line\", { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n];\nconst Share2 = createLucideIcon(\"share-2\", __iconNode);\n\nexport { __iconNode, Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"14\", height: \"20\", x: \"5\", y: \"2\", rx: \"2\", ry: \"2\", key: \"1yt0o3\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }]\n];\nconst Smartphone = createLucideIcon(\"smartphone\", __iconNode);\n\nexport { __iconNode, Smartphone as default };\n//# sourceMappingURL=smartphone.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n];\nconst Sun = createLucideIcon(\"sun\", __iconNode);\n\nexport { __iconNode, Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"18\", y2: \"18\", key: \"1dp563\" }]\n];\nconst Tablet = createLucideIcon(\"tablet\", __iconNode);\n\nexport { __iconNode, Tablet as default };\n//# sourceMappingURL=tablet.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"10\", x2: \"14\", y1: \"2\", y2: \"2\", key: \"14vaq8\" }],\n  [\"line\", { x1: \"12\", x2: \"15\", y1: \"14\", y2: \"11\", key: \"17fdiu\" }],\n  [\"circle\", { cx: \"12\", cy: \"14\", r: \"8\", key: \"1e1u0o\" }]\n];\nconst Timer = createLucideIcon(\"timer\", __iconNode);\n\nexport { __iconNode, Timer as default };\n//# sourceMappingURL=timer.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n];\nconst Trash2 = createLucideIcon(\"trash-2\", __iconNode);\n\nexport { __iconNode, Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 4v16\", key: \"1654pz\" }],\n  [\"path\", { d: \"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2\", key: \"e0r10z\" }],\n  [\"path\", { d: \"M9 20h6\", key: \"s66wpe\" }]\n];\nconst Type = createLucideIcon(\"type\", __iconNode);\n\nexport { __iconNode, Type as default };\n//# sourceMappingURL=type.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\"path\", { d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11\", key: \"f3b9sd\" }]\n];\nconst Undo2 = createLucideIcon(\"undo-2\", __iconNode);\n\nexport { __iconNode, Undo2 as default };\n//# sourceMappingURL=undo-2.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5\",\n      key: \"ftymec\"\n    }\n  ],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"14\", height: \"12\", rx: \"2\", key: \"158x01\" }]\n];\nconst Video = createLucideIcon(\"video\", __iconNode);\n\nexport { __iconNode, Video as default };\n//# sourceMappingURL=video.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","import React, { useState } from 'react';\nimport { useDrag } from 'react-dnd';\nimport { ComponentType } from '@kaptha/email-editor-core';\nimport { componentTemplates } from './constants/componentTemplates';\nimport { useEmailEditor } from './EmailEditorContext';\nimport {\n  Type,\n  MousePointerClick,\n  Image as ImageIcon,\n  Video,\n  Timer,\n  Code,\n  Minus,\n  MoveVertical,\n  Share2,\n  FileText,\n  LayoutGrid,\n  Columns3,\n  Columns4,\n  LayoutPanelLeft,\n  Box,\n  Palette,\n  ChevronLeft,\n  ChevronRight,\n  ChevronDown\n} from 'lucide-react';\n\nexport const ItemTypes = {\n  COMPONENT: 'component',\n  NEW_COMPONENT: 'new_component',\n} as const;\n\n// Re-export componentTemplates for backward compatibility\nexport { componentTemplates };\n\ninterface SectionTemplate {\n  name: string;\n  icon: React.ReactNode;\n  config: {\n    columnCount: number;\n    width1?: number;\n    width2?: number;\n    width3?: number;\n    width4?: number;\n  };\n}\n\nconst sectionTemplates: SectionTemplate[] = [\n  // Priority templates\n  { name: '2 Cols (30/70)', icon: <LayoutPanelLeft size={18} />, config: { columnCount: 2, width1: 30, width2: 70 } },\n  { name: '2 Cols (70/30)', icon: <LayoutPanelLeft size={18} style={{ transform: 'scaleX(-1)' }} />, config: { columnCount: 2, width1: 70, width2: 30 } },\n  { name: '3 Cols (20/40/40)', icon: <Columns3 size={18} />, config: { columnCount: 3, width1: 20, width2: 40, width3: 40 } },\n  { name: '3 Cols (40/20/40)', icon: <Columns3 size={18} />, config: { columnCount: 3, width1: 40, width2: 20, width3: 40 } },\n\n  // Standard templates\n  { name: 'Blank', icon: <FileText size={18} />, config: { columnCount: 1, width1: 100 } },\n  { name: '2 Cols (50/50)', icon: <LayoutGrid size={18} />, config: { columnCount: 2, width1: 50, width2: 50 } },\n  { name: '3 Cols (33/33/33)', icon: <Columns3 size={18} />, config: { columnCount: 3, width1: 33, width2: 33, width3: 34 } },\n  { name: '4 Cols (254)', icon: <Columns4 size={18} />, config: { columnCount: 4, width1: 25, width2: 25, width3: 25, width4: 25 } },\n  { name: '2 Cols (33/67)', icon: <LayoutPanelLeft size={18} />, config: { columnCount: 2, width1: 33, width2: 67 } },\n  { name: '2 Cols (67/33)', icon: <LayoutPanelLeft size={18} style={{ transform: 'scaleX(-1)' }} />, config: { columnCount: 2, width1: 67, width2: 33 } },\n\n  // Additional templates\n  { name: '3 Cols (20/20/60)', icon: <Columns3 size={18} />, config: { columnCount: 3, width1: 20, width2: 20, width3: 60 } },\n  { name: '3 Cols (60/20/20)', icon: <Columns3 size={18} />, config: { columnCount: 3, width1: 60, width2: 20, width3: 20 } },\n  { name: '4 Cols (20/30/30/20)', icon: <Columns4 size={18} />, config: { columnCount: 4, width1: 20, width2: 30, width3: 30, width4: 20 } },\n  { name: '4 Cols (10/40/40/10)', icon: <Columns4 size={18} />, config: { columnCount: 4, width1: 10, width2: 40, width3: 40, width4: 10 } },\n];\n\ninterface ToolbarButtonProps {\n  componentType: ComponentType;\n  icon: React.ReactNode;\n  label: string;\n  onClick: () => void;\n}\n\nconst ToolbarButton: React.FC<ToolbarButtonProps> = ({ componentType, icon, label, onClick }) => {\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: ItemTypes.NEW_COMPONENT,\n    item: { componentType },\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n  }));\n\n  return (\n    <button\n      ref={drag as any}\n      data-testid={`toolbar-button-${componentType}`}\n      onClick={onClick}\n      className=\"eb-toolbar-button\"\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        cursor: isDragging ? 'grabbing' : 'pointer',\n        width: '100px',\n        height: '100px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        gap: '6px',\n        padding: 0,\n        border: '1px solid var(--eb-border)',\n        background: 'var(--eb-surface)',\n        borderRadius: '6px'\n      }}\n    >\n      <span className=\"eb-toolbar-icon\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>{icon}</span>\n      <span className=\"eb-toolbar-label\" style={{ fontSize: '12px', fontWeight: 600, color: 'var(--eb-text)', textAlign: 'center', lineHeight: 1, flex: '0 0 auto' }}>{label}</span>\n    </button>\n  );\n};\n\ninterface SectionButtonProps {\n  template: SectionTemplate;\n  onClick: () => void;\n}\n\nconst SectionButton: React.FC<SectionButtonProps> = ({ template, onClick }) => {\n  const [isHover, setIsHover] = useState(false);\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: ItemTypes.NEW_COMPONENT,\n    item: {\n      componentType: 'columns' as ComponentType,\n      sectionConfig: template.config\n    },\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n  }));\n\n  return (\n    <button\n      ref={drag as any}\n      data-testid={`toolbar-section-${template.name.toLowerCase().replace(/\\s+/g, '-')}`}\n      onClick={onClick}\n      className=\"eb-toolbar-button\"\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        cursor: isDragging ? 'grabbing' : 'pointer',\n        width: '100%',\n        padding: '10px',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px'\n      }}\n      onMouseEnter={() => setIsHover(true)}\n      onMouseLeave={() => setIsHover(false)}\n    >\n      <div\n        style={{\n          width: '100%',\n          height: '48px',\n          display: 'flex',\n          gap: '6px',\n          alignItems: 'stretch'\n        }}\n      >\n        {Array.from({ length: template.config.columnCount }).map((_, idx) => {\n          const widthKey = `width${idx + 1}` as 'width1' | 'width2' | 'width3' | 'width4';\n          const pct = (template.config as any)[widthKey] ?? Math.floor(100 / template.config.columnCount);\n          return (\n            <div\n              key={idx}\n              style={{\n                flex: `0 0 ${pct}%`,\n                background: isHover ? 'var(--eb-surface-hover)' : 'var(--eb-accent-light)',\n                border: '1px solid var(--eb-border)',\n                boxShadow: isHover ? 'var(--eb-shadow-sm)' : 'none',\n                borderRadius: '4px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                color: 'var(--eb-text)',\n                fontSize: '12px',\n                fontWeight: 600\n              }}\n            >\n              {pct}%\n            </div>\n          );\n        })}\n      </div>\n    </button>\n  );\n};\n\ninterface ComponentToolbarWrapperProps {\n  onContentVisibilityChange?: (visible: boolean) => void;\n}\n\nexport const ComponentToolbar: React.FC<ComponentToolbarWrapperProps> = ({ onContentVisibilityChange }) => {\n  const [activeTab, setActiveTab] = useState<'elements' | 'sections' | 'design'>('elements');\n  const [isContentVisible, setIsContentVisible] = useState(true);\n  const [expandedSections, setExpandedSections] = useState<{\n    general: boolean;\n    colors: boolean;\n    typography: boolean;\n    links: boolean;\n  }>({ general: true, colors: false, typography: false, links: false });\n  const [sectionGroupsExpanded, setSectionGroupsExpanded] = useState<{\n    popular: boolean;\n    standard: boolean;\n    more: boolean;\n  }>({ popular: true, standard: false, more: false });\n  const { designSystem, setDesignSystem } = useEmailEditor();\n\n  const handleToggleContent = () => {\n    const newValue = !isContentVisible;\n    setIsContentVisible(newValue);\n    if (onContentVisibilityChange) {\n      onContentVisibilityChange(newValue);\n    }\n  };\n\n  const toggleSection = (section: 'general' | 'colors' | 'typography' | 'links') => {\n    setExpandedSections(prev => {\n      const isCurrentlyExpanded = prev[section];\n      // If closing the current section, just toggle it\n      if (isCurrentlyExpanded) {\n        return { ...prev, [section]: false };\n      }\n      // If opening a section, close all others and open this one\n      return {\n        general: section === 'general',\n        colors: section === 'colors',\n        typography: section === 'typography',\n        links: section === 'links'\n      };\n    });\n  };\n\n  const addComponent = (type: ComponentType) => {\n    const event = new CustomEvent('addComponent', { detail: { type } });\n    window.dispatchEvent(event);\n  };\n\n  const addSection = (config: SectionTemplate['config']) => {\n    const event = new CustomEvent('addComponent', {\n      detail: {\n        type: 'columns',\n        sectionConfig: config\n      }\n    });\n    window.dispatchEvent(event);\n  };\n\n  return (\n    <aside className=\"eb-toolbar\">\n      <div className=\"eb-toolbar-container\">\n        <div style={{ position: 'relative', display: 'flex', flexDirection: 'column', minWidth: '84px', maxWidth: '84px', background: 'var(--eb-surface)', borderRight: '1px solid var(--eb-border)', height: '100%' }}>\n          <div className=\"eb-toolbar-tabs-vertical\">\n            <button\n              className={`eb-toolbar-tab-icon ${activeTab === 'elements' ? 'active' : ''}`}\n              onClick={() => setActiveTab('elements')}\n              title=\"Elements\"\n            >\n              <Box size={20} />\n              <span className=\"eb-toolbar-tab-label\">Elements</span>\n            </button>\n            <button\n              className={`eb-toolbar-tab-icon ${activeTab === 'sections' ? 'active' : ''}`}\n              onClick={() => setActiveTab('sections')}\n              title=\"Sections\"\n            >\n              <LayoutGrid size={20} />\n              <span className=\"eb-toolbar-tab-label\">Sections</span>\n            </button>\n            <button\n              className={`eb-toolbar-tab-icon ${activeTab === 'design' ? 'active' : ''}`}\n              onClick={() => setActiveTab('design')}\n              title=\"Design\"\n            >\n              <Palette size={20} />\n              <span className=\"eb-toolbar-tab-label\">Design</span>\n            </button>\n          </div>\n          <button\n            className=\"eb-toolbar-tab-icon\"\n            onClick={handleToggleContent}\n            title={isContentVisible ? \"Hide panel\" : \"Show panel\"}\n            style={{\n              position: 'absolute',\n              bottom: '8px',\n              left: '8px',\n              right: '8px',\n              margin: 0\n            }}\n          >\n            {isContentVisible ? <ChevronLeft size={20} /> : <ChevronRight size={20} />}\n            <span className=\"eb-toolbar-tab-label\">{isContentVisible ? 'Hide' : 'Show'}</span>\n          </button>\n        </div>\n\n        {isContentVisible && (\n          <div className=\"eb-toolbar-content-area\">\n            {activeTab === 'elements' && (\n              <div className=\"eb-toolbar-content\">\n                <h3>Elements</h3>\n                <div\n                  style={{\n                    display: 'grid',\n                    gridTemplateColumns: 'repeat(3, 1fr)',\n                    gap: '12px',\n                    justifyItems: 'center',\n                    alignItems: 'center'\n                  }}\n                >\n                  <ToolbarButton componentType=\"text\" icon={<Type size={18} />} label=\"Text\" onClick={() => addComponent('text')} />\n                  <ToolbarButton componentType=\"button\" icon={<MousePointerClick size={18} />} label=\"Button\" onClick={() => addComponent('button')} />\n                  <ToolbarButton componentType=\"image\" icon={<ImageIcon size={18} />} label=\"Image\" onClick={() => addComponent('image')} />\n                  <ToolbarButton componentType=\"video\" icon={<Video size={18} />} label=\"Video\" onClick={() => addComponent('video')} />\n                  <ToolbarButton componentType=\"timer\" icon={<Timer size={18} />} label=\"Timer\" onClick={() => addComponent('timer')} />\n                  <ToolbarButton componentType=\"html\" icon={<Code size={18} />} label=\"HTML\" onClick={() => addComponent('html')} />\n                  <ToolbarButton componentType=\"divider\" icon={<Minus size={18} />} label=\"Divider\" onClick={() => addComponent('divider')} />\n                  <ToolbarButton componentType=\"spacer\" icon={<MoveVertical size={18} />} label=\"Spacer\" onClick={() => addComponent('spacer')} />\n                  <ToolbarButton componentType=\"social\" icon={<Share2 size={18} />} label=\"Social\" onClick={() => addComponent('social')} />\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'sections' && (\n              <div className=\"eb-toolbar-content\">\n                <h3>Sections</h3>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\n                  {/* Popular group */}\n                  <div>\n                    <h4\n                      onClick={() => setSectionGroupsExpanded(s => {\n                        const next = !s.popular;\n                        return next\n                          ? { popular: true, standard: false, more: false }\n                          : { popular: false, standard: false, more: false };\n                      })}\n                      style={{ fontSize: '13px', fontWeight: 600, color: 'var(--eb-text)', marginBottom: sectionGroupsExpanded.popular ? '8px' : '0', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px', userSelect: 'none' }}\n                    >\n                      <ChevronDown size={16} style={{ transform: sectionGroupsExpanded.popular ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      Popular\n                    </h4>\n                    {sectionGroupsExpanded.popular && (\n                      <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '12px' }}>\n                        {sectionTemplates.filter(t => ['2 Cols (30/70)','2 Cols (70/30)','3 Cols (20/40/40)','3 Cols (40/20/40)'].includes(t.name)).map((template) => (\n                          <SectionButton\n                            key={`popular-${template.name}`}\n                            template={template}\n                            onClick={() => addSection(template.config)}\n                          />\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Standard group */}\n                  <div>\n                    <h4\n                      onClick={() => setSectionGroupsExpanded(s => {\n                        const next = !s.standard;\n                        return next\n                          ? { popular: false, standard: true, more: false }\n                          : { popular: false, standard: false, more: false };\n                      })}\n                      style={{ fontSize: '13px', fontWeight: 600, color: 'var(--eb-text)', marginBottom: sectionGroupsExpanded.standard ? '8px' : '0', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px', userSelect: 'none' }}\n                    >\n                      <ChevronDown size={16} style={{ transform: sectionGroupsExpanded.standard ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      Standard\n                    </h4>\n                    {sectionGroupsExpanded.standard && (\n                      <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '12px' }}>\n                        {sectionTemplates.filter(t => ['Blank','2 Cols (50/50)','3 Cols (33/33/33)','4 Cols (254)','2 Cols (33/67)','2 Cols (67/33)'].includes(t.name)).map((template) => (\n                          <SectionButton\n                            key={`standard-${template.name}`}\n                            template={template}\n                            onClick={() => addSection(template.config)}\n                          />\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* More group */}\n                  <div>\n                    <h4\n                      onClick={() => setSectionGroupsExpanded(s => {\n                        const next = !s.more;\n                        return next\n                          ? { popular: false, standard: false, more: true }\n                          : { popular: false, standard: false, more: false };\n                      })}\n                      style={{ fontSize: '13px', fontWeight: 600, color: 'var(--eb-text)', marginBottom: sectionGroupsExpanded.more ? '8px' : '0', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px', userSelect: 'none' }}\n                    >\n                      <ChevronDown size={16} style={{ transform: sectionGroupsExpanded.more ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      More\n                    </h4>\n                    {sectionGroupsExpanded.more && (\n                      <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '12px' }}>\n                        {sectionTemplates.filter(t => ['3 Cols (20/20/60)','3 Cols (60/20/20)','4 Cols (20/30/30/20)','4 Cols (10/40/40/10)'].includes(t.name)).map((template) => (\n                          <SectionButton\n                            key={`more-${template.name}`}\n                            template={template}\n                            onClick={() => addSection(template.config)}\n                          />\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'design' && (\n              <div className=\"eb-toolbar-content\">\n                <h3>Design System</h3>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\n                  \n                  {/* General Settings Section */}\n                  <div style={{ borderBottom: '1px solid var(--eb-border)', paddingBottom: '12px' }}>\n                    <h4 \n                      onClick={() => toggleSection('general')}\n                      style={{ \n                        fontSize: '13px', \n                        fontWeight: 600, \n                        marginBottom: expandedSections.general ? '12px' : '0', \n                        color: 'var(--eb-text)', \n                        cursor: 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        userSelect: 'none'\n                      }}\n                    >\n                      <ChevronDown size={16} style={{ transform: expandedSections.general ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      General Settings\n                    </h4>\n                    \n                    {expandedSections.general && (\n                      <>\n                    {/* Background Color */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Background Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={designSystem.colors.background}\n                        onChange={(e) => setDesignSystem({ ...designSystem, colors: { ...designSystem.colors, background: e.target.value } })}\n                        style={{ width: '100%', height: '40px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer' }}\n                      />\n                    </div>\n                    \n                    {/* Content Width */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Content Width: {designSystem.containerWidth}\n                      </label>\n                      <input\n                        type=\"range\"\n                        min=\"400\"\n                        max=\"800\"\n                        step=\"50\"\n                        value={parseInt(designSystem.containerWidth)}\n                        onChange={(e) => setDesignSystem({ ...designSystem, containerWidth: `${e.target.value}px` })}\n                        style={{ width: '100%' }}\n                      />\n                    </div>\n                    \n                    {/* Content Alignment */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Content Alignment\n                      </label>\n                      <select\n                        value={designSystem.contentAlignment}\n                        onChange={(e) => setDesignSystem({ ...designSystem, contentAlignment: e.target.value as 'left' | 'center' | 'right' })}\n                        style={{ width: '100%', padding: '10px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', background: 'var(--eb-surface)', color: 'var(--eb-text)', fontSize: '13px' }}\n                      >\n                        <option value=\"left\">Left</option>\n                        <option value=\"center\">Center</option>\n                        <option value=\"right\">Right</option>\n                      </select>\n                    </div>\n                    \n                    {/* Font Family */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Font Family\n                      </label>\n                      <select\n                        value={designSystem.typography.fontFamily}\n                        onChange={(e) => setDesignSystem({ ...designSystem, typography: { ...designSystem.typography, fontFamily: e.target.value } })}\n                        style={{ width: '100%', padding: '10px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', background: 'var(--eb-surface)', color: 'var(--eb-text)', fontSize: '13px' }}\n                      >\n                        <option value=\"Arial, sans-serif\">Arial</option>\n                        <option value=\"Helvetica, sans-serif\">Helvetica</option>\n                        <option value=\"Georgia, serif\">Georgia</option>\n                        <option value=\"'Times New Roman', serif\">Times New Roman</option>\n                        <option value=\"'Courier New', monospace\">Courier New</option>\n                        <option value=\"Verdana, sans-serif\">Verdana</option>\n                      </select>\n                    </div>\n                    \n                    {/* Font Weight */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Font Weight\n                      </label>\n                      <select\n                        value={designSystem.typography.fontWeight.normal}\n                        onChange={(e) => setDesignSystem({ ...designSystem, typography: { ...designSystem.typography, fontWeight: { ...designSystem.typography.fontWeight, normal: e.target.value } } })}\n                        style={{ width: '100%', padding: '10px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', background: 'var(--eb-surface)', color: 'var(--eb-text)', fontSize: '13px' }}\n                      >\n                        <option value=\"300\">Light (300)</option>\n                        <option value=\"400\">Normal (400)</option>\n                        <option value=\"500\">Medium (500)</option>\n                        <option value=\"600\">Semibold (600)</option>\n                        <option value=\"700\">Bold (700)</option>\n                      </select>\n                    </div>\n                      </>\n                    )}\n                  </div>\n                  \n                  {/* Colors Section */}\n                  <div style={{ borderBottom: '1px solid var(--eb-border)', paddingBottom: '12px' }}>\n                    <h4 \n                      onClick={() => toggleSection('colors')}\n                      style={{ \n                        fontSize: '13px', \n                        fontWeight: 600, \n                        marginBottom: expandedSections.colors ? '12px' : '0', \n                        color: 'var(--eb-text)', \n                        cursor: 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        userSelect: 'none'\n                      }}\n                    >\n                      <ChevronDown size={16} style={{ transform: expandedSections.colors ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      Colors\n                    </h4>\n                    \n                    {expandedSections.colors && (\n                      <>\n                    {/* Primary Color */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Primary Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={designSystem.colors.primary}\n                        onChange={(e) => setDesignSystem({ ...designSystem, colors: { ...designSystem.colors, primary: e.target.value } })}\n                        style={{ width: '100%', height: '40px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer' }}\n                      />\n                    </div>\n                    \n                    {/* Text Color */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Text Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={designSystem.colors.text}\n                        onChange={(e) => setDesignSystem({ ...designSystem, colors: { ...designSystem.colors, text: e.target.value } })}\n                        style={{ width: '100%', height: '40px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer' }}\n                      />\n                    </div>\n                      </>\n                    )}\n                  </div>\n                  \n                  {/* Typography Section */}\n                  <div style={{ borderBottom: '1px solid var(--eb-border)', paddingBottom: '12px' }}>\n                    <h4 \n                      onClick={() => toggleSection('typography')}\n                      style={{ \n                        fontSize: '13px', \n                        fontWeight: 600, \n                        marginBottom: expandedSections.typography ? '12px' : '0', \n                        color: 'var(--eb-text)', \n                        cursor: 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        userSelect: 'none'\n                      }}\n                    >\n                      <ChevronDown size={16} style={{ transform: expandedSections.typography ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      Typography\n                    </h4>\n                    \n                    {expandedSections.typography && (\n                      <>\n                    {/* Base Font Size */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Base Font Size: {designSystem.typography.fontSize.md}\n                      </label>\n                      <input\n                        type=\"range\"\n                        min=\"12\"\n                        max=\"20\"\n                        value={parseInt(designSystem.typography.fontSize.md)}\n                        onChange={(e) => setDesignSystem({ ...designSystem, typography: { ...designSystem.typography, fontSize: { ...designSystem.typography.fontSize, md: `${e.target.value}px` } } })}\n                        style={{ width: '100%' }}\n                      />\n                    </div>\n                      </>\n                    )}\n                  </div>\n                  \n                  {/* Links Section */}\n                  <div style={{ paddingBottom: '12px' }}>\n                    <h4 \n                      onClick={() => toggleSection('links')}\n                      style={{ \n                        fontSize: '13px', \n                        fontWeight: 600, \n                        marginBottom: expandedSections.links ? '12px' : '0', \n                        color: 'var(--eb-text)', \n                        cursor: 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        userSelect: 'none'\n                      }}\n                    >\n                      <ChevronDown size={16} style={{ transform: expandedSections.links ? 'rotate(0deg)' : 'rotate(-90deg)', transition: 'transform 0.2s' }} />\n                      Links\n                    </h4>\n                    \n                    {expandedSections.links && (\n                      <>\n                    {/* Link Color */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'block', fontSize: '12px', fontWeight: 600, marginBottom: '6px', color: 'var(--eb-text)' }}>\n                        Link Color\n                      </label>\n                      <input\n                        type=\"color\"\n                        value={designSystem.links.color}\n                        onChange={(e) => setDesignSystem({ ...designSystem, links: { ...designSystem.links, color: e.target.value } })}\n                        style={{ width: '100%', height: '40px', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer' }}\n                      />\n                    </div>\n                    \n                    {/* Link Underline */}\n                    <div style={{ marginBottom: '12px' }}>\n                      <label style={{ display: 'flex', alignItems: 'center', fontSize: '12px', fontWeight: 600, color: 'var(--eb-text)', cursor: 'pointer' }}>\n                        <input\n                          type=\"checkbox\"\n                          checked={designSystem.links.underline}\n                          onChange={(e) => setDesignSystem({ ...designSystem, links: { ...designSystem.links, underline: e.target.checked } })}\n                          style={{ marginRight: '8px', cursor: 'pointer' }}\n                        />\n                        Underline Links\n                      </label>\n                    </div>\n                      </>\n                    )}\n                  </div>\n                  \n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n};","/**\n * Draggable Component\n */\n\nimport React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { EmailComponent } from '@kaptha/email-editor-core';\nimport { useEmailEditor } from './EmailEditorContext';\nimport { ItemTypes } from './ComponentToolbar';\n\ninterface DraggableComponentProps {\n  component: EmailComponent;\n  index: number;\n  children: React.ReactNode;\n}\n\nexport const DraggableComponent: React.FC<DraggableComponentProps> = ({\n  component,\n  index,\n  children,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const { moveComponent, selectedComponent, setSelectedComponent } = useEmailEditor();\n\n  const [{ isDragging }, drag] = useDrag({\n    type: ItemTypes.COMPONENT,\n    item: { index, id: component.id },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: [ItemTypes.COMPONENT, ItemTypes.NEW_COMPONENT],\n    hover: (item: { index: number; id: string }) => {\n      // Only handle hover for COMPONENT type (reordering existing components)\n      if (!ref.current || !item.index) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      moveComponent(dragIndex, hoverIndex);\n      item.index = hoverIndex;\n    },\n    drop: () => {\n      // Don't handle drop - let it bubble to nested drop zones\n      return undefined;\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver({shallow: true}),\n    }),\n  });\n\n  drag(drop(ref));\n\n  const isSelected = selectedComponent === component.id;\n\n  return (\n    <div\n      ref={ref}\n      className={isSelected ? 'eb-component-card selected' : 'eb-component-card'}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedComponent(component.id);\n      }}\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        cursor: 'move',\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n","import React, { ReactNode } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { ItemTypes } from './ComponentToolbar';\nimport { EmailComponent, log } from '@kaptha/email-editor-core';\n\ninterface ColumnDropZoneProps {\n  columnIndex: number;\n  parentId: string;\n  children?: ReactNode;\n  onDropComponent: (item: any, columnIndex: number) => void;\n}\n\nexport const ColumnDropZone: React.FC<ColumnDropZoneProps> = ({\n  columnIndex,\n  parentId,\n  children,\n  onDropComponent,\n}) => {\n  const [{ isOver, canDrop }, drop] = useDrop({\n    accept: [ItemTypes.NEW_COMPONENT, ItemTypes.COMPONENT],\n    drop: (item: any, monitor) => {\n      log.debug('[ColumnDropZone] Drop triggered!', {\n        item,\n        columnIndex,\n        parentId,\n        didDrop: monitor.didDrop(),\n        itemType: monitor.getItemType()\n      });\n      \n      if (monitor.didDrop()) {\n        log.debug('[ColumnDropZone] Already handled by nested target, ignoring');\n        return; // Already handled by a nested drop target\n      }\n      \n      log.debug('[ColumnDropZone] Calling onDropComponent');\n      onDropComponent(item, columnIndex);\n      \n      // Return a truthy value to indicate drop was handled and prevent bubbling\n      return { dropped: true };\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  const isActive = isOver && canDrop;\n\n  return (\n    <div\n      ref={drop as any}\n      className={isOver ? 'eb-column-dropzone active' : 'eb-column-dropzone'}\n      style={{\n        minHeight: '100px',\n        position: 'relative',\n      }}\n    >\n      {children || (\n        <div\n          style={{\n            textAlign: 'center',\n            color: '#6c757d',\n            padding: '20px',\n            fontSize: '14px',\n          }}\n        >\n          {isActive ? 'Drop here' : 'Drop components here'}\n        </div>\n      )}\n    </div>\n  );\n};\n","import React from 'react';\nimport { EmailComponent, ColumnsComponent, ComponentType, log } from '@kaptha/email-editor-core';\nimport { useEmailEditor, generateComponentId } from './EmailEditorContext';\nimport { ColumnDropZone } from './ColumnDropZone';\nimport { DraggableComponent } from './DraggableComponent';\nimport { ComponentRenderer } from './ComponentRenderer';\nimport { componentTemplates } from './ComponentToolbar';\nimport { useDropFeedback } from './DropFeedback';\n\ninterface ColumnsRendererProps {\n  component: ColumnsComponent;\n}\n\nexport const ColumnsRenderer: React.FC<ColumnsRendererProps> = ({ component: initialComponent }) => {\n  const { components, updateComponent, moveComponent } = useEmailEditor();\n  let pushMessage: (text: string) => void = () => {};\n  try {\n    // Provider may not exist in some embedding contexts\n    pushMessage = useDropFeedback().pushMessage;\n  } catch {}\n\n  // Find the latest version of this component from context\n  const findComponentById = React.useCallback((comps: EmailComponent[], id: string): EmailComponent | null => {\n    for (const comp of comps) {\n      if (comp.id === id) {\n        log.debug('[findComponentById] FOUND component:', comp.id, 'type:', comp.type, 'data:', comp);\n        return comp;\n      }\n      if (comp.type === 'columns') {\n        const colComp = comp as any;\n        for (let i = 1; i <= 4; i++) {\n          const colKey = `column${i}`;\n          if (colComp[colKey]) {\n            const found = findComponentById(colComp[colKey], id);\n            if (found) return found;\n          }\n        }\n      }\n      if (Array.isArray(comp.children)) {\n        const found = findComponentById(comp.children, id);\n        if (found) return found;\n      }\n    }\n    log.debug('[findComponentById] NOT FOUND in', comps.length, 'components');\n    return null;\n  }, []);\n\n  // Always use the latest component from context\n  const component = React.useMemo(() => {\n    log.debug('[ColumnsRenderer] Looking for component:', initialComponent.id, 'in', components.length, 'top-level components');\n    return (findComponentById(components, initialComponent.id) as ColumnsComponent) || initialComponent;\n  }, [components, initialComponent.id, findComponentById]);\n\n  log.debug('[ColumnsRenderer] Rendering with component:', component.id, 'column1:', component.column1, 'column2:', component.column2);\n\n  // Calculate column widths\n  const getColumnWidths = () => {\n    const { columnCount, width1 = 0, width2 = 0, width3 = 0, width4 = 0 } = component.props;\n    const widths = [width1, width2, width3, width4].slice(0, columnCount);\n    \n    // If all widths are 0, use auto-equal distribution\n    const totalWidth = widths.reduce((sum, w) => sum + w, 0);\n    if (totalWidth === 0) {\n      return Array(columnCount).fill(`${100 / columnCount}%`);\n    }\n    \n    return widths.map(w => `${w}%`);\n  };\n\n  const handleDropInColumn = (item: any, columnIndex: number) => {\n    const columnKey = `column${columnIndex + 1}` as keyof ColumnsComponent;\n    const columnComponents = (component[columnKey] as EmailComponent[]) || [];\n\n    log.debug('[ColumnsRenderer.handleDropInColumn] START', {\n      item,\n      columnIndex,\n      columnKey,\n      currentColumnLength: columnComponents.length,\n      componentId: component.id\n    });\n\n    // Check if it's an existing component being moved (has an id property)\n    if (item.id && !item.componentType) {\n      log.debug('[ColumnsRenderer] Detected existing component move (has id, no componentType)');\n      // Moving existing component\n      // Remove from source and add to target column\n      // This would need more complex logic to handle cross-column moves\n      log.debug('Moving existing component to column', columnIndex, 'item:', item);\n      // TODO: Implement moving existing components between columns\n      return;\n    }\n    \n    // Adding new component from toolbar - use template with default props\n    if (!item.componentType) {\n      log.error('[ColumnsRenderer] ERROR: Invalid drop item - no componentType:', item);\n      return;\n    }\n    \n    log.debug('[ColumnsRenderer] Looking for template:', item.componentType);\n    const template = componentTemplates[item.componentType as ComponentType];\n    if (!template) {\n      log.error('[ColumnsRenderer] ERROR: No template found for:', item.componentType);\n      return;\n    }\n    \n    log.debug('[ColumnsRenderer] Template found:', template);\n    \n    const defaultProps = template?.props ? { ...template.props } : {};\n    const newComponent: EmailComponent = {\n      ...template,\n      id: generateComponentId(),\n      type: item.componentType,\n      props: defaultProps,\n    } as EmailComponent;\n\n    const updatedColumn = [...columnComponents, newComponent];\n    log.debug('[ColumnsRenderer] Created new component:', newComponent);\n    log.debug('[ColumnsRenderer] Updated column will have', updatedColumn.length, 'components');\n    log.debug('[ColumnsRenderer] Calling updateComponent with:', {\n      id: component.id,\n      updates: { [columnKey]: updatedColumn }\n    });\n    \n    updateComponent(component.id, {\n      [columnKey]: updatedColumn,\n    });\n\n    // Feedback toast\n    pushMessage(`Added ${item.componentType} to column ${columnIndex + 1}`);\n    log.debug('[ColumnsRenderer.handleDropInColumn] COMPLETE');\n  };\n\n  const renderColumn = (columnIndex: number) => {\n    const columnKey = `column${columnIndex + 1}` as keyof ColumnsComponent;\n    const settingsKey = `columnSettings${columnIndex + 1}` as keyof typeof component.props;\n    const columnComponents = (component[columnKey] as EmailComponent[]) || [];\n    const columnSettings = (component.props[settingsKey] as any) || {};\n\n    log.debug('[renderColumn]', columnKey, 'components:', columnComponents);\n\n    return (\n      <div\n        key={columnIndex}\n        className=\"eb-column\"\n        style={{\n          backgroundColor: columnSettings.backgroundColor || 'transparent',\n          textAlign: columnSettings.align || 'left',\n        }}\n      >\n        <ColumnDropZone\n          columnIndex={columnIndex}\n          parentId={component.id}\n          onDropComponent={handleDropInColumn}\n        >\n          {columnComponents.length > 0 && columnComponents.map((child, index) => (\n            <DraggableComponent key={child.id} component={child} index={index}>\n              <ComponentRenderer component={child} />\n            </DraggableComponent>\n          ))}\n        </ColumnDropZone>\n      </div>\n    );\n  };\n\n  const columnWidths = getColumnWidths();\n  const { columnCount } = component.props;\n\n  return (\n    <div\n      className=\"eb-columns\"\n      style={{\n        display: 'grid',\n        gridTemplateColumns: columnWidths.join(' '),\n        gap: '10px',\n      }}\n    >\n      {Array.from({ length: columnCount }).map((_, index) => renderColumn(index))}\n    </div>\n  );\n};\n","import React from 'react';\nimport { EmailComponent, sanitizeHtml } from '@kaptha/email-editor-core';\nimport { ColumnsRenderer } from './ColumnsRenderer';\nimport { useEmailEditor } from './EmailEditorContext';\n\ninterface ComponentRendererProps {\n  component: EmailComponent;\n}\n\nexport const ComponentRenderer: React.FC<ComponentRendererProps> = ({ component }) => {\n  const { designSystem } = useEmailEditor();\n  \n  const renderComponent = () => {\n    switch (component.type) {\n      case 'text':\n        return (\n          <div\n            style={{\n              fontSize: component.props.fontSize || designSystem.typography.fontSize.md,\n              fontWeight: component.props.fontWeight || designSystem.typography.fontWeight.normal,\n              color: component.props.color || designSystem.colors.text,\n              fontFamily: component.props.fontFamily || designSystem.typography.fontFamily,\n              textAlign: component.props.align || designSystem.contentAlignment,\n              padding: component.props.padding || '10px',\n            }}\n          >\n            <style>\n              {`\n                a {\n                  color: ${designSystem.links.color} !important;\n                  text-decoration: ${designSystem.links.underline ? 'underline' : 'none'} !important;\n                }\n              `}\n            </style>\n            {component.props.text || 'Text content'}\n          </div>\n        );\n\n      case 'button':\n        return (\n          <div style={{ textAlign: component.props.align || 'center', padding: '10px' }}>\n            <a\n              href={component.props.href || '#'}\n              style={{\n                display: 'inline-block',\n                backgroundColor: component.props.backgroundColor || designSystem.colors.primary,\n                color: component.props.color || '#fff',\n                padding: component.props.padding || '10px 20px',\n                borderRadius: component.props.borderRadius || '4px',\n                textDecoration: 'none',\n                fontWeight: 'bold',\n                fontFamily: designSystem.typography.fontFamily,\n              }}\n            >\n              {component.props.text || 'Button'}\n            </a>\n          </div>\n        );\n\n      case 'image':\n        return (\n          <div style={{ textAlign: component.props.align || 'center', padding: '10px' }}>\n            <img\n              src={component.props.src || 'https://placehold.co/600x400'}\n              alt={component.props.alt || 'Image'}\n              style={{\n                width: component.props.width || 'auto',\n                height: component.props.height || 'auto',\n                maxWidth: '100%',\n              }}\n            />\n          </div>\n        );\n\n      case 'divider':\n        return (\n          <hr\n            style={{\n              borderColor: component.props.borderColor || '#ddd',\n              borderWidth: component.props.borderWidth || '1px',\n              borderStyle: component.props.borderStyle || 'solid',\n              margin: component.props.padding || '20px 0',\n            }}\n          />\n        );\n\n      case 'spacer':\n        return (\n          <div\n            style={{\n              height: component.props.height || '20px',\n            }}\n          />\n        );\n\n      case 'video':\n        return (\n          <div style={{ textAlign: component.props.align || 'center', padding: '10px' }}>\n            <video\n              src={component.props.src}\n              poster={component.props.poster}\n              controls={component.props.controls !== false}\n              autoPlay={component.props.autoplay || false}\n              style={{\n                width: component.props.width || '100%',\n                height: component.props.height || 'auto',\n                maxWidth: '100%',\n                borderRadius: '4px',\n              }}\n            >\n              Your email client does not support video playback.\n            </video>\n          </div>\n        );\n\n      case 'timer': {\n        // Live countdown rendering (not reflected in email clients, but good for builder preview)\n        const target = new Date(component.props.targetDate);\n        const [now, setNow] = React.useState(Date.now());\n        React.useEffect(() => {\n          const id = setInterval(() => setNow(Date.now()), 1000);\n            return () => clearInterval(id);\n        }, []);\n        const diff = target.getTime() - now;\n        let display = component.props.expiredText || 'Expired';\n        if (diff > 0) {\n          const seconds = Math.floor(diff / 1000) % 60;\n          const minutes = Math.floor(diff / (1000 * 60)) % 60;\n          const hours = Math.floor(diff / (1000 * 60 * 60)) % 24;\n          const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n          display = `${days}d ${hours}h ${minutes}m ${seconds}s`;\n        }\n        return (\n          <div\n            style={{\n              textAlign: component.props.align || 'center',\n              padding: '10px',\n              backgroundColor: component.props.backgroundColor || 'transparent',\n              color: component.props.color || '#dc3545',\n              fontFamily: 'monospace',\n              fontSize: '18px',\n              fontWeight: 'bold',\n            }}\n          >\n            {display}\n          </div>\n        );\n      }\n\n      case 'html': {\n        // Sanitize HTML content to prevent XSS attacks\n        const rawHtml = component.props.html || component.props.code || '<div>Empty HTML Block</div>';\n        const sanitizedHtml = sanitizeHtml(rawHtml);\n\n        return (\n          <div\n            style={{\n              textAlign: component.props.align || 'left',\n              padding: component.props.padding || '10px',\n              backgroundColor: component.props.backgroundColor || 'transparent',\n            }}\n            dangerouslySetInnerHTML={{ __html: sanitizedHtml }}\n          />\n        );\n      }\n\n      case 'social':\n        const getSocialIcon = (platform: string, size: string = '32px'): React.JSX.Element => {\n          const sizeNum = parseInt(size);\n          const iconMap: Record<string, React.JSX.Element> = {\n            facebook: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n              </svg>\n            ),\n            twitter: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#1DA1F2\">\n                <path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\"/>\n              </svg>\n            ),\n            instagram: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"url(#instagram-gradient)\">\n                <defs>\n                  <linearGradient id=\"instagram-gradient\" x1=\"0%\" y1=\"100%\" x2=\"100%\" y2=\"0%\">\n                    <stop offset=\"0%\" style={{stopColor: '#FED576'}} />\n                    <stop offset=\"50%\" style={{stopColor: '#F47133'}} />\n                    <stop offset=\"100%\" style={{stopColor: '#BC3081'}} />\n                  </linearGradient>\n                </defs>\n                <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n              </svg>\n            ),\n            linkedin: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#0A66C2\">\n                <path d=\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"/>\n              </svg>\n            ),\n            youtube: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#FF0000\">\n                <path d=\"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z\"/>\n              </svg>\n            ),\n            github: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#181717\">\n                <path d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"/>\n              </svg>\n            ),\n            pinterest: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#E60023\">\n                <path d=\"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z\"/>\n              </svg>\n            ),\n            tiktok: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#000000\">\n                <path d=\"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z\"/>\n              </svg>\n            ),\n            snapchat: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#FFFC00\">\n                <path d=\"M12.206.793c.99 0 4.347.276 5.93 3.821.529 1.193.403 3.219.299 4.847l-.003.06c-.012.18-.022.345-.03.51.075.045.203.09.401.09.3-.016.659-.12 1.033-.301.165-.088.344-.104.464-.104.182 0 .359.029.509.09.45.149.734.479.734.838.015.449-.39.839-1.213 1.168-.089.029-.209.075-.344.119-.45.135-1.139.36-1.333.81-.09.224-.061.524.12.868l.015.015c.06.136 1.526 3.475 4.791 4.014.255.044.435.27.42.509 0 .075-.015.149-.045.225-.24.569-1.273.988-3.146 1.271-.059.091-.12.375-.164.57-.029.179-.074.36-.134.553-.076.271-.27.405-.555.405h-.03c-.135 0-.313-.031-.538-.074-.36-.075-.765-.135-1.273-.135-.3 0-.599.015-.913.074-.6.104-1.123.464-1.723.884-.853.599-1.826 1.288-3.294 1.288-.06 0-.119-.015-.18-.015h-.149c-1.468 0-2.427-.675-3.279-1.288-.599-.42-1.107-.779-1.707-.884-.314-.045-.629-.074-.928-.074-.54 0-.958.089-1.272.149-.211.043-.391.074-.54.074-.374 0-.523-.224-.583-.42-.061-.192-.09-.389-.135-.567-.046-.181-.105-.494-.166-.57-1.918-.222-2.95-.642-3.189-1.226-.031-.063-.052-.12-.061-.179 0-.226.181-.465.436-.509 3.419-.539 4.853-3.879 4.853-3.879.18-.345.224-.645.119-.869-.195-.434-.789-.645-1.394-.81-.045-.016-.09-.044-.119-.074-.375-.181-1.274-.66-1.274-1.226 0-.539.508-.793.793-.793.1 0 .26.016.465.105.57.194 1.079.328 1.47.328.055 0 .135-.015.21-.015.099-.135.165-.36.165-.615-.016-1.169-.076-3-.076-4.395 0-3.879 2.86-4.755 5.753-4.755z\"/>\n              </svg>\n            ),\n            reddit: (\n              <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#FF4500\">\n                <path d=\"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z\"/>\n              </svg>\n            ),\n          };\n          \n          return iconMap[platform] || (\n            <svg width={sizeNum} height={sizeNum} viewBox=\"0 0 24 24\" fill=\"#888888\">\n              <path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n            </svg>\n          );\n        };\n        \n        const icons = component.props.icons || [];\n        const iconSize = component.props.iconSize || '32px';\n        const align = component.props.align || 'center';\n        \n        return (\n          <div\n            style={{\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: align === 'left' ? 'flex-start' : align === 'right' ? 'flex-end' : 'center',\n              alignItems: 'center',\n              gap: '12px',\n              padding: '10px',\n            }}\n          >\n            {icons.map((icon: any, index: number) => (\n              <a\n                key={index}\n                href={icon.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                style={{\n                  display: 'inline-flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  textDecoration: 'none',\n                  transition: 'transform 0.2s, opacity 0.2s',\n                  opacity: 0.9,\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.transform = 'scale(1.15)';\n                  e.currentTarget.style.opacity = '1';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.transform = 'scale(1)';\n                  e.currentTarget.style.opacity = '0.9';\n                }}\n                title={icon.platform.charAt(0).toUpperCase() + icon.platform.slice(1)}\n              >\n                {getSocialIcon(icon.platform, iconSize)}\n              </a>\n            ))}\n          </div>\n        );\n\n      case 'columns':\n        return <ColumnsRenderer component={component as any} />;\n\n      case 'section':\n        return (\n          <SectionRenderer component={component} />\n        );\n\n      default:\n        return <div>Unknown component type: {component.type}</div>;\n    }\n  };\n\n  return renderComponent();\n};\n\n// Section renderer with clickable children\nconst SectionRenderer: React.FC<{ component: EmailComponent }> = ({ component }) => {\n  const { selectedComponent, setSelectedComponent, designSystem } = useEmailEditor();\n\n  return (\n    <div\n      style={{\n        backgroundColor: component.props.backgroundColor || 'transparent',\n        padding: component.props.padding || '20px',\n      }}\n    >\n      {(component.children || []).map((child, index) => {\n        const isSelected = selectedComponent === child.id;\n        return (\n          <div\n            key={child.id || index}\n            className={isSelected ? 'eb-component-card selected' : 'eb-component-card'}\n            onClick={(e) => {\n              e.stopPropagation();\n              setSelectedComponent(child.id);\n            }}\n            style={{\n              cursor: 'pointer',\n            }}\n          >\n            <ComponentRenderer component={child} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React, { useState, useRef, DragEvent } from 'react';\n\ninterface ImageUploadModalProps {\n  onImageSelect: (imageUrl: string) => void;\n  onClose: () => void;\n  currentImageUrl?: string;\n}\n\nexport const ImageUploadModal: React.FC<ImageUploadModalProps> = ({\n  onImageSelect,\n  onClose,\n  currentImageUrl = '',\n}) => {\n  const [activeTab, setActiveTab] = useState<'upload' | 'url'>('url');\n  const [imageUrl, setImageUrl] = useState(currentImageUrl);\n  const [uploadedImage, setUploadedImage] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (file: File) => {\n    if (file && file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const result = e.target?.result as string;\n        setUploadedImage(result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      alert('Please select a valid image file (jpg, png, gif)');\n    }\n  };\n\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n\n  const handleDrop = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n\n    const file = e.dataTransfer.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n\n  const handleDragOver = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n  };\n\n  const handleSubmit = () => {\n    if (activeTab === 'url' && imageUrl) {\n      onImageSelect(imageUrl);\n      onClose();\n    } else if (activeTab === 'upload' && uploadedImage) {\n      onImageSelect(uploadedImage);\n      onClose();\n    } else {\n      alert('Please provide an image URL or upload an image');\n    }\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000,\n      }}\n      onClick={onClose}\n    >\n      <div\n        style={{\n          backgroundColor: 'white',\n          borderRadius: '8px',\n          width: '600px',\n          maxWidth: '90vw',\n          maxHeight: '80vh',\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n          boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div\n          style={{\n            padding: '20px',\n            borderBottom: '1px solid #dee2e6',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <h2 style={{ margin: 0, fontSize: '20px', fontWeight: 'bold' }}>\n            Select Image\n          </h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'none',\n              border: 'none',\n              fontSize: '24px',\n              cursor: 'pointer',\n              color: '#6c757d',\n              padding: '0',\n              width: '30px',\n              height: '30px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          >\n            \n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div\n          style={{\n            display: 'flex',\n            borderBottom: '1px solid #dee2e6',\n            backgroundColor: '#f8f9fa',\n          }}\n        >\n          <button\n            onClick={() => setActiveTab('url')}\n            style={{\n              flex: 1,\n              padding: '12px',\n              border: 'none',\n              backgroundColor: activeTab === 'url' ? 'white' : 'transparent',\n              borderBottom: activeTab === 'url' ? '2px solid #007bff' : 'none',\n              cursor: 'pointer',\n              fontWeight: activeTab === 'url' ? 'bold' : 'normal',\n              color: activeTab === 'url' ? '#007bff' : '#6c757d',\n            }}\n          >\n             Image URL\n          </button>\n          <button\n            onClick={() => setActiveTab('upload')}\n            style={{\n              flex: 1,\n              padding: '12px',\n              border: 'none',\n              backgroundColor: activeTab === 'upload' ? 'white' : 'transparent',\n              borderBottom: activeTab === 'upload' ? '2px solid #007bff' : 'none',\n              cursor: 'pointer',\n              fontWeight: activeTab === 'upload' ? 'bold' : 'normal',\n              color: activeTab === 'upload' ? '#007bff' : '#6c757d',\n            }}\n          >\n             Upload Image\n          </button>\n        </div>\n\n        {/* Content */}\n        <div\n          style={{\n            padding: '20px',\n            overflowY: 'auto',\n            flex: 1,\n          }}\n        >\n          {activeTab === 'url' ? (\n            <div>\n              <label\n                style={{\n                  display: 'block',\n                  marginBottom: '8px',\n                  fontWeight: 'bold',\n                  color: '#495057',\n                }}\n              >\n                Image URL\n              </label>\n              <input\n                type=\"text\"\n                value={imageUrl}\n                onChange={(e) => setImageUrl(e.target.value)}\n                placeholder=\"https://example.com/image.jpg\"\n                style={{\n                  width: '100%',\n                  padding: '10px',\n                  border: '1px solid #ced4da',\n                  borderRadius: '4px',\n                  fontSize: '14px',\n                  boxSizing: 'border-box',\n                }}\n              />\n              {imageUrl && (\n                <div\n                  style={{\n                    marginTop: '20px',\n                    border: '1px solid #dee2e6',\n                    borderRadius: '4px',\n                    padding: '10px',\n                    backgroundColor: '#f8f9fa',\n                  }}\n                >\n                  <p\n                    style={{\n                      margin: '0 0 10px 0',\n                      fontWeight: 'bold',\n                      color: '#495057',\n                      fontSize: '14px',\n                    }}\n                  >\n                    Preview:\n                  </p>\n                  <img\n                    src={imageUrl}\n                    alt=\"Preview\"\n                    style={{\n                      maxWidth: '100%',\n                      maxHeight: '300px',\n                      display: 'block',\n                      margin: '0 auto',\n                    }}\n                    onError={(e) => {\n                      (e.target as HTMLImageElement).style.display = 'none';\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n          ) : (\n            <div>\n              <div\n                onDrop={handleDrop}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                style={{\n                  border: `2px dashed ${isDragging ? '#007bff' : '#ced4da'}`,\n                  borderRadius: '8px',\n                  padding: '40px',\n                  textAlign: 'center',\n                  backgroundColor: isDragging ? '#e7f3ff' : '#f8f9fa',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                }}\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <div style={{ fontSize: '48px', marginBottom: '10px' }}>\n                  \n                </div>\n                <p\n                  style={{\n                    margin: '0 0 10px 0',\n                    fontSize: '16px',\n                    color: '#495057',\n                    fontWeight: 'bold',\n                  }}\n                >\n                  {isDragging\n                    ? 'Drop image here'\n                    : 'Drag & drop an image here'}\n                </p>\n                <p style={{ margin: '0 0 15px 0', fontSize: '14px', color: '#6c757d' }}>\n                  or\n                </p>\n                <button\n                  type=\"button\"\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#007bff',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '14px',\n                    fontWeight: 'bold',\n                  }}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    fileInputRef.current?.click();\n                  }}\n                >\n                  Choose File\n                </button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleFileInputChange}\n                  style={{ display: 'none' }}\n                />\n                <p\n                  style={{\n                    margin: '15px 0 0 0',\n                    fontSize: '12px',\n                    color: '#6c757d',\n                  }}\n                >\n                  Supported formats: JPG, PNG, GIF\n                </p>\n              </div>\n\n              {uploadedImage && (\n                <div\n                  style={{\n                    marginTop: '20px',\n                    border: '1px solid #dee2e6',\n                    borderRadius: '4px',\n                    padding: '10px',\n                    backgroundColor: '#f8f9fa',\n                  }}\n                >\n                  <p\n                    style={{\n                      margin: '0 0 10px 0',\n                      fontWeight: 'bold',\n                      color: '#495057',\n                      fontSize: '14px',\n                    }}\n                  >\n                    Preview:\n                  </p>\n                  <img\n                    src={uploadedImage}\n                    alt=\"Uploaded preview\"\n                    style={{\n                      maxWidth: '100%',\n                      maxHeight: '300px',\n                      display: 'block',\n                      margin: '0 auto',\n                    }}\n                  />\n                  <button\n                    onClick={() => setUploadedImage(null)}\n                    style={{\n                      marginTop: '10px',\n                      padding: '6px 12px',\n                      backgroundColor: '#dc3545',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: 'pointer',\n                      fontSize: '12px',\n                      width: '100%',\n                    }}\n                  >\n                    Remove\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div\n          style={{\n            padding: '20px',\n            borderTop: '1px solid #dee2e6',\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: '10px',\n          }}\n        >\n          <button\n            onClick={onClose}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#6c757d',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontSize: '14px',\n            }}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSubmit}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#007bff',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n            }}\n          >\n            Insert Image\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useEmailEditor } from './EmailEditorContext';\nimport { ImageUploadModal } from './ImageUploadModal';\nimport { Copy, Trash2, X } from 'lucide-react';\n\nexport const PropertyEditor: React.FC = () => {\n  const { components, updateComponent, removeComponent, selectedComponent, setSelectedComponent, cloneComponent } = useEmailEditor();\n  const component = components.find(c => c.id === selectedComponent);\n  const [showImageUpload, setShowImageUpload] = React.useState(false);\n\n  if (!component) return null;\n  const localProps: any = component.props || {};\n\n  const handlePropChange = (key: string, value: any) => {\n    if (key === '__bulk__' && typeof value === 'object') {\n      updateComponent(component.id, { props: { ...localProps, ...value } });\n      return;\n    }\n    updateComponent(component.id, { props: { ...localProps, [key]: value } });\n  };\n\n  const handleDelete = () => {\n    removeComponent(component.id);\n  };\n\n  const labelStyle: React.CSSProperties = {\n    display: 'block',\n    marginBottom: '8px',\n    fontSize: '13px',\n    fontWeight: 600,\n    color: 'var(--eb-text)',\n    letterSpacing: '0.3px',\n  };\n\n  const inputStyle: React.CSSProperties = {\n    width: '100%',\n    padding: '10px 12px',\n    border: '1px solid var(--eb-border)',\n    borderRadius: '6px',\n    fontSize: '14px',\n    boxSizing: 'border-box',\n    background: 'var(--eb-surface-raised)',\n    color: 'var(--eb-text)',\n    transition: 'var(--eb-transition)',\n  };\n\n  const renderInputs = () => {\n    const inputs: React.ReactNode[] = [];\n    switch (component.type) {\n      case 'text':\n        inputs.push(\n          <div key=\"text\">\n            <label style={labelStyle}>Text</label>\n            <textarea\n              value={localProps.text || ''}\n              onChange={(e) => handlePropChange('text', e.target.value)}\n              style={{ ...inputStyle, minHeight: '100px' }}\n            />\n          </div>,\n          <div key=\"fontSize\">\n            <label style={labelStyle}>Font Size</label>\n            <input type=\"text\" value={localProps.fontSize || ''} onChange={(e) => handlePropChange('fontSize', e.target.value)} placeholder=\"16px\" style={inputStyle} />\n          </div>,\n          <div key=\"fontFamily\">\n            <label style={labelStyle}>Font Family</label>\n            <select value={localProps.fontFamily || ''} onChange={(e) => handlePropChange('fontFamily', e.target.value)} style={inputStyle}>\n              <option value=\"\">(Use Design System)</option>\n              <option value=\"Arial, sans-serif\">Arial</option>\n              <option value=\"Helvetica, sans-serif\">Helvetica</option>\n              <option value=\"Georgia, serif\">Georgia</option>\n              <option value=\"'Times New Roman', serif\">Times New Roman</option>\n              <option value=\"'Courier New', monospace\">Courier New</option>\n              <option value=\"Verdana, sans-serif\">Verdana</option>\n            </select>\n          </div>,\n          <div key=\"fontWeight\">\n            <label style={labelStyle}>Font Weight</label>\n            <select value={localProps.fontWeight || ''} onChange={(e) => handlePropChange('fontWeight', e.target.value)} style={inputStyle}>\n              <option value=\"\">(Use Design System)</option>\n              <option value=\"300\">Light (300)</option>\n              <option value=\"400\">Normal (400)</option>\n              <option value=\"500\">Medium (500)</option>\n              <option value=\"600\">Semibold (600)</option>\n              <option value=\"700\">Bold (700)</option>\n            </select>\n          </div>,\n          <div key=\"color\">\n            <label style={labelStyle}>Color</label>\n            <input type=\"color\" value={localProps.color || '#000000'} onChange={(e) => handlePropChange('color', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"lineHeight\">\n            <label style={labelStyle}>Line Height</label>\n            <input type=\"text\" value={localProps.lineHeight || ''} onChange={(e) => handlePropChange('lineHeight', e.target.value)} placeholder=\"1.5\" style={inputStyle} />\n          </div>,\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'left'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>\n        );\n        break;\n\n      case 'button':\n        inputs.push(\n          <div key=\"text\">\n            <label style={labelStyle}>Button Text</label>\n            <input type=\"text\" value={localProps.text || ''} onChange={(e) => handlePropChange('text', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"href\">\n            <label style={labelStyle}>Link URL</label>\n            <input type=\"text\" value={localProps.href || ''} onChange={(e) => handlePropChange('href', e.target.value)} placeholder=\"https://example.com\" style={inputStyle} />\n          </div>,\n          <div key=\"backgroundColor\">\n            <label style={labelStyle}>Background Color</label>\n            <input type=\"color\" value={localProps.backgroundColor || '#007bff'} onChange={(e) => handlePropChange('backgroundColor', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"color\">\n            <label style={labelStyle}>Text Color</label>\n            <input type=\"color\" value={localProps.color || '#ffffff'} onChange={(e) => handlePropChange('color', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"borderRadius\">\n            <label style={labelStyle}>Border Radius</label>\n            <input type=\"text\" value={localProps.borderRadius || ''} onChange={(e) => handlePropChange('borderRadius', e.target.value)} placeholder=\"6px\" style={inputStyle} />\n          </div>,\n          <div key=\"padding\">\n            <label style={labelStyle}>Padding</label>\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '8px' }}>\n              <input type=\"text\" value={localProps.paddingV || ''} onChange={(e) => handlePropChange('paddingV', e.target.value)} placeholder=\"Vertical (8px)\" style={inputStyle} />\n              <input type=\"text\" value={localProps.paddingH || ''} onChange={(e) => handlePropChange('paddingH', e.target.value)} placeholder=\"Horizontal (12px)\" style={inputStyle} />\n            </div>\n          </div>,\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'left'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>\n        );\n        break;\n\n      case 'image':\n        inputs.push(\n          <div key=\"src\">\n            <label style={labelStyle}>Image URL</label>\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <input type=\"text\" value={localProps.src || ''} onChange={(e) => handlePropChange('src', e.target.value)} placeholder=\"https://example.com/image.jpg\" style={{ ...inputStyle, flex: 1 }} />\n              <button onClick={() => setShowImageUpload(true)} style={{ padding: '8px 12px', backgroundColor: 'var(--eb-info)', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '14px', whiteSpace: 'nowrap' }}> Upload</button>\n            </div>\n            {localProps.src && (\n              <div style={{ marginTop: '10px', textAlign: 'center' }}>\n                <img src={localProps.src} alt=\"Preview\" style={{ maxWidth: '100%', maxHeight: '150px', border: '1px solid var(--eb-border)', borderRadius: '4px' }} />\n              </div>\n            )}\n          </div>,\n          <div key=\"width\">\n            <label style={labelStyle}>Width</label>\n            <input type=\"text\" value={localProps.width || ''} onChange={(e) => handlePropChange('width', e.target.value)} placeholder=\"auto or 300px\" style={inputStyle} />\n          </div>,\n          <div key=\"alt\">\n            <label style={labelStyle}>Alt Text</label>\n            <input type=\"text\" value={localProps.alt || ''} onChange={(e) => handlePropChange('alt', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"href\">\n            <label style={labelStyle}>Link URL</label>\n            <input type=\"text\" value={localProps.href || ''} onChange={(e) => handlePropChange('href', e.target.value)} placeholder=\"https://example.com\" style={inputStyle} />\n          </div>\n        );\n        break;\n\n      case 'divider':\n        inputs.push(\n          <div key=\"borderColor\">\n            <label style={labelStyle}>Border Color</label>\n            <input type=\"color\" value={localProps.borderColor || '#dddddd'} onChange={(e) => handlePropChange('borderColor', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"borderWidth\">\n            <label style={labelStyle}>Border Width</label>\n            <input type=\"text\" value={localProps.borderWidth || ''} onChange={(e) => handlePropChange('borderWidth', e.target.value)} placeholder=\"1px\" style={inputStyle} />\n          </div>,\n          <div key=\"style\">\n            <label style={labelStyle}>Style</label>\n            <select value={localProps.style || 'solid'} onChange={(e) => handlePropChange('style', e.target.value)} style={inputStyle}>\n              <option value=\"solid\">Solid</option>\n              <option value=\"dashed\">Dashed</option>\n              <option value=\"dotted\">Dotted</option>\n            </select>\n          </div>\n        );\n        break;\n\n      case 'spacer':\n        inputs.push(\n          <div key=\"height\">\n            <label style={labelStyle}>Height</label>\n            <input type=\"text\" value={localProps.height || ''} onChange={(e) => handlePropChange('height', e.target.value)} placeholder=\"20px\" style={inputStyle} />\n          </div>\n        );\n        break;\n\n      case 'video':\n        inputs.push(\n          <div key=\"src\">\n            <label style={labelStyle}>Video URL</label>\n            <input type=\"text\" value={localProps.src || ''} onChange={(e) => handlePropChange('src', e.target.value)} placeholder=\"https://youtube.com/embed/... or video.mp4\" style={inputStyle} />\n          </div>,\n          <div key=\"poster\">\n            <label style={labelStyle}>Poster Image URL</label>\n            <input type=\"text\" value={localProps.poster || ''} onChange={(e) => handlePropChange('poster', e.target.value)} placeholder=\"https://example.com/thumbnail.jpg\" style={inputStyle} />\n          </div>,\n          <div key=\"width\">\n            <label style={labelStyle}>Width</label>\n            <input type=\"text\" value={localProps.width || ''} onChange={(e) => handlePropChange('width', e.target.value)} placeholder=\"100% or 600px\" style={inputStyle} />\n          </div>,\n          <div key=\"height\">\n            <label style={labelStyle}>Height</label>\n            <input type=\"text\" value={localProps.height || ''} onChange={(e) => handlePropChange('height', e.target.value)} placeholder=\"auto or 400px\" style={inputStyle} />\n          </div>,\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'center'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>,\n          <div key=\"controls\">\n            <label style={labelStyle}>\n              <input type=\"checkbox\" checked={localProps.controls !== false} onChange={(e) => handlePropChange('controls', e.target.checked)} style={{ marginRight: '8px' }} />\n              Show Controls\n            </label>\n          </div>\n        );\n        break;\n\n      case 'timer':\n        inputs.push(\n          <div key=\"targetDate\">\n            <label style={labelStyle}>Target Date/Time (UTC)</label>\n            <input\n              type=\"datetime-local\"\n              value={localProps.targetDate ? new Date(localProps.targetDate).toISOString().slice(0, 16) : ''}\n              onChange={(e) => {\n                const iso = new Date(e.target.value).toISOString();\n                handlePropChange('targetDate', iso);\n              }}\n              style={inputStyle}\n            />\n          </div>,\n          <div key=\"format\">\n            <label style={labelStyle}>Format</label>\n            <input type=\"text\" value={localProps.format || 'DD:HH:mm:ss'} onChange={(e) => handlePropChange('format', e.target.value)} placeholder=\"DD:HH:mm:ss\" style={inputStyle} />\n          </div>,\n          <div key=\"expiredText\">\n            <label style={labelStyle}>Expired Text</label>\n            <input type=\"text\" value={localProps.expiredText || 'Offer expired'} onChange={(e) => handlePropChange('expiredText', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'center'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>,\n          <div key=\"color\">\n            <label style={labelStyle}>Text Color</label>\n            <input type=\"color\" value={localProps.color || '#dc3545'} onChange={(e) => handlePropChange('color', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"backgroundColor\">\n            <label style={labelStyle}>Background Color</label>\n            <input type=\"color\" value={localProps.backgroundColor || '#ffffff'} onChange={(e) => handlePropChange('backgroundColor', e.target.value)} style={inputStyle} />\n          </div>\n        );\n        break;\n\n      case 'html':\n        inputs.push(\n          <div key=\"html\">\n            <label style={labelStyle}>HTML Code</label>\n            <textarea value={localProps.html || ''} onChange={(e) => handlePropChange('html', e.target.value)} placeholder=\"<div style='color:red;'>Hello</div>\" style={{ ...inputStyle, minHeight: '140px', fontFamily: 'monospace' }} />\n          </div>,\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'left'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>,\n          <div key=\"padding\">\n            <label style={labelStyle}>Padding</label>\n            <input type=\"text\" value={localProps.padding || ''} onChange={(e) => handlePropChange('padding', e.target.value)} placeholder=\"10px\" style={inputStyle} />\n          </div>,\n          <div key=\"backgroundColor\">\n            <label style={labelStyle}>Background Color</label>\n            <input type=\"color\" value={localProps.backgroundColor || '#ffffff'} onChange={(e) => handlePropChange('backgroundColor', e.target.value)} style={inputStyle} />\n          </div>\n        );\n        break;\n\n      case 'section':\n        inputs.push(\n          <div key=\"backgroundColor\">\n            <label style={labelStyle}>Background Color</label>\n            <input type=\"color\" value={localProps.backgroundColor || '#ffffff'} onChange={(e) => handlePropChange('backgroundColor', e.target.value)} style={inputStyle} />\n          </div>,\n          <div key=\"padding\">\n            <label style={labelStyle}>Padding</label>\n            <input type=\"text\" value={localProps.padding || ''} onChange={(e) => handlePropChange('padding', e.target.value)} placeholder=\"20px\" style={inputStyle} />\n          </div>\n        );\n        break;\n\n      case 'columns':\n        const columnCount = localProps.columnCount || 2;\n        const widthInputs: React.ReactNode[] = [];\n\n        const handleColumnCountChange = (newCount: number) => {\n          const oldCount = columnCount;\n          const allComponents: any[] = [];\n          for (let i = 1; i <= oldCount; i++) {\n            const columnKey = `column${i}`;\n            const columnComponents = (component as any)[columnKey] || [];\n            allComponents.push(...columnComponents);\n          }\n          const newColumns: any = {};\n          for (let i = 1; i <= newCount; i++) {\n            newColumns[`column${i}`] = [];\n          }\n          allComponents.forEach((comp, index) => {\n            const targetColumn = (index % newCount) + 1;\n            newColumns[`column${targetColumn}`].push(comp);\n          });\n          for (let i = 1; i <= newCount; i++) {\n            newColumns[`width${i}`] = 0;\n          }\n          updateComponent(component.id, {\n            props: { ...localProps, columnCount: newCount },\n            ...newColumns,\n          });\n        };\n\n        const columnPresets: any = {\n          2: [\n            { name: '50-50 Equal', widths: [50, 50] },\n            { name: '70-30 Sidebar', widths: [70, 30] },\n            { name: '30-70 Sidebar', widths: [30, 70] },\n            { name: '60-40', widths: [60, 40] },\n          ],\n          3: [\n            { name: '33-33-33 Equal', widths: [33, 34, 33] },\n            { name: '25-50-25 Featured', widths: [25, 50, 25] },\n            { name: '40-30-30', widths: [40, 30, 30] },\n            { name: '20-60-20', widths: [20, 60, 20] },\n          ],\n          4: [\n            { name: '25-25-25-25 Equal', widths: [25, 25, 25, 25] },\n            { name: '40-20-20-20', widths: [40, 20, 20, 20] },\n            { name: '30-30-20-20', widths: [30, 30, 20, 20] },\n          ],\n        };\n\n        const applyPreset = (widths: number[]) => {\n          const updates: any = {};\n          widths.forEach((width, index) => {\n            updates[`width${index + 1}`] = width;\n          });\n          handlePropChange('__bulk__', updates);\n        };\n\n        widthInputs.push(\n          <div key=\"help\" style={{ padding: '10px', backgroundColor: 'var(--eb-accent-light)', borderRadius: '4px', marginBottom: '10px', fontSize: '12px', color: 'var(--eb-text)' }}>\n             Changing column count will automatically redistribute your content. Use presets for quick layouts!\n          </div>,\n          <div key=\"columnCount\">\n            <label style={labelStyle}>Number of Columns</label>\n            <select value={columnCount} onChange={(e) => handleColumnCountChange(parseInt(e.target.value))} style={inputStyle}>\n              <option value={2}>2 Columns</option>\n              <option value={3}>3 Columns</option>\n              <option value={4}>4 Columns</option>\n            </select>\n          </div>\n        );\n\n        const presetsForCount = columnPresets[columnCount] || [];\n        if (presetsForCount.length > 0) {\n          widthInputs.push(\n            <div key=\"presets\" style={{ marginTop: '10px' }}>\n              <label style={labelStyle}>Quick Layouts</label>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '5px' }}>\n                {presetsForCount.map((preset: any, idx: number) => (\n                  <button key={idx} onClick={() => applyPreset(preset.widths)} style={{ padding: '6px 10px', fontSize: '11px', backgroundColor: 'var(--eb-surface-raised)', border: '1px solid var(--eb-border)', borderRadius: '4px', cursor: 'pointer', whiteSpace: 'nowrap', color: 'var(--eb-text)' }}>\n                    {preset.name}\n                  </button>\n                ))}\n              </div>\n            </div>\n          );\n        }\n\n        for (let i = 1; i <= columnCount; i++) {\n          const widthKey = `width${i}`;\n          widthInputs.push(\n            <div key={widthKey}>\n              <label style={labelStyle}>Column {i} Width (%)</label>\n              <input type=\"number\" min=\"0\" max=\"100\" value={localProps[widthKey] || 0} onChange={(e) => handlePropChange(widthKey, parseInt(e.target.value) || 0)} placeholder={`${Math.round(100 / columnCount)}% (auto)`} style={inputStyle} />\n            </div>\n          );\n        }\n\n        const totalWidth = Array.from({ length: columnCount }).reduce<number>((sum, _, i) => {\n          return sum + (localProps[`width${i + 1}`] || 0);\n        }, 0);\n\n        if (totalWidth > 0) {\n          widthInputs.push(\n            <div key=\"total\" style={{ padding: '8px', backgroundColor: totalWidth === 100 ? 'var(--eb-success)' : 'var(--eb-warning)', borderRadius: '4px', fontSize: '12px', fontWeight: 'bold', textAlign: 'center', color: 'white' }}>\n              Total: {totalWidth}% {totalWidth === 100 ? '' : ''}\n            </div>\n          );\n        }\n\n        widthInputs.push(\n          <div key=\"column-settings-divider\" style={{ borderTop: '2px solid var(--eb-border)', margin: '20px 0 15px 0', paddingTop: '15px' }}>\n            <h4 style={{ margin: '0 0 10px 0', fontSize: '14px', fontWeight: 'bold', color: 'var(--eb-text)' }}>Column-Specific Settings</h4>\n          </div>\n        );\n\n        for (let i = 1; i <= columnCount; i++) {\n          const settingsKey = `columnSettings${i}`;\n          const settings = localProps[settingsKey] || {};\n          widthInputs.push(\n            <div key={`col-${i}-settings`} style={{ padding: '10px', backgroundColor: 'var(--eb-surface-raised)', borderRadius: '4px', marginBottom: '10px' }}>\n              <div style={{ fontWeight: 'bold', marginBottom: '8px', fontSize: '13px', color: 'var(--eb-text)' }}>Column {i}</div>\n              <div style={{ marginBottom: '8px' }}>\n                <label style={{ ...labelStyle, fontSize: '11px' }}>Background Color</label>\n                <input type=\"color\" value={settings.backgroundColor || '#ffffff'} onChange={(e) => { handlePropChange(settingsKey, { ...settings, backgroundColor: e.target.value }); }} style={{ ...inputStyle, height: '32px' }} />\n              </div>\n              <div style={{ marginBottom: '8px' }}>\n                <label style={{ ...labelStyle, fontSize: '11px' }}>Padding</label>\n                <input type=\"text\" value={settings.padding || ''} onChange={(e) => { handlePropChange(settingsKey, { ...settings, padding: e.target.value }); }} placeholder=\"10px\" style={inputStyle} />\n              </div>\n              <div>\n                <label style={{ ...labelStyle, fontSize: '11px' }}>Alignment</label>\n                <select value={settings.align || 'left'} onChange={(e) => { handlePropChange(settingsKey, { ...settings, align: e.target.value }); }} style={inputStyle}>\n                  <option value=\"left\">Left</option>\n                  <option value=\"center\">Center</option>\n                  <option value=\"right\">Right</option>\n                </select>\n              </div>\n            </div>\n          );\n        }\n\n        inputs.push(...widthInputs);\n        break;\n\n      case 'social':\n        const icons = localProps.icons || [];\n        inputs.push(\n          <div key=\"align\">\n            <label style={labelStyle}>Align</label>\n            <select value={localProps.align || 'center'} onChange={(e) => handlePropChange('align', e.target.value)} style={inputStyle}>\n              <option value=\"left\">Left</option>\n              <option value=\"center\">Center</option>\n              <option value=\"right\">Right</option>\n            </select>\n          </div>,\n          <div key=\"iconSize\">\n            <label style={labelStyle}>Icon Size</label>\n            <input type=\"text\" value={localProps.iconSize || ''} onChange={(e) => handlePropChange('iconSize', e.target.value)} placeholder=\"32px\" style={inputStyle} />\n          </div>,\n          <div key=\"icons-header\" style={{ marginTop: '15px', marginBottom: '10px' }}>\n            <label style={{ ...labelStyle, fontWeight: 'bold' }}>Social Icons</label>\n            <button onClick={() => { const newIcons = [...icons, { platform: 'facebook', url: 'https://facebook.com' }]; handlePropChange('icons', newIcons); }} style={{ marginLeft: '10px', padding: '5px 10px', fontSize: '12px', backgroundColor: 'var(--eb-success)', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\n              + Add Icon\n            </button>\n          </div>\n        );\n\n        icons.forEach((icon: any, index: number) => {\n          inputs.push(\n            <div key={`icon-${index}`} style={{ marginBottom: '15px', padding: '10px', backgroundColor: 'var(--eb-surface-raised)', borderRadius: '4px', border: '1px solid var(--eb-border)' }}>\n              <div style={{ marginBottom: '8px' }}>\n                <label style={{ ...labelStyle, fontSize: '12px' }}>Platform</label>\n                <select value={icon.platform || 'facebook'} onChange={(e) => { const newIcons = [...icons]; newIcons[index] = { ...newIcons[index], platform: e.target.value }; handlePropChange('icons', newIcons); }} style={{ ...inputStyle, fontSize: '12px' }}>\n                  <option value=\"facebook\">Facebook</option>\n                  <option value=\"twitter\">Twitter</option>\n                  <option value=\"instagram\">Instagram</option>\n                  <option value=\"linkedin\">LinkedIn</option>\n                  <option value=\"youtube\">YouTube</option>\n                  <option value=\"github\">GitHub</option>\n                  <option value=\"pinterest\">Pinterest</option>\n                  <option value=\"tiktok\">TikTok</option>\n                  <option value=\"snapchat\">Snapchat</option>\n                  <option value=\"reddit\">Reddit</option>\n                </select>\n              </div>\n              <div style={{ marginBottom: '8px' }}>\n                <label style={{ ...labelStyle, fontSize: '12px' }}>URL</label>\n                <input type=\"text\" value={icon.url || ''} onChange={(e) => { const newIcons = [...icons]; newIcons[index] = { ...newIcons[index], url: e.target.value }; handlePropChange('icons', newIcons); }} placeholder=\"https://...\" style={{ ...inputStyle, fontSize: '12px' }} />\n              </div>\n              <button onClick={() => { const newIcons = icons.filter((_: any, i: number) => i !== index); handlePropChange('icons', newIcons); }} style={{ padding: '4px 8px', fontSize: '11px', backgroundColor: 'var(--eb-danger)', color: 'white', border: 'none', borderRadius: '3px', cursor: 'pointer' }}>\n                Remove\n              </button>\n            </div>\n          );\n        });\n        break;\n\n      default:\n        inputs.push(<div key=\"none\" style={{ fontSize: 12, color: 'var(--eb-text-secondary)' }}>No editable properties for this component.</div>);\n        break;\n    }\n    return inputs;\n  };\n\n  return (\n    <div className=\"eb-panel\">\n      <div style={{ display: 'flex', alignItems: 'center', padding: '12px 14px', gap: '8px', borderBottom: '1px solid var(--eb-border)', background: 'var(--eb-surface-raised)' }}>\n        <div style={{ flex: 1, minWidth: 0 }}>\n          <span style={{ fontSize: '13px', fontWeight: 600, color: 'var(--eb-text)', textTransform: 'capitalize' }}>{component.type}</span>\n        </div>\n        <button onClick={() => cloneComponent(component.id)} title=\"Clone\" style={{ padding: '6px', background: 'var(--eb-surface)', border: '1px solid var(--eb-border)', borderRadius: '6px', cursor: 'pointer', display: 'flex', alignItems: 'center', color: 'var(--eb-text)' }}>\n          <Copy size={16} />\n        </button>\n        <button onClick={handleDelete} title=\"Delete\" style={{ padding: '6px', background: 'var(--eb-danger)', border: 'none', borderRadius: '6px', cursor: 'pointer', display: 'flex', alignItems: 'center', color: 'white' }}>\n          <Trash2 size={16} />\n        </button>\n        <button onClick={() => setSelectedComponent(null)} title=\"Close\" style={{ padding: '6px', background: 'var(--eb-surface)', border: '1px solid var(--eb-border)', borderRadius: '6px', cursor: 'pointer', display: 'flex', alignItems: 'center', color: 'var(--eb-text)' }}>\n          <X size={16} />\n        </button>\n      </div>\n      <div className=\"eb-panel-body\" style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\n        {renderInputs()}\n      </div>\n      {showImageUpload && (\n        <ImageUploadModal\n          currentImageUrl={localProps.src || ''}\n          onImageSelect={(url) => {\n            handlePropChange('src', url);\n            setShowImageUpload(false);\n          }}\n          onClose={() => setShowImageUpload(false)}\n        />\n      )}\n    </div>\n  );\n};\n","/**\n * Canvas Drop Zone\n * Accepts components dragged from the toolbar\n */\n\nimport React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { ComponentType, EmailComponent, log } from '@kaptha/email-editor-core';\nimport { useEmailEditor } from './EmailEditorContext';\nimport { ItemTypes } from './ComponentToolbar';\nimport { componentTemplates } from './constants/componentTemplates';\n\ninterface CanvasDropZoneProps {\n  children: React.ReactNode;\n  maxWidth?: string;\n}\n\nexport const CanvasDropZone: React.FC<CanvasDropZoneProps> = ({ children, maxWidth = '600px' }) => {\n  const { addComponent, insertSavedBlock, designSystem } = useEmailEditor();\n\n  const [{ isOver, canDrop }, drop] = useDrop({\n    accept: ItemTypes.NEW_COMPONENT,\n    drop: (item: any, monitor) => {\n      // Check if drop was already handled by a nested drop zone (e.g., column)\n      if (monitor.didDrop()) {\n        log.debug('[CanvasDropZone] Drop already handled by nested zone, ignoring');\n        return;\n      }\n      \n      log.debug('[CanvasDropZone] Handling drop at canvas level', item);\n      \n      // If dragging a saved block\n      if (item.savedBlockId) {\n        insertSavedBlock(item.savedBlockId);\n        return;\n      }\n      const template = componentTemplates[item.componentType as ComponentType];\n      if (!template) return;\n      const newComponent: EmailComponent = {\n        id: `${item.componentType}-${Date.now()}`,\n        type: item.componentType,\n        props: template.props || {},\n        ...(template.children !== undefined && { children: template.children }),\n      };\n      addComponent(newComponent);\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver({ shallow: true }), // Only highlight when directly over canvas, not nested zones\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  const isActive = isOver && canDrop;\n\n  return (\n    <div\n      ref={drop as any}\n      style={{\n        width: '90%',\n        margin: '0 auto',\n        backgroundColor: isActive ? '#e3f2fd' : designSystem.colors.background,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        minHeight: '500px',\n        padding: '20px',\n        border: isActive ? '2px dashed #007bff' : '2px solid transparent',\n        transition: 'all 0.2s',\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n","/**\n * Template Selector Modal\n */\n\nimport React, { useState } from 'react';\nimport { EmailTemplate } from '@kaptha/email-editor-core';\n\ninterface TemplateSelectorProps {\n  templates: Record<string, EmailTemplate>;\n  onSelect: (template: EmailTemplate) => void;\n  onClose: () => void;\n}\n\nexport const TemplateSelector: React.FC<TemplateSelectorProps> = ({\n  templates,\n  onSelect,\n  onClose,\n}) => {\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n\n  const categories = {\n    all: 'All Templates',\n    popular: 'Popular',\n    marketing: 'Marketing',\n    transactional: 'Transactional',\n    engagement: 'Engagement',\n  };\n\n  const filterTemplates = () => {\n    const templateList = Object.entries(templates);\n    \n    if (selectedCategory === 'all') {\n      return templateList;\n    }\n\n    // Filter by category (you can enhance this with actual category data)\n    const categoryMap: Record<string, string[]> = {\n      popular: ['welcome', 'newsletter', 'promotional'],\n      marketing: ['promotional', 'announcement', 'reengagement'],\n      transactional: ['transactional', 'reminder'],\n      engagement: ['welcome', 'feedback', 'invitation'],\n    };\n\n    return templateList.filter(([key]) => \n      categoryMap[selectedCategory]?.includes(key)\n    );\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 1000,\n      }}\n      onClick={onClose}\n    >\n      <div\n        className=\"eb-panel\"\n        style={{\n          borderRadius: '12px',\n          padding: '30px',\n          maxWidth: '900px',\n          width: '90%',\n          maxHeight: '80vh',\n          overflow: 'auto',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n          <h2 style={{ margin: 0, fontSize: '24px', fontWeight: 'bold', color: 'var(--eb-text)' }}>\n            Choose a Template\n          </h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'none',\n              border: 'none',\n              fontSize: '28px',\n              cursor: 'pointer',\n              color: 'var(--eb-muted)',\n              padding: '0',\n              lineHeight: '1',\n            }}\n          >\n            \n          </button>\n        </div>\n\n        {/* Category Tabs */}\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '30px', flexWrap: 'wrap' }}>\n          {Object.entries(categories).map(([key, label]) => (\n            <button\n              key={key}\n              onClick={() => setSelectedCategory(key)}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: selectedCategory === key ? 'var(--eb-accent)' : 'var(--eb-surface-raised)',\n                color: selectedCategory === key ? 'white' : 'var(--eb-text-secondary)',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: selectedCategory === key ? 'bold' : 'normal',\n                transition: 'all 0.2s',\n              }}\n            >\n              {label}\n            </button>\n          ))}\n        </div>\n\n        {/* Templates Grid */}\n        <div\n          style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\n            gap: '20px',\n          }}\n        >\n          {filterTemplates().map(([key, template]) => (\n            <div\n              key={key}\n              onClick={() => onSelect(template)}\n              style={{\n                border: '2px solid var(--eb-border)',\n                borderRadius: '8px',\n                padding: '20px',\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n                backgroundColor: 'var(--eb-surface)',\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.borderColor = 'var(--eb-accent)';\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.15)';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.borderColor = 'var(--eb-border)';\n                e.currentTarget.style.boxShadow = 'none';\n              }}\n            >\n              {/* Template Preview Icon */}\n              <div\n                style={{\n                  width: '100%',\n                  height: '150px',\n                  backgroundColor: 'var(--eb-surface-raised)',\n                  borderRadius: '6px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  marginBottom: '15px',\n                  fontSize: '48px',\n                }}\n              >\n                {key === 'blank' && ''}\n                {key === 'welcome' && ''}\n                {key === 'newsletter' && ''}\n                {key === 'promotional' && ''}\n                {key === 'transactional' && ''}\n                {key === 'invitation' && ''}\n                {key === 'announcement' && ''}\n                {key === 'feedback' && ''}\n                {key === 'reminder' && ''}\n                {key === 'reengagement' && ''}\n              </div>\n\n              {/* Template Name */}\n              <h3 style={{ margin: '0 0 8px 0', fontSize: '16px', fontWeight: 'bold', color: 'var(--eb-text)' }}>\n                {template.name}\n              </h3>\n\n              {/* Component Count */}\n              <p style={{ margin: 0, fontSize: '13px', color: 'var(--eb-text-secondary)' }}>\n                {template.components?.length || 0} components\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {/* Start from Scratch Option */}\n        <div style={{ marginTop: '30px', paddingTop: '20px', borderTop: '1px solid var(--eb-border)' }}>\n          <button\n            onClick={() => onSelect({ name: 'Untitled', components: [] })}\n            style={{\n              width: '100%',\n              padding: '14px',\n              backgroundColor: 'var(--eb-surface-hover)',\n              color: 'var(--eb-text)',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '16px',\n              fontWeight: 'bold',\n            }}\n          >\n            Start from Scratch\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * Design System Panel\n * Allows users to customize global design tokens\n */\n\nimport React, { useState } from 'react';\nimport { DesignSystem } from '@kaptha/email-editor-core';\n\ninterface DesignSystemPanelProps {\n  designSystem: DesignSystem;\n  onUpdate: (designSystem: DesignSystem) => void;\n  onClose: () => void;\n}\n\nexport const DesignSystemPanel: React.FC<DesignSystemPanelProps> = ({\n  designSystem,\n  onUpdate,\n  onClose,\n}) => {\n  const [activeTab, setActiveTab] = useState<'colors' | 'typography' | 'spacing'>('colors');\n  const [localDesignSystem, setLocalDesignSystem] = useState<DesignSystem>(designSystem);\n\n  const handleColorChange = (key: keyof DesignSystem['colors'], value: string) => {\n    const updated = {\n      ...localDesignSystem,\n      colors: {\n        ...localDesignSystem.colors,\n        [key]: value,\n      },\n    };\n    setLocalDesignSystem(updated);\n    onUpdate(updated);\n  };\n\n  const handleTypographyChange = (category: 'fontFamily' | 'headingFont' | 'bodyFont', value: string) => {\n    const updated = {\n      ...localDesignSystem,\n      typography: {\n        ...localDesignSystem.typography,\n        [category]: value,\n      },\n    };\n    setLocalDesignSystem(updated);\n    onUpdate(updated);\n  };\n\n  const handleFontSizeChange = (key: keyof DesignSystem['typography']['fontSize'], value: string) => {\n    const updated = {\n      ...localDesignSystem,\n      typography: {\n        ...localDesignSystem.typography,\n        fontSize: {\n          ...localDesignSystem.typography.fontSize,\n          [key]: value,\n        },\n      },\n    };\n    setLocalDesignSystem(updated);\n    onUpdate(updated);\n  };\n\n  const handleSpacingChange = (key: keyof DesignSystem['spacing'], value: string) => {\n    const updated = {\n      ...localDesignSystem,\n      spacing: {\n        ...localDesignSystem.spacing,\n        [key]: value,\n      },\n    };\n    setLocalDesignSystem(updated);\n    onUpdate(updated);\n  };\n\n  const inputStyle: React.CSSProperties = {\n    width: '100%',\n    padding: '8px',\n    border: '1px solid var(--eb-border)',\n    borderRadius: '6px',\n    fontSize: '14px',\n    background: 'var(--eb-surface)',\n    color: 'var(--eb-text)',\n    marginTop: '4px',\n  };\n\n  const labelStyle: React.CSSProperties = {\n    display: 'block',\n    fontSize: '12px',\n    fontWeight: 'bold',\n    color: 'var(--eb-text-secondary)',\n    marginBottom: '4px',\n  };\n\n  const sectionStyle: React.CSSProperties = {\n    marginBottom: '20px',\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 1000,\n      }}\n      onClick={onClose}\n    >\n      <div\n        className=\"eb-panel\"\n        style={{\n          width: '90%',\n          maxWidth: '600px',\n          maxHeight: '80vh',\n          overflow: 'hidden',\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"eb-panel-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 600, color: 'var(--eb-text)' }}>Design System</h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'none',\n              border: '1px solid var(--eb-border)',\n              borderRadius: 8,\n              fontSize: '16px',\n              cursor: 'pointer',\n              color: 'var(--eb-text-secondary)',\n              padding: '4px 8px',\n              lineHeight: '1',\n            }}\n          >\n            Close\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div\n          style={{\n            display: 'flex',\n            borderBottom: '1px solid var(--eb-border)',\n            backgroundColor: 'var(--eb-surface)',\n          }}\n        >\n          {['colors', 'typography', 'spacing'].map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab as any)}\n              style={{\n                flex: 1,\n                padding: '12px',\n                border: 'none',\n                backgroundColor: activeTab === tab ? 'var(--eb-surface-raised)' : 'transparent',\n                borderBottom: activeTab === tab ? '2px solid var(--eb-accent)' : '2px solid transparent',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: activeTab === tab ? 'bold' : 'normal',\n                color: activeTab === tab ? 'var(--eb-accent)' : 'var(--eb-text-secondary)',\n                textTransform: 'capitalize',\n              }}\n            >\n              {tab}\n            </button>\n          ))}\n        </div>\n\n        {/* Content */}\n        <div className=\"eb-panel-body\" style={{ overflowY: 'auto', flex: 1 }}>\n          {activeTab === 'colors' && (\n            <div>\n              <h3 style={{ marginTop: 0, fontSize: '16px', marginBottom: '16px', color: 'var(--eb-text)' }}>Color Palette</h3>\n              \n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Primary Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.primary}\n                    onChange={(e) => handleColorChange('primary', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Secondary Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.secondary}\n                    onChange={(e) => handleColorChange('secondary', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Accent Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.accent}\n                    onChange={(e) => handleColorChange('accent', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Text Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.text}\n                    onChange={(e) => handleColorChange('text', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Secondary Text Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.textSecondary}\n                    onChange={(e) => handleColorChange('textSecondary', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Background Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.background}\n                    onChange={(e) => handleColorChange('background', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Border Color\n                  <input\n                    type=\"color\"\n                    value={localDesignSystem.colors.border}\n                    onChange={(e) => handleColorChange('border', e.target.value)}\n                    style={inputStyle}\n                  />\n                </label>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'typography' && (\n            <div>\n              <h3 style={{ marginTop: 0, fontSize: '16px', marginBottom: '16px', color: 'var(--eb-text)' }}>Typography</h3>\n              \n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Font Family\n                  <input\n                    type=\"text\"\n                    value={localDesignSystem.typography.fontFamily}\n                    onChange={(e) => handleTypographyChange('fontFamily', e.target.value)}\n                    style={inputStyle}\n                    placeholder=\"Arial, Helvetica, sans-serif\"\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Heading Font\n                  <input\n                    type=\"text\"\n                    value={localDesignSystem.typography.headingFont}\n                    onChange={(e) => handleTypographyChange('headingFont', e.target.value)}\n                    style={inputStyle}\n                    placeholder=\"Georgia, serif\"\n                  />\n                </label>\n              </div>\n\n              <div style={sectionStyle}>\n                <label style={labelStyle}>\n                  Body Font\n                  <input\n                    type=\"text\"\n                    value={localDesignSystem.typography.bodyFont}\n                    onChange={(e) => handleTypographyChange('bodyFont', e.target.value)}\n                    style={inputStyle}\n                    placeholder=\"Arial, sans-serif\"\n                  />\n                </label>\n              </div>\n\n              <h4 style={{ fontSize: '14px', marginTop: '24px', marginBottom: '12px', color: 'var(--eb-text-secondary)' }}>Font Sizes</h4>\n              \n              {Object.entries(localDesignSystem.typography.fontSize).map(([key, value]) => (\n                <div key={key} style={sectionStyle}>\n                  <label style={labelStyle}>\n                    {key.toUpperCase()}\n                    <input\n                      type=\"text\"\n                      value={value}\n                      onChange={(e) => handleFontSizeChange(key as any, e.target.value)}\n                      style={inputStyle}\n                      placeholder=\"16px\"\n                    />\n                  </label>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {activeTab === 'spacing' && (\n            <div>\n              <h3 style={{ marginTop: 0, fontSize: '16px', marginBottom: '16px', color: 'var(--eb-text)' }}>Spacing Scale</h3>\n              \n              {Object.entries(localDesignSystem.spacing).map(([key, value]) => (\n                <div key={key} style={sectionStyle}>\n                  <label style={labelStyle}>\n                    {key.toUpperCase()}\n                    <input\n                      type=\"text\"\n                      value={value}\n                      onChange={(e) => handleSpacingChange(key as any, e.target.value)}\n                      style={inputStyle}\n                      placeholder=\"16px\"\n                    />\n                  </label>\n                </div>\n              ))}\n\n              <div style={{ marginTop: '24px', padding: '16px', backgroundColor: 'var(--eb-surface)', borderRadius: '8px', border: '1px solid var(--eb-border)' }}>\n                <p style={{ margin: '0 0 8px 0', fontSize: '12px', fontWeight: 'bold', color: 'var(--eb-text-secondary)' }}>\n                  Preview:\n                </p>\n                <div style={{ display: 'flex', gap: '8px', alignItems: 'flex-end' }}>\n                  {Object.entries(localDesignSystem.spacing).map(([key, value]) => (\n                    <div key={key} style={{ textAlign: 'center' }}>\n                      <div\n                        style={{\n                          width: value,\n                          height: value,\n                          backgroundColor: 'var(--eb-accent)',\n                          marginBottom: '4px',\n                        }}\n                      />\n                      <span style={{ fontSize: '10px', color: 'var(--eb-text-secondary)' }}>{key}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"eb-panel-footer\" style={{ display: 'flex', justifyContent: 'flex-end', gap: '10px' }}>\n          <button\n            onClick={onClose}\n            style={{\n              padding: '8px 16px',\n              backgroundColor: 'var(--eb-muted)',\n              color: 'var(--eb-text)',\n              border: '1px solid var(--eb-border)',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n            }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useEmailEditor } from './EmailEditorContext';\nimport { MJMLConverter, log, EmailComponent, DesignSystem } from '@kaptha/email-editor-core';\n\ninterface ExportModalProps {\n  onClose: () => void;\n  apiEndpoint?: string; // Optional MJML API endpoint for browser conversion\n}\n\n// Generate basic HTML from components (fallback when API not available)\nconst generateBasicHTML = (components: EmailComponent[], designSystem: DesignSystem): string => {\n  const componentToHTML = (comp: EmailComponent): string => {\n    switch (comp.type) {\n      case 'text':\n        return `<div style=\"font-size: ${comp.props.fontSize || '16px'}; font-weight: ${comp.props.fontWeight || '400'}; color: ${comp.props.color || '#000'}; text-align: ${comp.props.align || 'left'}; padding: ${comp.props.padding || '10px'}; font-family: ${comp.props.fontFamily || designSystem.typography.fontFamily};\">${comp.props.text || ''}</div>`;\n      \n      case 'button':\n        return `<div style=\"text-align: ${comp.props.align || 'center'}; padding: 10px;\"><a href=\"${comp.props.href || '#'}\" style=\"display: inline-block; background-color: ${comp.props.backgroundColor || designSystem.colors.primary}; color: ${comp.props.color || '#fff'}; padding: ${comp.props.padding || '10px 20px'}; border-radius: ${comp.props.borderRadius || '4px'}; text-decoration: none; font-weight: bold; font-family: ${designSystem.typography.fontFamily};\">${comp.props.text || 'Button'}</a></div>`;\n      \n      case 'image':\n        return `<div style=\"text-align: ${comp.props.align || 'center'}; padding: 10px;\"><img src=\"${comp.props.src || 'https://placehold.co/600x400'}\" alt=\"${comp.props.alt || 'Image'}\" style=\"width: ${comp.props.width || 'auto'}; height: ${comp.props.height || 'auto'}; max-width: 100%;\" /></div>`;\n      \n      case 'divider':\n        return `<hr style=\"border-color: ${comp.props.borderColor || '#ddd'}; border-width: ${comp.props.borderWidth || '1px'}; border-style: ${comp.props.borderStyle || 'solid'}; margin: ${comp.props.padding || '20px 0'};\" />`;\n      \n      case 'spacer':\n        return `<div style=\"height: ${comp.props.height || '20px'};\"></div>`;\n      \n      case 'video':\n        return `<div style=\"text-align: ${comp.props.align || 'center'}; padding: 10px;\"><video src=\"${comp.props.src}\" poster=\"${comp.props.poster || ''}\" controls style=\"width: ${comp.props.width || '100%'}; height: ${comp.props.height || 'auto'}; max-width: 100%; border-radius: 4px;\">Your email client does not support video playback.</video></div>`;\n      \n      case 'html':\n        return `<div style=\"padding: ${comp.props.padding || '10px'};\">${comp.props.html || comp.props.code || ''}</div>`;\n      \n      case 'columns':\n        const columnCount = comp.props.columnCount || 2;\n        const columns = [];\n        for (let i = 1; i <= columnCount; i++) {\n          const columnKey = `column${i}` as keyof typeof comp;\n          const columnComponents = (comp[columnKey] as EmailComponent[]) || [];\n          const columnContent = columnComponents.map(componentToHTML).join('');\n          columns.push(`<td style=\"vertical-align: top; padding: 10px;\">${columnContent}</td>`);\n        }\n        return `<table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr>${columns.join('')}</tr></table>`;\n      \n      case 'section':\n        const children = (comp.children || []).map(componentToHTML).join('');\n        return `<div style=\"background-color: ${comp.props.backgroundColor || 'transparent'}; padding: ${comp.props.padding || '20px'};\">${children}</div>`;\n      \n      default:\n        return '';\n    }\n  };\n\n  const body = components.map(componentToHTML).join('\\n');\n  \n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Email Template</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: ${designSystem.typography.fontFamily}; background-color: ${designSystem.colors.background};\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: ${designSystem.colors.background};\">\n    <tr>\n      <td align=\"center\" style=\"padding: 20px 0;\">\n        <table width=\"${designSystem.containerWidth}\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"max-width: ${designSystem.containerWidth}; background-color: #ffffff;\">\n          <tr>\n            <td>\n              ${body}\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`;\n};\n\nexport const ExportModal: React.FC<ExportModalProps> = ({ onClose, apiEndpoint }) => {\n  const { components, template, designSystem } = useEmailEditor();\n  const [status, setStatus] = React.useState<string>('');\n  const [mjmlCode, setMjmlCode] = React.useState<string>('');\n  const [htmlCode, setHtmlCode] = React.useState<string>('');\n  const [isGenerating, setIsGenerating] = React.useState(false);\n\n  // Use public MJML API if no endpoint provided\n  const effectiveApiEndpoint = apiEndpoint || 'https://api.mjml.io/v1/render';\n  const converterRef = React.useRef(new MJMLConverter(effectiveApiEndpoint));\n\n  const generate = async () => {\n    setIsGenerating(true);\n    setStatus('Generating MJML...');\n    try {\n      const mjml = converterRef.current.templateToMJML({ name: template.name || 'Email', components });\n      setMjmlCode(mjml);\n      setStatus('Converting to HTML...');\n      let html = '';\n      try {\n        // Try API conversion first\n        if (effectiveApiEndpoint && effectiveApiEndpoint !== 'https://api.mjml.io/v1/render') {\n          html = await converterRef.current.mjmlToHTML(mjml);\n        } else {\n          // Fallback: Generate basic HTML directly from components\n          html = generateBasicHTML(components, designSystem);\n        }\n      } catch (err: any) {\n        log.warn('API conversion failed, using basic HTML generation:', err?.message || err);\n        html = generateBasicHTML(components, designSystem);\n      }\n      setHtmlCode(html);\n      setStatus('Done');\n    } catch (e: any) {\n      setStatus('Error: ' + e.message);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  React.useEffect(() => {\n    generate();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const copy = (value: string, label: string) => {\n    navigator.clipboard.writeText(value).then(() => {\n      setStatus(`${label} copied to clipboard`);\n    }).catch(err => setStatus(`Failed to copy ${label}: ${err.message}`));\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        background: 'rgba(0,0,0,0.6)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\n      }}\n      onClick={onClose}\n    >\n      <div\n        style={{\n          background: 'var(--eb-surface)', borderRadius: 12, padding: 24, width: '90%', maxWidth: 900,\n          maxHeight: '80vh', overflowY: 'auto', boxShadow: 'var(--eb-shadow-lg)', color: 'var(--eb-text)'\n        }}\n        onClick={e => e.stopPropagation()}\n      >\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\n          <h2 style={{ margin: 0, fontSize: 22, color: 'var(--eb-text)' }}>Export Template</h2>\n          <button onClick={onClose} style={{ background: 'none', border: 'none', fontSize: 26, cursor: 'pointer', color: 'var(--eb-muted)' }}></button>\n        </div>\n        <p style={{ marginTop: 0, fontSize: 13, color: 'var(--eb-text-secondary)' }}>Generate MJML, HTML, and plain text versions of your email. (HTML requires MJML runtime server-side or API endpoint; browser fallback may not inline styles.)</p>\n        <div style={{ marginBottom: 10, fontSize: 12, color: isGenerating ? 'var(--eb-accent)' : 'var(--eb-muted)' }}>{status}</div>\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit,minmax(250px,1fr))', gap: 12, marginBottom: 16 }}>\n          <button disabled={!mjmlCode} onClick={() => copy(mjmlCode, 'MJML')} style={{ padding: '10px 14px', background: mjmlCode ? '#6610f2' : 'var(--eb-surface-hover)', color: mjmlCode ? 'white' : 'var(--eb-muted)', border: 'none', borderRadius: 6, cursor: mjmlCode ? 'pointer' : 'not-allowed', fontWeight: 'bold', fontSize: 13 }}>Copy MJML</button>\n          <button disabled={!htmlCode} onClick={() => copy(htmlCode, 'HTML')} style={{ padding: '10px 14px', background: htmlCode ? '#20c997' : 'var(--eb-surface-hover)', color: htmlCode ? 'white' : 'var(--eb-muted)', border: 'none', borderRadius: 6, cursor: htmlCode ? 'pointer' : 'not-allowed', fontWeight: 'bold', fontSize: 13 }}>Copy HTML</button>\n          <button onClick={generate} disabled={isGenerating} style={{ padding: '10px 14px', background: isGenerating ? 'var(--eb-surface-hover)' : 'var(--eb-warning)', color: isGenerating ? 'var(--eb-muted)' : '#212529', border: 'none', borderRadius: 6, cursor: 'pointer', fontWeight: 'bold', fontSize: 13 }}>{isGenerating ? 'Regenerating...' : 'Regenerate'}</button>\n        </div>\n        <details style={{ marginBottom: 14 }}>\n          <summary style={{ cursor: 'pointer', fontWeight: 'bold', fontSize: 14, color: 'var(--eb-text)' }}>MJML Output</summary>\n          <pre style={{ background: 'var(--eb-surface-raised)', padding: 12, borderRadius: 6, fontSize: 12, overflowX: 'auto', color: 'var(--eb-text)', border: '1px solid var(--eb-border)' }}>{mjmlCode}</pre>\n        </details>\n        <details style={{ marginBottom: 14 }}>\n          <summary style={{ cursor: 'pointer', fontWeight: 'bold', fontSize: 14, color: 'var(--eb-text)' }}>HTML Output</summary>\n          <pre style={{ background: 'var(--eb-surface-raised)', padding: 12, borderRadius: 6, fontSize: 12, overflowX: 'auto', color: 'var(--eb-text)', border: '1px solid var(--eb-border)' }}>{htmlCode}</pre>\n        </details>\n      </div>\n    </div>\n  );\n};","/**\n * Email Builder Component\n */\n\nimport React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { EmailEditorProvider, useEmailEditor, generateComponentId } from './EmailEditorContext';\nimport { DropFeedbackProvider } from './DropFeedback';\nimport { ComponentToolbar } from './ComponentToolbar';\nimport { DraggableComponent } from './DraggableComponent';\nimport { useDrop } from 'react-dnd';\nimport { ItemTypes, componentTemplates } from './ComponentToolbar';\nimport { EmailComponent, ComponentType, log, MJMLConverter } from '@kaptha/email-editor-core';\nimport { ComponentRenderer } from './ComponentRenderer';\nimport { PropertyEditor } from './PropertyEditor';\nimport { CanvasDropZone } from './CanvasDropZone';\nimport { TemplateSelector } from './TemplateSelector';\nimport { DesignSystemPanel } from './DesignSystemPanel';\n// import { SavedBlocksPanel } from './SavedBlocksPanel'; // Removed: Blocks feature\nimport { ExportModal } from './ExportModal';\nimport './EmailEditor.css';\nimport { EmailTemplate, emailTemplates } from '@kaptha/email-editor-core';\nimport {\n  Monitor,\n  Tablet,\n  Smartphone,\n  Palette,\n  // Package, // Removed: Blocks feature\n  FileText,\n  Download,\n  Sun,\n  Moon,\n  Undo2,\n  Redo2,\n  ChevronDown,\n  ChevronLeft,\n  ChevronRight,\n  Eye,\n  Edit3\n} from 'lucide-react';\n\nexport interface EmailEditorHandle {\n  loadDesign: (design: { components: EmailComponent[] }) => void;\n  saveDesign: () => { components: EmailComponent[] };\n  exportHtml: () => Promise<{ html: string; mjml: string }>;\n  exportMjml: () => string;\n  exportJson: () => { components: EmailComponent[] };\n}\n\ninterface EmailEditorProps {\n  initialTemplate?: EmailTemplate;\n  onSave?: (template: EmailTemplate) => void;\n  onChange?: (components: any[]) => void;\n  height?: string;\n  style?: React.CSSProperties;\n}\n\nconst EmailEditorContent: React.FC<Pick<EmailEditorProps, 'onSave' | 'onChange' | 'height' | 'style'>> = ({\n  onSave,\n  onChange,\n  height = '100vh',\n  style,\n}) => {\n  const { components, template, setComponents, undo, redo, canUndo, canRedo, setTemplate, designSystem, setDesignSystem, selectedComponent, setSelectedComponent } = useEmailEditor();\n  const [showTemplateSelector, setShowTemplateSelector] = useState(false);\n  const [showDesignSystemPanel, setShowDesignSystemPanel] = useState(false);\n  const [viewportMode, setViewportMode] = useState<'desktop' | 'tablet' | 'mobile'>('desktop');\n  const [selectedViewport, setSelectedViewport] = useState<string>('desktop-600');\n  const [showViewportDropdown, setShowViewportDropdown] = useState(false);\n  // const [showSavedBlocksPanel, setShowSavedBlocksPanel] = useState(false); // Removed: Blocks feature\n  const [showExportModal, setShowExportModal] = useState(false);\n  const [theme, setTheme] = useState<'dark' | 'light'>('light');\n  const [isSidebarContentVisible, setIsSidebarContentVisible] = useState(true);\n  const [isPreviewMode, setIsPreviewMode] = useState(false);\n\n  React.useEffect(() => {\n    if (onChange) {\n      onChange(components);\n    }\n  }, [components, onChange]);\n\n  // Close viewport dropdown when clicking outside\n  React.useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (showViewportDropdown) {\n        setShowViewportDropdown(false);\n      }\n    };\n\n    if (showViewportDropdown) {\n      document.addEventListener('click', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [showViewportDropdown]);\n\n  // Keyboard shortcuts for undo/redo\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'z') {\n        e.preventDefault();\n        if (e.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [undo, redo]);\n\n  // Handle custom addComponent event from toolbar\n  React.useEffect(() => {\n    const handleAddComponent = (e: Event) => {\n      const customEvent = e as CustomEvent;\n      const { type, sectionConfig } = customEvent.detail;\n      \n      log.debug('[EmailEditor] handleAddComponent:', { type, sectionConfig });\n\n      const template = componentTemplates[type as ComponentType];\n      if (!template) {\n        log.error('[EmailEditor] No template found for type:', type);\n        return;\n      }\n\n      let newComponent: EmailComponent = {\n        ...template,\n        id: generateComponentId(),\n        type: type as ComponentType,\n      } as EmailComponent;\n\n      // Apply section config if provided\n      if (sectionConfig && type === 'columns') {\n        log.debug('[EmailEditor] Applying section config:', sectionConfig);\n        newComponent = {\n          ...newComponent,\n          props: {\n            ...newComponent.props,\n            ...sectionConfig,\n          },\n          column1: [],\n          column2: [],\n          column3: sectionConfig.columnCount >= 3 ? [] : undefined,\n          column4: sectionConfig.columnCount >= 4 ? [] : undefined,\n        } as any;\n      }\n\n      log.debug('[EmailEditor] Adding component:', newComponent);\n      setComponents([...components, newComponent]);\n    };\n\n    window.addEventListener('addComponent', handleAddComponent);\n    return () => window.removeEventListener('addComponent', handleAddComponent);\n  }, [components, setComponents]);\n\n  const handleTemplateSelect = (selectedTemplate: EmailTemplate) => {\n    setTemplate(selectedTemplate);\n    setShowTemplateSelector(false);\n  };\n\n  // Comprehensive viewport options\n  const viewportOptions = {\n    desktop: [\n      { id: 'desktop-600', name: 'Email Standard', width: '600px', description: 'Standard email width' },\n      { id: 'desktop-1920', name: 'Full HD (1920px)', width: '1920px', description: 'Desktop 1920x1080' },\n      { id: 'desktop-1440', name: 'Laptop L (1440px)', width: '1440px', description: 'Desktop 1440x900' },\n      { id: 'desktop-1280', name: 'Laptop (1280px)', width: '1280px', description: 'Desktop 1280x800' },\n      { id: 'desktop-1024', name: 'Laptop S (1024px)', width: '1024px', description: 'Desktop 1024x768' },\n    ],\n    tablet: [\n      { id: 'tablet-768', name: 'iPad (768px)', width: '768px', description: 'iPad Portrait' },\n      { id: 'tablet-1024', name: 'iPad Pro (1024px)', width: '1024px', description: 'iPad Pro Portrait' },\n      { id: 'tablet-834', name: 'iPad Air (834px)', width: '834px', description: 'iPad Air Portrait' },\n      { id: 'tablet-820', name: 'Galaxy Tab S8 (820px)', width: '820px', description: 'Samsung Galaxy Tab S8' },\n      { id: 'tablet-800', name: 'Galaxy Tab A (800px)', width: '800px', description: 'Samsung Galaxy Tab A' },\n      { id: 'tablet-810', name: 'Pixel Tablet (810px)', width: '810px', description: 'Google Pixel Tablet' },\n      { id: 'tablet-600', name: 'Tablet S (600px)', width: '600px', description: 'Small Tablet' },\n    ],\n    mobile: [\n      { id: 'mobile-393', name: 'Pixel 7 (393px)', width: '393px', description: 'Google Pixel 7/7 Pro' },\n      { id: 'mobile-412', name: 'Pixel 6 (412px)', width: '412px', description: 'Google Pixel 6' },\n      { id: 'mobile-360', name: 'Galaxy S20 (360px)', width: '360px', description: 'Samsung Galaxy S20' },\n      { id: 'mobile-384', name: 'Galaxy S21 (384px)', width: '384px', description: 'Samsung Galaxy S21' },\n      { id: 'mobile-390', name: 'iPhone 12/13 (390px)', width: '390px', description: 'iPhone 12, 13 Pro' },\n      { id: 'mobile-375', name: 'iPhone SE (375px)', width: '375px', description: 'iPhone SE, 6, 7, 8' },\n      { id: 'mobile-414', name: 'iPhone Plus (414px)', width: '414px', description: 'iPhone 6+, 7+, 8+' },\n      { id: 'mobile-428', name: 'iPhone 14 Pro Max (428px)', width: '428px', description: 'iPhone 14 Pro Max' },\n      { id: 'mobile-430', name: 'Galaxy S22+ (430px)', width: '430px', description: 'Samsung Galaxy S22+' },\n      { id: 'mobile-320', name: 'Mobile S (320px)', width: '320px', description: 'Small Mobile' },\n    ],\n  };\n\n  // Get current viewport width\n  const getCurrentViewportWidth = () => {\n    const allOptions = [...viewportOptions.desktop, ...viewportOptions.tablet, ...viewportOptions.mobile];\n    const current = allOptions.find(opt => opt.id === selectedViewport);\n    return current?.width || '600px';\n  };\n\n  // Get current viewport info\n  const getCurrentViewportInfo = () => {\n    const allOptions = [...viewportOptions.desktop, ...viewportOptions.tablet, ...viewportOptions.mobile];\n    return allOptions.find(opt => opt.id === selectedViewport);\n  };\n\n  const handleSave = () => {\n    const templateData = {\n      ...template,\n      components,\n      designSystem,\n      updatedAt: new Date().toISOString(),\n      version: '1.0.0',\n    };\n\n    // Log to console\n    console.log('=== Email Template Data ===');\n    console.log(JSON.stringify(templateData, null, 2));\n    console.log('===========================');\n\n    // If onSave callback provided, use it\n    if (onSave) {\n      onSave(templateData as any);\n    }\n  };\n\n  // Debug theme changes\n  React.useEffect(() => {\n    log.debug('[EmailEditor] Theme changed to:', theme);\n    log.debug('[EmailEditor] Root className will be:', `eb-root ${theme}`);\n  }, [theme]);\n\n  return (\n    <div\n      className={`eb-root ${theme}`}\n      style={{\n        display: 'grid',\n        gridTemplateColumns: isSidebarContentVisible ? '33% 67%' : 'auto 1fr',\n        height,\n        backgroundColor: 'var(--eb-bg)',\n        color: 'var(--eb-text)',\n        ...style,\n      }}\n    >\n      {/* Sidebar */}\n      <div\n        className=\"eb-panel\"\n        style={{\n          borderRight: '1px solid var(--eb-border)',\n          overflowY: 'hidden',\n          position: 'relative',\n          display: 'flex',\n          flexDirection: 'column'\n        }}\n      >\n        <div style={{ flex: 1, overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>\n          <ComponentToolbar onContentVisibilityChange={setIsSidebarContentVisible} />\n        </div>\n        {selectedComponent && (\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 48,\n              background: 'var(--eb-surface)',\n              zIndex: 100,\n              overflowY: 'auto',\n              borderRight: '1px solid var(--eb-border)',\n              display: 'flex',\n              flexDirection: 'column'\n            }}\n          >\n            <PropertyEditor />\n          </div>\n        )}\n        {isSidebarContentVisible && (\n          <div\n             style={{\n               height: '48px',\n               padding: '10px 12px',\n               borderTop: '1px solid var(--eb-border)',\n               background: 'var(--eb-surface)',\n               fontSize: '11px',\n               textAlign: 'center',\n               letterSpacing: '0.5px',\n               color: 'var(--eb-text-secondary)',\n               display: 'flex',\n               alignItems: 'center',\n               justifyContent: 'center',\n               flexShrink: 0\n             }}\n           >\n             Powered by <a href=\"https://actovision.com\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ fontWeight: 600, color: 'var(--eb-text)', textDecoration: 'none' }}>Actovision</a>\n           </div>\n        )}\n      </div>\n\n      {/* Canvas + Action Bar */}\n      <div\n        className=\"eb-canvas\"\n        style={{\n          padding: '0',\n          overflowY: 'auto',\n          position: 'relative',\n          display: 'flex',\n          flexDirection: 'column'\n        }}\n        onClick={() => setSelectedComponent(null)}\n      >\n        {/* Action Bar */}\n        <div style={{\n          padding: '12px 20px',\n          borderBottom: '1px solid var(--eb-border)',\n          background: 'var(--eb-surface-raised)',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          gap: '16px'\n        }}>\n          {/* Left cluster: viewport controls */}\n          <div style={{ display: 'flex', gap: '6px', alignItems: 'center', background: 'var(--eb-surface)', padding: '6px', borderRadius: 'var(--eb-radius-sm)', border: '1px solid var(--eb-border)', position: 'relative' }}>\n            <button onClick={() => { setViewportMode('desktop'); setSelectedViewport('desktop-600'); }} title=\"Desktop\" style={{ padding: '8px', background: viewportMode === 'desktop' ? 'var(--eb-accent)' : 'transparent', color: viewportMode === 'desktop' ? 'white' : 'var(--eb-text-secondary)', border: '1px solid ' + (viewportMode === 'desktop' ? 'var(--eb-accent)' : 'transparent'), borderRadius: 'var(--eb-radius-xs)', cursor: 'pointer' }}><Monitor size={16} /></button>\n            <button onClick={() => { setViewportMode('tablet'); setSelectedViewport('tablet-768'); }} title=\"Tablet\" style={{ padding: '8px', background: viewportMode === 'tablet' ? 'var(--eb-accent)' : 'transparent', color: viewportMode === 'tablet' ? 'white' : 'var(--eb-text-secondary)', border: '1px solid ' + (viewportMode === 'tablet' ? 'var(--eb-accent)' : 'transparent'), borderRadius: 'var(--eb-radius-xs)', cursor: 'pointer' }}><Tablet size={16} /></button>\n            <button onClick={() => { setViewportMode('mobile'); setSelectedViewport('mobile-393'); }} title=\"Mobile\" style={{ padding: '8px', background: viewportMode === 'mobile' ? 'var(--eb-accent)' : 'transparent', color: viewportMode === 'mobile' ? 'white' : 'var(--eb-text-secondary)', border: '1px solid ' + (viewportMode === 'mobile' ? 'var(--eb-accent)' : 'transparent'), borderRadius: 'var(--eb-radius-xs)', cursor: 'pointer' }}><Smartphone size={16} /></button>\n            <div style={{ width: 1, height: 24, background: 'var(--eb-border)' }} />\n            <div style={{ position: 'relative' }}>\n              <button onClick={(e) => { e.stopPropagation(); setShowViewportDropdown(!showViewportDropdown); }} style={{ padding: '8px 12px', background: 'transparent', color: 'var(--eb-text)', border: 'none', borderRadius: 'var(--eb-radius-xs)', cursor: 'pointer', fontSize: '12px', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '6px', minWidth: '140px' }}>\n                <span>{getCurrentViewportInfo()?.name || 'Select size'}</span>\n                <ChevronDown size={14} />\n              </button>\n              {showViewportDropdown && (\n                <div className=\"eb-panel\" style={{ position: 'absolute', top: 'calc(100% + 8px)', left: 0, minWidth: '280px', maxHeight: '400px', overflowY: 'auto', zIndex: 10000, padding: '8px', borderRadius: 'var(--eb-radius-sm)', border: '1px solid var(--eb-border)', boxShadow: '0 10px 40px rgba(0,0,0,0.3)' }} onClick={(e) => e.stopPropagation()}>\n                  {viewportOptions[viewportMode].map((option) => (\n                    <button key={option.id} onClick={() => { setSelectedViewport(option.id); setShowViewportDropdown(false); }} style={{ width: '100%', padding: '10px 12px', background: selectedViewport === option.id ? 'var(--eb-accent)' : 'transparent', color: selectedViewport === option.id ? 'white' : 'var(--eb-text)', border: 'none', borderRadius: 'var(--eb-radius-xs)', cursor: 'pointer', fontSize: '13px', textAlign: 'left', transition: 'var(--eb-transition)', marginBottom: '4px' }}>\n                      <div style={{ fontWeight: 600 }}>{option.name}</div>\n                      <div style={{ fontSize: '11px', opacity: 0.8, marginTop: '2px' }}>{option.description}</div>\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n          {/* Right cluster: actions */}\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flexWrap: 'wrap' }}>\n            <button onClick={() => setIsPreviewMode(!isPreviewMode)} style={{ padding: '10px 18px', background: isPreviewMode ? 'var(--eb-accent)' : 'var(--eb-surface-raised)', color: isPreviewMode ? 'white' : 'var(--eb-text)', border: '1px solid ' + (isPreviewMode ? 'var(--eb-accent)' : 'var(--eb-border-strong)'), borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer', fontSize: '13px', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '6px' }}>{isPreviewMode ? <><Edit3 size={16} />Edit</> : <><Eye size={16} />Preview</>}</button>\n            <button onClick={() => setShowTemplateSelector(true)} style={{ padding: '10px 18px', background: 'var(--eb-warning)', color: 'white', border: 'none', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer', fontSize: '13px', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '6px' }}><FileText size={16} />Templates</button>\n            <button onClick={() => setShowExportModal(true)} style={{ padding: '10px 18px', background: 'var(--eb-surface-raised)', color: 'var(--eb-text)', border: '1px solid var(--eb-border-strong)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer', fontSize: '13px', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '6px' }}><Download size={16} />Export</button>\n            <button onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')} title={`Switch to ${theme === 'dark' ? 'light' : 'dark'} theme`} style={{ padding: '10px', background: 'var(--eb-surface-raised)', color: 'var(--eb-text)', border: '1px solid var(--eb-border-strong)', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer', display: 'flex', alignItems: 'center' }}>{theme === 'dark' ? <Sun size={18} /> : <Moon size={18} />}</button>\n            <button onClick={undo} disabled={!canUndo} title=\"Undo (Cmd+Z)\" style={{ padding: '10px', background: canUndo ? 'var(--eb-surface-raised)' : 'var(--eb-surface)', color: canUndo ? 'var(--eb-text)' : 'var(--eb-muted)', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: canUndo ? 'pointer' : 'not-allowed', opacity: canUndo ? 1 : 0.5, display: 'flex', alignItems: 'center' }}><Undo2 size={18} /></button>\n            <button onClick={redo} disabled={!canRedo} title=\"Redo (Cmd+Shift+Z)\" style={{ padding: '10px', background: canRedo ? 'var(--eb-surface-raised)' : 'var(--eb-surface)', color: canRedo ? 'var(--eb-text)' : 'var(--eb-muted)', border: '1px solid var(--eb-border)', borderRadius: 'var(--eb-radius-sm)', cursor: canRedo ? 'pointer' : 'not-allowed', opacity: canRedo ? 1 : 0.5, display: 'flex', alignItems: 'center' }}><Redo2 size={18} /></button>\n            {onSave && (\n              <button onClick={handleSave} style={{ padding: '10px 24px', background: 'var(--eb-success)', color: 'white', border: 'none', borderRadius: 'var(--eb-radius-sm)', cursor: 'pointer', fontSize: '14px', fontWeight: 700 }}>Save</button>\n            )}\n          </div>\n        </div>\n        {/* Viewport indicator */}\n        <div style={{ textAlign: 'center', margin: '10px 0 0', fontSize: '12px', color: 'var(--eb-text-secondary)', fontWeight: 600 }}>\n          {getCurrentViewportInfo() && (\n            <>\n              {viewportMode === 'desktop' && ' '}\n              {viewportMode === 'tablet' && ' '}\n              {viewportMode === 'mobile' && ' '}\n              {getCurrentViewportInfo()?.name}\n            </>\n          )}\n        </div>\n        {/* Canvas drop zone */}\n        <div style={{ \n          padding: '20px', \n          flex: 1,\n          backgroundImage: isPreviewMode ? 'none' : 'linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px)',\n          backgroundSize: '20px 20px',\n          backgroundPosition: 'center center'\n        }}>\n          {/* Outer 90% canvas - droppable with design system background */}\n          {isPreviewMode ? (\n            // Preview mode: clean render without drag/drop\n            <div style={{\n              width: '90%',\n              margin: '0 auto',\n              backgroundColor: designSystem.colors.background,\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              minHeight: '500px',\n              padding: '20px',\n              transition: 'all 0.2s',\n            }}>\n              <div style={{\n                width: getCurrentViewportWidth(),\n                maxWidth: designSystem.containerWidth,\n                margin: '0 auto',\n                minHeight: '400px',\n              }}>\n                {components.length === 0 ? (\n                  <div style={{ padding: '60px 20px', textAlign: 'center', color: '#6c757d' }}>\n                    <p style={{ fontSize: '18px', marginBottom: '10px' }}>No content to preview</p>\n                    <p style={{ fontSize: '14px' }}>Exit preview mode to add components</p>\n                  </div>\n                ) : (\n                  components.map((component) => (\n                    <div key={component.id} style={{ marginBottom: '8px' }}>\n                      <ComponentRenderer component={component} />\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          ) : (\n            // Edit mode: draggable components\n            <CanvasDropZone>\n              {/* Inner wrapper constrained by selected viewport width */}\n              <div style={{\n                width: getCurrentViewportWidth(),\n                maxWidth: designSystem.containerWidth,\n                margin: '0 auto',\n                minHeight: '400px',\n              }}>\n                {components.length === 0 ? (\n                  <div style={{ padding: '60px 20px', textAlign: 'center', color: '#6c757d' }}>\n                    <p style={{ fontSize: '18px', marginBottom: '10px' }}>Start building your email</p>\n                    <p style={{ fontSize: '14px' }}>Drag components from the sidebar or click to add</p>\n                  </div>\n                ) : (\n                  components.map((component, index) => (\n                    <React.Fragment key={component.id}>\n                      <InsertionZone insertIndex={index} />\n                      <DraggableComponent component={component} index={index}>\n                        <ComponentRenderer component={component} />\n                      </DraggableComponent>\n                      {index === components.length - 1 && <InsertionZone insertIndex={components.length} />}\n                    </React.Fragment>\n                  ))\n                )}\n              </div>\n            </CanvasDropZone>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showTemplateSelector && (\n        <TemplateSelector templates={emailTemplates} onSelect={handleTemplateSelect} onClose={() => setShowTemplateSelector(false)} />\n      )}\n      {showDesignSystemPanel && (\n        <DesignSystemPanel designSystem={designSystem} onUpdate={setDesignSystem} onClose={() => setShowDesignSystemPanel(false)} />\n      )}\n      {showExportModal && (<ExportModal onClose={() => setShowExportModal(false)} />)}\n    </div>\n  );\n};\n\n// Lightweight inline drop zone for inserting before/after components\nconst InsertionZone: React.FC<{ insertIndex: number }> = ({ insertIndex }) => {\n  const { addComponent, insertSavedBlock } = useEmailEditor();\n  const [{ isOver }, drop] = useDrop({\n    accept: ItemTypes.NEW_COMPONENT,\n    drop: (item: any) => {\n      if (item.savedBlockId) {\n        insertSavedBlock(item.savedBlockId, insertIndex);\n        return;\n      }\n      \n      // Handle section config\n      if (item.sectionConfig) {\n        const template = componentTemplates.columns;\n        const newComponent: EmailComponent = {\n          ...template,\n          id: generateComponentId(),\n          props: {\n            ...template.props,\n            ...item.sectionConfig,\n          },\n          column1: [],\n          column2: [],\n          column3: item.sectionConfig.columnCount >= 3 ? [] : undefined,\n          column4: item.sectionConfig.columnCount >= 4 ? [] : undefined,\n        } as any;\n        addComponent(newComponent, insertIndex);\n        return;\n      }\n      \n      const type = item.componentType as ComponentType;\n      const template = componentTemplates[type];\n      if (!template) return;\n      const newComponent: EmailComponent = {\n        id: generateComponentId(),\n        type,\n        props: template.props || {},\n        ...(template.children !== undefined && { children: template.children }),\n      };\n      addComponent(newComponent, insertIndex);\n    },\n    collect: monitor => ({ isOver: monitor.isOver() }),\n  });\n  return (\n    <div\n      ref={drop as any}\n      style={{\n        height: 8,\n        margin: '4px 0',\n        borderRadius: 4,\n        background: isOver ? '#007bff' : 'transparent',\n        transition: 'background 0.15s',\n      }}\n    />\n  );\n};\n\nconst EmailEditorWithRef = forwardRef<EmailEditorHandle, EmailEditorProps>(({\n  initialTemplate,\n  onSave,\n  onChange,\n  height = '100vh',\n  style,\n}, ref) => {\n  const editorRef = React.useRef<EmailEditorHandle | null>(null);\n\n  // Expose methods via ref\n  useImperativeHandle(ref, () => ({\n    loadDesign: (design: { components: EmailComponent[] }) => {\n      editorRef.current?.loadDesign(design);\n    },\n    saveDesign: () => {\n      return editorRef.current?.saveDesign() || { components: [] };\n    },\n    exportHtml: async () => {\n      return editorRef.current?.exportHtml() || { html: '', mjml: '' };\n    },\n    exportMjml: () => {\n      return editorRef.current?.exportMjml() || '';\n    },\n    exportJson: () => {\n      return editorRef.current?.exportJson() || { components: [] };\n    }\n  }));\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DropFeedbackProvider>\n        <EmailEditorProvider {...(initialTemplate && { initialTemplate })}>\n          <EmailEditorContentWithMethods\n            ref={editorRef}\n            {...(onSave && { onSave })}\n            {...(onChange && { onChange })}\n            height={height}\n            {...(style && { style })}\n          />\n        </EmailEditorProvider>\n      </DropFeedbackProvider>\n    </DndProvider>\n  );\n});\n\nEmailEditorWithRef.displayName = 'EmailEditor';\n\nexport const EmailEditor = EmailEditorWithRef;\n\nconst EmailEditorContentWithMethods = forwardRef<EmailEditorHandle, Pick<EmailEditorProps, 'onSave' | 'onChange' | 'height' | 'style'>>((props, ref) => {\n  const { components, setComponents, designSystem } = useEmailEditor();\n  const mjmlConverter = React.useMemo(() => new MJMLConverter(), []);\n\n  useImperativeHandle(ref, () => ({\n    loadDesign: (design: { components: EmailComponent[] }) => {\n      setComponents(design.components);\n    },\n    saveDesign: () => {\n      return { components };\n    },\n    exportHtml: async () => {\n      const mjml = mjmlConverter.templateToMJML({ name: 'Export', components });\n      const html = await mjmlConverter.mjmlToHTML(mjml);\n      return { html, mjml };\n    },\n    exportMjml: () => {\n      return mjmlConverter.templateToMJML({ name: 'Export', components });\n    },\n    exportJson: () => {\n      return { components };\n    }\n  }));\n\n  return <EmailEditorContent {...props} />;\n});\n\nEmailEditorContentWithMethods.displayName = 'EmailEditorContentWithMethods';\n","import React from 'react';\nimport { useDrag } from 'react-dnd';\nimport { useEmailEditor, SavedBlockEntry } from './EmailEditorContext';\nimport { ItemTypes } from './ComponentToolbar';\n\ninterface SavedBlocksPanelProps { onClose: () => void; }\n\nconst BlockDraggable: React.FC<{ block: SavedBlockEntry; onDelete: (id: string) => void; onRename: (id: string, name: string) => void; }> = ({ block, onDelete, onRename }) => {\n  const [isEditing, setIsEditing] = React.useState(false);\n  const [tempName, setTempName] = React.useState(block.name);\n  const [{ isDragging }, drag] = useDrag({\n    type: ItemTypes.NEW_COMPONENT,\n    item: { savedBlockId: block.id, restoreMultiple: true },\n    collect: monitor => ({ isDragging: monitor.isDragging() }),\n  });\n\n  const commitRename = () => {\n    if (tempName.trim() && tempName !== block.name) {\n      onRename(block.id, tempName.trim());\n    }\n    setIsEditing(false);\n  };\n\n  return (\n    <li ref={drag as any} style={{ border: '1px solid var(--eb-border)', borderRadius: 4, padding: 10, background: 'var(--eb-surface)', position: 'relative', opacity: isDragging ? 0.5 : 1, cursor: 'grab' }}>\n      <div style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n        {isEditing ? (\n          <input\n            value={tempName}\n            onChange={e => setTempName(e.target.value)}\n            onBlur={commitRename}\n            onKeyDown={e => { if (e.key === 'Enter') commitRename(); if (e.key === 'Escape') { setTempName(block.name); setIsEditing(false); } }}\n            autoFocus\n            style={{ flex: 1, padding: '4px 6px', fontSize: 12, border: '1px solid var(--eb-border)', borderRadius: 4, background: 'var(--eb-background)', color: 'var(--eb-text)' }}\n          />\n        ) : (\n          <strong style={{ fontSize: 13, flex: 1, color: 'var(--eb-text)' }} onDoubleClick={() => setIsEditing(true)} title=\"Double-click to rename\">{block.name}</strong>\n        )}\n        <button onClick={() => onDelete(block.id)} style={{ background: 'var(--eb-danger)', color: 'white', border: 'none', borderRadius: 4, padding: '4px 8px', cursor: 'pointer', fontSize: 11 }}>Delete</button>\n      </div>\n      <div style={{ fontSize: 11, color: 'var(--eb-text-secondary)', marginTop: 4 }}>Saved {new Date(block.createdAt).toLocaleString()}  {block.components.length} components</div>\n      {/* Simple preview: list component types */}\n      <div style={{ marginTop: 6, display: 'flex', flexWrap: 'wrap', gap: 4 }}>\n        {block.components.slice(0, 6).map(c => (\n          <span key={c.id} style={{ background: 'var(--eb-muted)', borderRadius: 3, padding: '2px 4px', fontSize: 10, color: 'var(--eb-text)' }}>{c.type}</span>\n        ))}\n        {block.components.length > 6 && (\n          <span style={{ fontSize: 10, color: 'var(--eb-text-secondary)' }}>+{block.components.length - 6} more</span>\n        )}\n      </div>\n      <p style={{ fontSize: 10, color: 'var(--eb-text-secondary)', marginTop: 6 }}>Drag onto canvas to restore.</p>\n    </li>\n  );\n};\n\nexport const SavedBlocksPanel: React.FC<SavedBlocksPanelProps> = ({ onClose }) => {\n  const { components, selectedComponent, savedBlocks, addSavedBlock, removeSavedBlock, renameSavedBlock } = useEmailEditor();\n  const [newName, setNewName] = React.useState('');\n  const [search, setSearch] = React.useState('');\n\n  const filtered = savedBlocks.filter(b => b.name.toLowerCase().includes(search.toLowerCase()));\n\n  const saveCurrent = (onlySelected: boolean) => {\n    if (!newName.trim()) return;\n    const comps = onlySelected && selectedComponent ? components.filter(c => c.id === selectedComponent) : components;\n    addSavedBlock(newName.trim(), comps);\n    setNewName('');\n  };\n\n  const handleRename = (id: string, name: string) => {\n    renameSavedBlock(id, name);\n  };\n\n  return (\n    <div className=\"eb-panel\">\n      <div className=\"eb-panel-header\" style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n        <h3 style={{ margin: 0, color: 'var(--eb-text)' }}>Saved Blocks</h3>\n        <div style={{ marginLeft: 'auto', display: 'flex', gap: 6 }}>\n          <button onClick={onClose} style={{ padding: '6px 10px', background: 'var(--eb-muted)', color: 'var(--eb-text)', border: '1px solid var(--eb-border)', borderRadius: 8, fontWeight: 'bold', cursor: 'pointer', fontSize: 12 }}>Close</button>\n        </div>\n      </div>\n      <div className=\"eb-panel-body\">\n      <div style={{ display: 'flex', gap: 6, marginBottom: 10 }}>\n        <input\n          value={newName}\n          onChange={e => setNewName(e.target.value)}\n          placeholder={selectedComponent ? 'Name (selected component)' : 'Name (all components)'}\n          style={{ flex: 1, padding: '6px 8px', border: '1px solid var(--eb-border)', borderRadius: 8, background: 'var(--eb-surface)', color: 'var(--eb-text)' }}\n        />\n        <button onClick={() => saveCurrent(false)} style={{ padding: '6px 10px', background: 'var(--eb-success)', color: 'white', border: 'none', borderRadius: 8, fontWeight: 'bold', cursor: 'pointer', fontSize: 12 }}>Save All</button>\n        <button disabled={!selectedComponent} onClick={() => saveCurrent(true)} style={{ padding: '6px 10px', background: selectedComponent ? 'var(--eb-info)' : 'var(--eb-muted)', color: 'white', border: 'none', borderRadius: 8, fontWeight: 'bold', cursor: selectedComponent ? 'pointer' : 'not-allowed', fontSize: 12 }}>Save Selected</button>\n      </div>\n      <div style={{ marginBottom: 12 }}>\n        <input\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n          placeholder=\"Search blocks...\"\n          style={{ width: '100%', padding: '6px 8px', border: '1px solid var(--eb-border)', borderRadius: 8, background: 'var(--eb-surface)', color: 'var(--eb-text)' }}\n        />\n      </div>\n      {filtered.length === 0 && <p style={{ color: 'var(--eb-text-secondary)', fontSize: 13 }}>No blocks match your search.</p>}\n      <ul style={{ listStyle: 'none', padding: 0, margin: 0, display: 'grid', gap: 8 }}>\n        {filtered.map(b => (\n          <BlockDraggable key={b.id} block={b} onDelete={removeSavedBlock} onRename={handleRename} />\n        ))}\n      </ul>\n      <p style={{ fontSize: 11, color: 'var(--eb-text-secondary)', marginTop: 12 }}>Tip: Drag a saved block into the canvas to restore its components at the end. (Insert-at-position coming soon)</p>\n      </div>\n    </div>\n  );\n};","/**\n * @kaptha/email-editor-react\n * Main export file\n */\n\nimport './EmailEditor.css';\n\n// Initialize framework-agnostic API\nimport { initKapthaAPI } from '@kaptha/email-editor-core';\ninitKapthaAPI();\n\n// New wrapper (uses window.kaptha API)\nexport { KapthaEmailEditorWrapper } from './KapthaEmailEditorWrapper';\n\n// Legacy direct React components (for backward compatibility)\nexport { EmailEditor } from './EmailEditor';\nexport type { EmailEditorHandle } from './EmailEditor';\nexport { EmailEditorProvider, useEmailEditor } from './EmailEditorContext';\nexport { ComponentRenderer } from './ComponentRenderer';\nexport { ComponentToolbar, ItemTypes, componentTemplates } from './ComponentToolbar';\nexport { PropertyEditor } from './PropertyEditor';\nexport { DraggableComponent } from './DraggableComponent';\nexport { CanvasDropZone } from './CanvasDropZone';\nexport { TemplateSelector } from './TemplateSelector';\nexport { DesignSystemPanel } from './DesignSystemPanel';\nexport { ImageUploadModal } from './ImageUploadModal';\nexport { ColumnsRenderer } from './ColumnsRenderer';\nexport { SavedBlocksPanel } from './SavedBlocksPanel';\nexport { ColumnDropZone } from './ColumnDropZone';\nexport { ExportModal } from './ExportModal';\n\n// Re-export types from core\nexport type {\n  EmailComponent,\n  EmailTemplate,\n  MergeTag,\n  ExportOptions,\n  ComponentType,\n  TextComponent,\n  ButtonComponent,\n  ImageComponent,\n  DividerComponent,\n  SpacerComponent,\n  SocialComponent,\n  ColumnsComponent,\n  SectionComponent,\n  EmailEditorConfig,\n  EmailEditorPlugin,\n  EditorConfig,\n  EditorMethods,\n  EmailDesign,\n  AppearanceConfig,\n  Font,\n  CustomBlock\n} from '@kaptha/email-editor-core';\n\n"],"names":["_KapthaEditor","constructor","config","this","container","editorInstance","reactRoot","eventListeners","Map","keysConfig","loadStaticConfig","apiKey","Error","startsWith","keyData","keys","active","validateDomain","allowedDomains","currentDomain","window","location","hostname","join","workspaceId","console","log","substring","tier","init","__KAPTHA_KEYS_CONFIG__","version","protocol","some","pattern","suffix","endsWith","document","getElementById","id","minHeight","style","mountReactEditor","onLoad","React","ReactDOM","error","EmailEditor","KapthaEmailEditor","editorRef","createRef","createRoot","editorProps","ref","initialTemplate","designSystem","name","components","onChange","onDesignChange","height","render","createElement","setTimeout","current","onReady","loadDesign","design","warn","saveDesign","exportHtml","options","html","mjml","exportMjml","exportJson","addEventListener","event","callback","has","set","get","push","removeEventListener","listeners","index","indexOf","splice","setDesignSystem","destroy","clear","unmount","innerHTML","_attachEditorInstance","instance","KapthaEditor","initKapthaAPI","createEditorFn","kaptha","createEditor","kapthaEmailEditor","DEFAULT_BLOCKED_DOMAINS","assertValidUrl","url","result","allowedProtocols","blockedDomains","allowLocalhost","parsedUrl","URL","isValid","reason","includes","toLowerCase","blocked","test","isPrivateIp","length","allowed","validateUrl","async","safeFetch","timeout","fetchOptions","validationOptions","controller","AbortController","timeoutId","abort","response","fetch","signal","clearTimeout","fetchWithTimeout","toString","isDevelopment","isDev","minLevel","includeTimestamp","customHandler","defaultHandler","bind","prefix","level","message","args","fullMessage","Date","toISOString","info","shouldLog","debug","configure","setLevel","juice","require","MJMLConverter","apiEndpoint","urlValidationOptions","mergeTags","mjmlApiEndpoint","addMergeTags","tags","getMergeTags","componentToMJML","component","type","textToMJML","buttonToMJML","imageToMJML","dividerToMJML","spacerToMJML","socialToMJML","videoToMJML","timerToMJML","htmlToMJML","columnsToMJML","sectionToMJML","text","fontSize","fontWeight","color","align","padding","props","attrs","href","backgroundColor","borderRadius","src","alt","width","borderColor","borderWidth","borderStyle","poster","targetDate","display","code","wrapperStartAttrs","mode","iconSize","links","socialElements","map","link","columnCount","width1","width2","width3","width4","widths","slice","Array","from","_","i","settingsKey","columnComponents","columnSettings","content","child","filter","a","children","idx","templateToMJML","template","body","comp","subject","mjmlToHTML","mjmlCode","method","headers","JSON","stringify","ok","statusText","data","json","errors","beautify","minify","inlineCSS","keepComments","replaceMergeTags","forEach","tag","regex","RegExp","value","replace","exportTemplate","defaultDesignSystem","colors","primary","secondary","accent","textSecondary","background","border","typography","fontFamily","headingFont","bodyFont","xs","sm","md","lg","xl","xxl","normal","medium","semibold","bold","spacing","none","full","containerWidth","contentAlignment","underline","emailTemplates","blank","welcome","newsletter","promotional","transactional","invitation","announcement","feedback","reminder","reengagement","columnShowcase","column1","column2","column3","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","Object","freeze","seal","create","apply","construct","Reflect","x","func","thisArg","_len","arguments","_key","Func","_len2","_key2","arrayForEach","unapply","prototype","arrayLastIndexOf","lastIndexOf","arrayPop","pop","arrayPush","arraySplice","stringToLowerCase","String","stringToString","stringMatch","match","stringReplace","stringIndexOf","stringTrim","trim","objectHasOwnProperty","hasOwnProperty","regExpTest","typeErrorCreate","TypeError","_len4","_key4","lastIndex","_len3","_key3","addToSet","array","transformCaseFunc","l","element","lcElement","cleanArray","clone","object","newObject","property","isArray","lookupGetter","prop","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","__proto__","NODE_TYPE","purify","createDOMPurify","DOMPurify","root","removed","nodeType","Element","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","trustedTypes","ElementPrototype","cloneNode","remove","getNextSibling","getChildNodes","getParentNode","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","EXTRA_ELEMENT_HANDLING","tagCheck","attributeCheck","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","Function","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","TRUSTED_TYPES_POLICY","createHTML","createScriptURL","purifyHostElement","createPolicy","ATTR_NAME","hasAttribute","getAttribute","policyName","scriptUrl","_createTrustedTypesPolicy","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","removeChild","_removeAttribute","attribute","getAttributeNode","removeAttribute","setAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","createDocument","insertBefore","createTextNode","childNodes","call","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","textContent","attributes","namespaceURI","hasChildNodes","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","tagName","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","childClone","__removalCount","parent","parentTagName","Boolean","_checkValidNamespace","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","attr","initValue","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","appendChild","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks","DEFAULT_ALLOWED_ATTRIBUTES","KapthaEmailEditorWrapper","forwardRef","displayMode","appearance","customFonts","customBlocks","className","containerRef","useRef","editorInstanceRef","editorIdRef","Math","random","substr","useEffect","editor","useImperativeHandle","displayName","DndContext","createContext","dragDropManager","jsxRuntimeModule","exports","f","require$$0","k","Symbol","for","m","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","__self","__source","q","c","g","b","d","e","h","defaultProps","$$typeof","_owner","reactJsxRuntime_production_min","jsx","jsxs","formatProdErrorMessage","$$observable","observable","randomString","split","ActionTypes","INIT","REPLACE","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","dispatch","action","obj","proto","isPlainObject","replaceReducer","nextReducer","_ref","outerSubscribe","observer","observeState","next","unsubscribe","invariant","condition","format","process","argIndex","framesToPop","isObject","input","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","clientOffset","sourceClientOffset","payload","ResetCoordinatesAction","createBeginDrag","manager","sourceIds","publishSource","getSourceClientOffset","monitor","getMonitor","registry","getRegistry","isDragging","sourceId","getSource","verifyInvariants","canDragSource","getDraggableSource","verifyGetSourceClientOffsetIsFunction","item","beginDrag","verifyItemIsObject","pinSource","itemType","getSourceType","isSourcePublic","_defineProperty","defineProperty","_objectSpread","target","source","ownKeys","getOwnPropertySymbols","concat","sym","createDrop","didDrop","targetIds","getTargetIds","canDropOnTarget","reverse","getDroppableTargets","targetId","dropResult","getTarget","drop","verifyDropResultType","getDropResult","determineDropResult","createEndDrag","verifyIsDragging","getSourceId","endDrag","unpinSource","matchesType","targetType","draggedItemType","t","createHover","targetIdsArg","verifyTargetIdsIsArray","getTargetType","removeNonMatchingTargetIds","getItemType","checkInvariants","hover","hoverAllTargets","createPublishDragSource","DragDropManagerImpl","receiveBackend","backend","getBackend","getActions","store","actions","publishDragSource","createDragDropActions","reduce","boundActions","actionCreator","isSetUp","handleRefCountChange","shouldSetUp","refCount","setup","teardown","subtract","y","NONE","ALL","__IS_NONE__","__IS_ALL__","DragDropMonitorImpl","subscribeToStateChange","handlerIds","prevStateId","stateId","state","currentStateId","canSkipListener","dirtyIds","itemsB","areDirty","dirtyHandlerIds","subscribeToOffsetChange","previousState","dragOffset","nextState","canDrag","canDrop","isDraggingSource","isOverTarget","shallow","dragOperation","getItem","getInitialClientOffset","initialClientOffset","getInitialSourceClientOffset","initialSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","scope","globalThis","self","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromTimer","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","makeRequestCall","toggle","observe","characterData","RawTask","task","onError","release","asapQueue","enqueueTask","queue","requestFlush","flushing","pendingErrors","capacity","flush","currentIndex","scan","newLength","registerPendingError","err","requestErrorThrow","shift","taskFactory","tasks","freeTasks","t1","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","validateType","allowArray","HandlerRole","nextUniqueId","getNextHandlerId","role","SOURCE","TARGET","parseRoleFromHandlerId","handlerId","mapContainsValue","searchValue","isDone","done","HandlerRegistryImpl","addSource","validateSourceContract","addHandler","addTarget","validateTargetContract","containsHandler","handler","dragSources","dropTargets","includePinned","isSourceId","pinnedSourceId","pinnedSource","isTargetId","types","removeSource","delete","removeTarget","strictEquality","_state","prevTargetIds","itemsA","insertItem","count","xor","isEqual","areArraysEqual","prevInnermostTargetId","innermostTargetId","initialState","offsetA","offsetB","items","path","defaultValue","createDragDropManager","backendFactory","globalContext","backendOptions","debugMode","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","makeStoreInstance","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","INSTANCE_SYM","DndProvider","memo","_param","isGlobalInstance","context","getGlobalContext","ctx","createSingletonDndContext","getDndContextValue","_jsx","Provider","fastDeepEqual","equal","flags","valueOf","useIsomorphicLayoutEffect","useLayoutEffect","useMonitorOutput","collect","onCollect","collected","updateCollected","onUpdate","setCollected","useState","useCallback","nextValue","useCollector","getHandlerId","useCollectedProps","collector","connector","reconnect","useOptionalFactory","arg","deps","memoDeps","useMemo","useConnectDragSource","dragSource","useConnectDragPreview","dragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","receiveHandlerId","internalMonitor","isCallingCanDrop","DropTargetMonitorImpl","isOver","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","valueA","valueB","isRef","wrapHookToRecognizeElement","elementOrNode","isValidElement","throwIfCompositeComponentElement","newRef","previousRef","cloneElement","setRef","cloneWithRef","wrapConnectorHooks","wrappedHooks","wrappedHook","SourceConnector","newHandlerId","connectTarget","dragSourceOptions","dragSourceOptionsInternal","dragPreviewOptions","dragPreviewOptionsInternal","didChange","reconnectDragSource","reconnectDragPreview","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","dragSourceUnsubscribe","connectDragSource","forceDidChange","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","connectDragPreview","dragPreviewNode","dragPreviewRef","dragSourceNode","dragSourceRef","clearDragSource","clearDragPreview","TargetConnector","dropTarget","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedDropTarget","lastConnectedDropTargetOptions","dropTargetOptions","unsubscribeDropTarget","connectDropTarget","dropTargetOptionsInternal","dropTargetNode","dropTargetRef","clearDropTarget","useDragDropManager","useContext","DragSourceImpl","spec","globalMonitor","end","useRegisteredDragSource","useDragSource","useDragType","unregister","registerSource","useDrag","specArg","begin","useDragSourceMonitor","useDragSourceConnector","previewOptions","useConnectDropTarget","DropTargetImpl","useRegisteredDropTarget","useDropTarget","accept","useAccept","registerTarget","useDrop","useDropTargetMonitor","useDropTargetConnector","memoize","fn","EnterLeaveCounter","enter","enteringNode","previousLength","entered","Set","add","union","isNodeInDocument","contains","leave","leavingNode","reset","NativeDragSource","initializeExposedProperties","exposeProperties","loadDataTransfer","dataTransfer","newProperties","propertyFn","matchesTypes","defineProperties","handle","FILE","TEXT","HTML","getDataFromDataTransfer","typesToTry","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes.FILE","files","NativeTypes.HTML","URL$1","NativeTypes.URL","urls","NativeTypes.TEXT","matchNativeItemType","dataTransferTypes","nativeItemType","typeConfig","isFirefox","navigator","userAgent","isSafari","safari","MonotonicInterpolant","interpolate","ys","c1s","c2s","c3s","mid","low","high","floor","xHere","max","diff","diffSq","indexes","sort","dxs","ms","dx","dy","i1","i2","m2","mNext","dxNext","common","i3","c1","invDx","getNodeClientOffset","el","parentElement","top","left","getBoundingClientRect","getEventClientOffset","clientX","clientY","getDragPreviewOffset","sourceNode","anchorPoint","offsetPoint","isImage","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","sourceWidth","offsetHeight","sourceHeight","anchorX","anchorY","dragPreviewWidth","dragPreviewHeight","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","calculateYOffset","OptionsReader","rootElement","optionsArgs","HTML5BackendImpl","profile","ref1","sourcePreviewNodes","size","sourcePreviewNodeOptions","sourceNodeOptions","sourceNodes","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","dragOverTargetIds","__isReactDndBackendSetUp","addEventListeners","removeEventListeners","clearCurrentDragSourceNode","asyncEndDragFrameId","cancelAnimationFrame","handleDragStart","handleSelectStart","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","dropEffect","altKeyPressed","getCurrentDropEffect","isDraggingNativeItem","getCurrentSourcePreviewNodeOptions","captureDraggingState","NativeTypes","beginDragNativeItem","currentNativeSource","createNativeDragSource","currentNativeHandle","setCurrentDragSourceNode","currentDragSourceNode","mouseMoveTimeoutTimer","endDragIfSourceWasRemovedFromDOM","defaultPrevented","unshift","_e","lastClientOffset","hoverRafId","endDragNativeItem","cancelHover","scheduleHover","requestAnimationFrame","nativeType","setDragImage","dragPreviewOffset","setData","preventDefault","enterLeaveCounter","altKey","dragDrop","isContentEditable","HTML5Backend","__idCounter","generateComponentId","__E2E_DETERMINISTIC_IDS","now","EmailEditorContext","useEmailEditor","EmailEditorProvider","setComponentsState","selectedComponent","setSelectedComponent","setMergeTags","setTemplateState","history","setHistory","historyIndex","setHistoryIndex","savedBlocks","setSavedBlocks","raw","localStorage","parsed","parse","persistBlocks","setItem","deepCloneComponents","setComponents","newComponents","newHistory","updateHistory","deepCloneComponent","cloned","colKey","findComponentWithContext","comps","parentInfo","topLevelIndex","j","colIdx","column","colItem","updateComponentDeep","updates","currentPath","newObj","u","colComp","updated","canUndo","canRedo","addComponent","removeComponent","removeComponentDeep","updateComponent","cloneComponent","newChildren","moveComponent","dragIndex","hoverIndex","prev","setTemplate","newTemplate","undo","newIndex","prevState","redo","addSavedBlock","block","createdAt","removeSavedBlock","insertSavedBlock","blockId","find","renameSavedBlock","DropFeedbackContext","DropFeedbackProvider","messages","setMessages","pushMessage","interval","position","right","zIndex","flexDirection","gap","boxShadow","transition","transform","opacity","backdropFilter","alignItems","componentTemplates","button","image","divider","spacer","social","video","controls","timer","expiredText","timezone","columns","section","toPascalCase","string","camelCase","p1","p2","toUpperCase","toCamelCase","charAt","mergeClasses","classes","hasA11yProp","defaultAttributes","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","absoluteStrokeWidth","iconNode","rest","Number","createLucideIcon","iconName","Component","Box","ChevronDown","ChevronRight","ChevronLeft","Code","Columns3","rx","Columns4","Copy","ry","Download","Eye","cx","cy","r","FileText","Image","LayoutGrid","LayoutPanelLeft","Minus","Monitor","x1","x2","y1","y2","Moon","MousePointerClick","MoveVertical","Palette","PenLine","Redo2","Share2","Smartphone","Sun","Tablet","Timer","Trash2","Type","Undo2","Video","X","ItemTypes","COMPONENT","NEW_COMPONENT","sectionTemplates","icon","ToolbarButton","componentType","label","onClick","drag","cursor","justifyContent","textAlign","lineHeight","flex","SectionButton","isHover","setIsHover","sectionConfig","onMouseEnter","onMouseLeave","widthKey","pct","ComponentToolbar","onContentVisibilityChange","activeTab","setActiveTab","isContentVisible","setIsContentVisible","expandedSections","setExpandedSections","general","sectionGroupsExpanded","setSectionGroupsExpanded","popular","standard","more","toggleSection","CustomEvent","detail","dispatchEvent","addSection","minWidth","maxWidth","borderRight","title","newValue","bottom","margin","gridTemplateColumns","justifyItems","ImageIcon","s","marginBottom","userSelect","borderBottom","paddingBottom","Fragment","min","step","parseInt","checked","marginRight","DraggableComponent","isSelected","stopPropagation","ColumnDropZone","columnIndex","parentId","onDropComponent","dropped","isActive","ColumnsRenderer","initialComponent","useDropFeedback","findComponentById","found","handleDropInColumn","columnKey","currentColumnLength","componentId","newComponent","updatedColumn","columnWidths","sum","w","getColumnWidths","ComponentRenderer","renderColumn","textDecoration","autoPlay","autoplay","setNow","getTime","seconds","minutes","hours","sanitizedHtml","allowDataUri","sanitizeHtml","dangerouslySetInnerHTML","__html","getSocialIcon","platform","sizeNum","facebook","twitter","instagram","offset","stopColor","linkedin","youtube","github","pinterest","tiktok","snapchat","reddit","icons","rel","onMouseOver","currentTarget","onMouseOut","SectionRenderer","renderComponent","ImageUploadModal","onImageSelect","onClose","currentImageUrl","imageUrl","setImageUrl","uploadedImage","setUploadedImage","setIsDragging","fileInputRef","handleFileSelect","file","reader","FileReader","onload","readAsDataURL","alert","maxHeight","overflow","overflowY","placeholder","boxSizing","marginTop","onDrop","onDragOver","onDragLeave","click","borderTop","PropertyEditor","showImageUpload","setShowImageUpload","localProps","handlePropChange","labelStyle","letterSpacing","inputStyle","textTransform","inputs","paddingV","paddingH","whiteSpace","iso","widthInputs","handleColumnCountChange","newCount","oldCount","allComponents","newColumns","columnPresets","applyPreset","presetsForCount","flexWrap","preset","round","totalWidth","paddingTop","settings","newIcons","marginLeft","renderInputs","CanvasDropZone","savedBlockId","TemplateSelector","templates","onSelect","selectedCategory","setSelectedCategory","all","marketing","engagement","templateList","categoryMap","filterTemplates","DesignSystemPanel","localDesignSystem","setLocalDesignSystem","handleColorChange","handleTypographyChange","category","sectionStyle","tab","handleFontSizeChange","handleSpacingChange","generateBasicHTML","componentToHTML","columnContent","ExportModal","status","setStatus","setMjmlCode","htmlCode","setHtmlCode","isGenerating","setIsGenerating","effectiveApiEndpoint","converterRef","generate","copy","clipboard","writeText","then","catch","disabled","overflowX","EmailEditorContent","onSave","showTemplateSelector","setShowTemplateSelector","showDesignSystemPanel","setShowDesignSystemPanel","viewportMode","setViewportMode","selectedViewport","setSelectedViewport","showViewportDropdown","setShowViewportDropdown","showExportModal","setShowExportModal","theme","setTheme","isSidebarContentVisible","setIsSidebarContentVisible","isPreviewMode","setIsPreviewMode","handleClickOutside","handleKeyDown","metaKey","ctrlKey","shiftKey","handleAddComponent","customEvent","column4","viewportOptions","desktop","description","tablet","mobile","getCurrentViewportWidth","opt","getCurrentViewportInfo","flexShrink","option","Edit3","templateData","updatedAt","backgroundImage","backgroundSize","backgroundPosition","InsertionZone","insertIndex","selectedTemplate","EmailEditorWithRef","EmailEditorContentWithMethods","mjmlConverter","BlockDraggable","onDelete","onRename","isEditing","setIsEditing","tempName","setTempName","restoreMultiple","commitRename","onBlur","onKeyDown","autoFocus","onDoubleClick","toLocaleString","newName","setNewName","search","setSearch","filtered","saveCurrent","onlySelected","handleRename","listStyle"],"mappings":"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","x_google_ignoreList":[6,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129]}