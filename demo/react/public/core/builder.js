if("undefined"==typeof process&&(window.process={env:{NODE_ENV:"production"}}),window.__KAPTHA_KEYS_CONFIG__={version:"1.0.0",keys:{kpt_dev_ws001_demo12345678:{workspaceId:"ws_001",tier:"dev",allowedDomains:["*"],active:!0,createdAt:"2025-01-01",email:"dev@kaptha.dev",notes:"Development key - unrestricted domains for testing"},kpt_free_ws002_a1b2c3d4e5f6:{workspaceId:"ws_002",tier:"free",allowedDomains:["localhost","127.0.0.1","*.local"],active:!0,createdAt:"2025-01-15",email:"user@example.com",notes:"Free tier - localhost only"},kpt_free_ws003_x1y2z3a4b5c6:{workspaceId:"ws_003",tier:"free",allowedDomains:["demo.kaptha.dev","*.vercel.app","*.netlify.app"],active:!0,createdAt:"2025-01-20",email:"demo@example.com",notes:"Demo account - for public demos"},kpt_pro_ws004_h8i9j0k1l2m3:{workspaceId:"ws_004",tier:"pro",allowedDomains:["acme.com","*.acme.com","staging.acme.dev"],active:!0,createdAt:"2025-02-01",email:"admin@acme.com",notes:"Acme Corp - Pro tier customer"}}},function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).KapthaEmailEditor={},e.React)}(this,function(e,t){"use strict";const n=class e{constructor(t){if(this.container=null,this.editorInstance=null,this.reactRoot=null,this.eventListeners=new Map,this.config=t,e.keysConfig||(e.keysConfig=this.loadStaticConfig()),!t.apiKey)throw new Error("[Kaptha] API key is required. Contact hello@kaptha.com for your free key");if(!t.apiKey.startsWith("kpt_"))throw new Error('[Kaptha] Invalid API key format. Must start with "kpt_"');const n=e.keysConfig.keys[t.apiKey];if(!n)throw new Error("[Kaptha] Invalid API key. Contact hello@kaptha.com to register your key");if(!n.active)throw new Error("[Kaptha] This API key has been deactivated. Contact hello@kaptha.com");if(!this.validateDomain(t.apiKey,n.allowedDomains)){const e="undefined"!=typeof window?window.location.hostname:"unknown";throw new Error(`[Kaptha] Domain "${e}" is not authorized for this API key. Authorized domains: ${n.allowedDomains.join(", ")}`)}this.apiKey=t.apiKey,this.workspaceId=t.workspaceId||n.workspaceId,console.log(`[Kaptha] Initialized with API key: ${this.apiKey.substring(0,15)}...`),console.log(`[Kaptha] Workspace: ${this.workspaceId}`),console.log(`[Kaptha] Tier: ${n.tier}`),this.init()}loadStaticConfig(){return"undefined"!=typeof window&&window.__KAPTHA_KEYS_CONFIG__?window.__KAPTHA_KEYS_CONFIG__:{version:"1.0.0",keys:{}}}validateDomain(e,t){if("undefined"==typeof window)return!0;const n=window.location.hostname;return"file:"!==window.location.protocol||n?t.some(e=>{if("*"===e)return!0;if(e.startsWith("*.")){const t=e.substring(2);return n.endsWith(t)}return n===e}):t.some(e=>"*"===e||"localhost"===e||"127.0.0.1"===e||e.startsWith("*.local"))}init(){if("undefined"!=typeof window){if(this.container=document.getElementById(this.config.id),!this.container)throw new Error(`[Kaptha] Container element with id "${this.config.id}" not found`);this.config.minHeight&&(this.container.style.minHeight=this.config.minHeight),this.mountReactEditor(),this.config.onLoad&&this.config.onLoad()}}mountReactEditor(){if("undefined"==typeof window||!this.container)return;const e=window.React,t=window.ReactDOM;if(!e||!t)return console.error("[Kaptha] React and ReactDOM must be loaded before initializing the editor"),console.error('[Kaptha] Include: <script src="https://unpkg.com/react@18/umd/react.production.min.js"><\/script>'),void console.error('[Kaptha] Include: <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"><\/script>');const n=window.KapthaEmailEditor?.EmailEditor;if(n)try{const r=e.createRef();this.reactRoot=t.createRoot(this.container);const o={ref:r,initialTemplate:this.config.designSystem?{name:"Initial Design",components:[]}:void 0,onChange:e=>{this.config.onDesignChange&&this.config.onDesignChange({components:e})},height:this.config.minHeight||"600px"};this.reactRoot.render(e.createElement(n,o)),setTimeout(()=>{this.editorInstance=r.current,console.log("[Kaptha] React editor mounted successfully"),this.config.onReady&&this.config.onReady()},100)}catch(r){console.error("[Kaptha] Failed to mount React editor:",r)}else console.error("[Kaptha] EmailEditor component not found in bundle")}loadDesign(e){this.editorInstance?this.editorInstance.loadDesign(e):console.warn("[Kaptha] Editor not ready yet")}saveDesign(){return this.editorInstance?this.editorInstance.saveDesign():(console.warn("[Kaptha] Editor not ready yet"),{components:[]})}async exportHtml(e){return this.editorInstance?this.editorInstance.exportHtml():(console.warn("[Kaptha] Editor not ready yet"),{html:"",mjml:""})}exportMjml(){return this.editorInstance?this.editorInstance.exportMjml():(console.warn("[Kaptha] Editor not ready yet"),"")}exportJson(){return this.editorInstance?this.editorInstance.exportJson():(console.warn("[Kaptha] Editor not ready yet"),{components:[]})}addEventListener(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}removeEventListener(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}setDesignSystem(e){console.log("[Kaptha] setDesignSystem called",e),this.editorInstance?.setDesignSystem&&this.editorInstance.setDesignSystem(e)}destroy(){this.eventListeners.clear(),this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null),this.editorInstance=null,this.container&&(this.container.innerHTML=""),console.log("[Kaptha] Editor destroyed")}_attachEditorInstance(e){this.editorInstance=e,this.config.onReady&&this.config.onReady()}};n.keysConfig=null;let r=n;function o(){if("undefined"==typeof window)return;const e=e=>new r(e);window.kaptha={version:"2.0.0",init:e,createEditor:e},window.kapthaEmailEditor=window.kaptha,console.log("[Kaptha] API initialized - window.kaptha.init() and window.kapthaEmailEditor.init() available")}"undefined"!=typeof window&&o();const a=["localhost","127.0.0.1","0.0.0.0","::1","169.254.169.254","metadata.google.internal"];function i(e,t={}){const n=function(e,t={}){const{allowedProtocols:n=["https:"],allowedDomains:r,blockedDomains:o=a,allowLocalhost:i=!1}=t;let l;try{l=new URL(e)}catch(c){return{isValid:!1,reason:"Invalid URL format"}}if(!n.includes(l.protocol))return{isValid:!1,reason:`Protocol ${l.protocol} not allowed. Allowed protocols: ${n.join(", ")}`,parsedUrl:l};const s=l.hostname.toLowerCase();if(o.some(e=>s===e||s.endsWith(`.${e}`)))return{isValid:!1,reason:`Domain ${s} is blocked`,parsedUrl:l};if(!i&&function(e){return[/^10\./,/^172\.(1[6-9]|2[0-9]|3[01])\./,/^192\.168\./,/^127\./,/^169\.254\./].some(t=>t.test(e))||[/^::1$/,/^fe80:/i,/^fc00:/i,/^fd00:/i].some(t=>t.test(e))}(s))return{isValid:!1,reason:"Private IP addresses and localhost are not allowed",parsedUrl:l};if(r&&r.length>0&&!r.some(e=>s===e||s.endsWith(`.${e}`)))return{isValid:!1,reason:`Domain ${s} not in whitelist. Allowed domains: ${r.join(", ")}`,parsedUrl:l};return{isValid:!0,parsedUrl:l}}(e,t);if(!n.isValid)throw new Error(`URL validation failed: ${n.reason}`);return n.parsedUrl}async function l(e,t={}){const{allowedProtocols:n,allowedDomains:r,blockedDomains:o,allowLocalhost:a,timeout:l=5e3,...s}=t,c={};void 0!==n&&(c.allowedProtocols=n),void 0!==r&&(c.allowedDomains=r),void 0!==o&&(c.blockedDomains=o),void 0!==a&&(c.allowLocalhost=a);return async function(e,t,n=5e3){const r=new AbortController,o=setTimeout(()=>r.abort(),n);try{const n=await fetch(e,{...t,signal:r.signal});return clearTimeout(o),n}catch(a){if(clearTimeout(o),a instanceof Error&&"AbortError"===a.name)throw new Error(`Request timeout after ${n}ms`);throw a}}(i(e,c).toString(),s,l)}function s(){return"undefined"!=typeof window&&("localhost"===window.location?.hostname||"127.0.0.1"===window.location?.hostname||""===window.location?.hostname)}new class{constructor(e={}){const t=s();this.config={minLevel:e.minLevel??(t?0:2),includeTimestamp:e.includeTimestamp??!0,customHandler:e.customHandler??this.defaultHandler.bind(this),prefix:e.prefix??"[EmailEditor]"}}defaultHandler(e,t,...n){const r=`${this.config.includeTimestamp?`[${(new Date).toISOString()}]`:""} ${this.config.prefix} ${t}`;switch(e){case 0:console.log(r,...n);break;case 1:console.info(r,...n);break;case 2:console.warn(r,...n);break;case 3:console.error(r,...n)}}shouldLog(e){return e>=this.config.minLevel}debug(e,...t){this.shouldLog(0)&&this.config.customHandler(0,e,...t)}info(e,...t){this.shouldLog(1)&&this.config.customHandler(1,e,...t)}warn(e,...t){this.shouldLog(2)&&this.config.customHandler(2,e,...t)}error(e,...t){this.shouldLog(3)&&this.config.customHandler(3,e,...t)}configure(e){this.config={...this.config,...e}}setLevel(e){this.config.minLevel=e}};const c=(...e)=>{s()&&console.log("[EmailEditor]",...e)},d=(...e)=>{console.warn("[EmailEditor]",...e)},p=(...e)=>{console.error("[EmailEditor]",...e)};let u,m;"undefined"==typeof window&&(u=require("mjml"),m=require("juice"));class g{constructor(e,t){this.mergeTags=[],void 0!==e&&(this.mjmlApiEndpoint=e),void 0!==t&&(this.urlValidationOptions=t)}addMergeTags(e){this.mergeTags=[...this.mergeTags,...e]}getMergeTags(){return this.mergeTags}componentToMJML(e){switch(e.type){case"text":return this.textToMJML(e);case"button":return this.buttonToMJML(e);case"image":return this.imageToMJML(e);case"divider":return this.dividerToMJML(e);case"spacer":return this.spacerToMJML(e);case"social":return this.socialToMJML(e);case"video":return this.videoToMJML(e);case"timer":return this.timerToMJML(e);case"html":return this.htmlToMJML(e);case"columns":return this.columnsToMJML(e);case"section":return this.sectionToMJML(e);default:return""}}textToMJML(e){const{text:t="",fontSize:n,fontWeight:r,color:o,align:a,padding:i}=e.props,l=[];return n&&l.push(`font-size="${n}"`),r&&l.push(`font-weight="${r}"`),o&&l.push(`color="${o}"`),a&&l.push(`align="${a}"`),i&&l.push(`padding="${i}"`),`<mj-text ${l.join(" ")}>${t}</mj-text>`}buttonToMJML(e){const{text:t="Button",href:n="#",backgroundColor:r,color:o,borderRadius:a,padding:i,align:l}=e.props,s=[`href="${n}"`];return r&&s.push(`background-color="${r}"`),o&&s.push(`color="${o}"`),a&&s.push(`border-radius="${a}"`),i&&s.push(`inner-padding="${i}"`),l&&s.push(`align="${l}"`),`<mj-button ${s.join(" ")}>${t}</mj-button>`}imageToMJML(e){const{src:t="",alt:n="",width:r,height:o,href:a,align:i}=e.props,l=[`src="${t}"`];return n&&l.push(`alt="${n}"`),r&&l.push(`width="${r}"`),o&&l.push(`height="${o}"`),a&&l.push(`href="${a}"`),i&&l.push(`align="${i}"`),`<mj-image ${l.join(" ")} />`}dividerToMJML(e){const{borderColor:t,borderWidth:n,borderStyle:r,padding:o}=e.props,a=[];return t&&a.push(`border-color="${t}"`),n&&a.push(`border-width="${n}"`),r&&a.push(`border-style="${r}"`),o&&a.push(`padding="${o}"`),`<mj-divider ${a.join(" ")} />`}spacerToMJML(e){const{height:t="20px"}=e.props;return`<mj-spacer height="${t}" />`}videoToMJML(e){const{src:t,poster:n,width:r="600px",height:o,align:a="center"}=e.props;return`<mj-image src="${n||"https://placehold.co/600x400/000/fff?text=Play+Video"}" href="${t}" width="${r}" ${o?`height="${o}"`:""} align="${a}" alt="Play Video" />`}timerToMJML(e){const{targetDate:t,align:n="center",color:r="#dc3545",backgroundColor:o,padding:a}=e.props,i=`Countdown to: ${t?new Date(t).toISOString():""}`,l=[];return n&&l.push(`align="${n}"`),r&&l.push(`color="${r}"`),o&&l.push(`background-color="${o}"`),a&&l.push(`padding="${a}"`),`<mj-text ${l.join(" ")}>${i}<br/><em>(Will show live timer in builder, static fallback in email)</em></mj-text>`}htmlToMJML(e){const{code:t="",padding:n,backgroundColor:r,align:o}=e.props,a=[];r&&a.push(`background-color="${r}"`),n&&a.push(`padding="${n}"`),o&&a.push(`align="${o}"`);return`<mj-section ${a.join(" ")}><mj-column><mj-raw>${t}</mj-raw></mj-column></mj-section>`}socialToMJML(e){const{mode:t="horizontal",iconSize:n="30px",links:r=[]}=e.props,o=[`mode="${t}"`,`icon-size="${n}"`],a=r.map(e=>`<mj-social-element name="${e.name}" href="${e.href}" />`).join("\n      ");return`<mj-social ${o.join(" ")}>\n      ${a}\n    </mj-social>`}columnsToMJML(e){const{columnCount:t=2,width1:n=0,width2:r=0,width3:o=0,width4:a=0}=e.props,i=[n,r,o,a].slice(0,t);if("column1"in e){return`<mj-section>\n      ${Array.from({length:t},(t,n)=>{const r=`columnSettings${n+1}`,o=e[`column${n+1}`]||[],a=e.props[r]||{},l=o.map(e=>this.componentToMJML(e)).join("\n        "),s=i[n],c=[s>0?`width="${s}%"`:""];a.backgroundColor&&c.push(`background-color="${a.backgroundColor}"`),a.padding&&c.push(`padding="${a.padding}"`);return`<mj-column ${c.filter(e=>e).join(" ")}>\n        ${l||"\x3c!-- Empty column --\x3e"}\n      </mj-column>`}).join("\n      ")}\n    </mj-section>`}{const n=e.children||[];return`<mj-section>\n      ${Array.from({length:t},(e,r)=>{const o=n.filter((e,n)=>n%t===r).map(e=>this.componentToMJML(e)).join("\n        "),a=i[r];return`<mj-column ${a>0?`width="${a}%"`:""}>\n        ${o}\n      </mj-column>`}).join("\n      ")}\n    </mj-section>`}}sectionToMJML(e){const{backgroundColor:t,padding:n}=e.props,r=[];t&&r.push(`background-color="${t}"`),n&&r.push(`padding="${n}"`);const o=(e.children||[]).map(e=>this.componentToMJML(e)).join("\n      ");return`<mj-section ${r.join(" ")}>\n      <mj-column>\n        ${o}\n      </mj-column>\n    </mj-section>`}templateToMJML(e){const t=(e.components||[]).map(e=>"    "+this.componentToMJML(e)).join("\n");return`<mjml>\n  <mj-head>\n    <mj-title>${e.name||"Email Template"}</mj-title>\n    ${e.subject?`<mj-preview>${e.subject}</mj-preview>`:""}\n    <mj-attributes>\n      <mj-all font-family="'Helvetica Neue', Helvetica, Arial, sans-serif" />\n    </mj-attributes>\n  </mj-head>\n  <mj-body>\n${t}\n  </mj-body>\n</mjml>`}async mjmlToHTML(e,t={}){if(this.mjmlApiEndpoint)try{const t=await l(this.mjmlApiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mjml:e}),timeout:1e4,...this.urlValidationOptions});if(!t.ok)throw new Error(`API request failed: ${t.statusText}`);const n=await t.json();return n.errors&&n.errors.length>0&&p("MJML Errors:",n.errors),n.html}catch(a){throw p("Error converting MJML to HTML via API:",a),a}if(!u||!m)throw new Error("MJML conversion is only available in Node.js environment or via API endpoint. Please configure mjmlApiEndpoint.");const{beautify:n=!0,minify:r=!1,inlineCSS:o=!0}=t;try{const t=u(e,{keepComments:!1,beautify:n,minify:r});return t.errors&&t.errors.length>0&&console.error("MJML Errors:",t.errors),o?m(t.html):t.html}catch(a){throw console.error("Error converting MJML to HTML:",a),a}}replaceMergeTags(e,t){let n=e;return this.mergeTags.forEach(e=>{const r=new RegExp(`{{${e.value}}}`,"g");n=n.replace(r,t[e.value]||"")}),n}async exportTemplate(e,t={}){const n=this.templateToMJML(e);return await this.mjmlToHTML(n,t)}}const h={colors:{primary:"#007bff",secondary:"#6c757d",accent:"#28a745",text:"#212529",textSecondary:"#6c757d",background:"#d97707",border:"#dee2e6"},typography:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',headingFont:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',bodyFont:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:{xs:"12px",sm:"14px",md:"16px",lg:"18px",xl:"24px",xxl:"32px"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"}},spacing:{xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",xxl:"48px"},borderRadius:{none:"0",sm:"4px",md:"6px",lg:"8px",full:"9999px"},containerWidth:"600px",contentAlignment:"left",links:{color:"#007bff",underline:!0}},f={blank:{name:"Blank Template",subject:"",components:[]},welcome:{name:"Welcome Email",subject:"Welcome to {{company_name}}!",components:[{id:"section-1",type:"section",props:{backgroundColor:"#f8f9fa",padding:"40px 20px"},children:[{id:"text-1",type:"text",props:{text:"Welcome!",fontSize:"32px",color:"#007bff",align:"center"}},{id:"text-2",type:"text",props:{text:"Thanks for joining us. We're excited to have you on board!",fontSize:"16px",color:"#6c757d",align:"center"}},{id:"button-1",type:"button",props:{text:"Get Started",href:"https://example.com/get-started",backgroundColor:"#007bff",color:"#ffffff"}}]}]},newsletter:{name:"Newsletter",subject:"{{month}} Newsletter - Latest Updates",components:[{id:"section-header",type:"section",props:{backgroundColor:"#ffffff",padding:"20px"},children:[{id:"text-header",type:"text",props:{text:"Monthly Newsletter",fontSize:"28px",color:"#212529",align:"center"}},{id:"divider-1",type:"divider",props:{borderColor:"#dee2e6",borderWidth:"2px"}}]},{id:"section-content",type:"section",props:{backgroundColor:"#f8f9fa",padding:"30px 20px"},children:[{id:"text-article-1",type:"text",props:{text:"Feature Article Title",fontSize:"22px",color:"#212529",align:"left"}},{id:"text-article-desc",type:"text",props:{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",fontSize:"16px",color:"#6c757d",align:"left"}},{id:"button-read-more",type:"button",props:{text:"Read More",href:"https://example.com/article",backgroundColor:"#28a745",color:"#ffffff"}}]}]},promotional:{name:"Promotional Campaign",subject:"üéâ Special Offer - {{discount}}% Off!",components:[{id:"section-promo",type:"section",props:{backgroundColor:"#dc3545",padding:"50px 20px"},children:[{id:"text-promo-1",type:"text",props:{text:"SPECIAL OFFER",fontSize:"36px",color:"#ffffff",align:"center"}},{id:"text-promo-2",type:"text",props:{text:"Save {{discount}}% Today!",fontSize:"28px",color:"#ffffff",align:"center"}},{id:"spacer-1",type:"spacer",props:{height:"20px"}},{id:"button-shop",type:"button",props:{text:"Shop Now",href:"https://example.com/shop",backgroundColor:"#ffffff",color:"#dc3545"}}]},{id:"section-details",type:"section",props:{backgroundColor:"#ffffff",padding:"30px 20px"},children:[{id:"text-details",type:"text",props:{text:"Limited time offer. Use code SAVE{{discount}} at checkout.",fontSize:"14px",color:"#6c757d",align:"center"}}]}]},transactional:{name:"Order Confirmation",subject:"Order Confirmation #{{order_number}}",components:[{id:"section-header",type:"section",props:{backgroundColor:"#ffffff",padding:"30px 20px"},children:[{id:"text-thanks",type:"text",props:{text:"Thanks for your order!",fontSize:"24px",color:"#212529",align:"center"}},{id:"text-order-num",type:"text",props:{text:"Order #{{order_number}}",fontSize:"16px",color:"#6c757d",align:"center"}}]},{id:"divider-1",type:"divider",props:{borderColor:"#dee2e6",borderWidth:"1px"}},{id:"section-details",type:"section",props:{backgroundColor:"#f8f9fa",padding:"20px"},children:[{id:"text-order-details",type:"text",props:{text:"Order Details: {{order_details}}",fontSize:"16px",color:"#212529",align:"left"}}]},{id:"section-cta",type:"section",props:{backgroundColor:"#ffffff",padding:"30px 20px"},children:[{id:"button-track",type:"button",props:{text:"Track Your Order",href:"https://example.com/track/{{order_number}}",backgroundColor:"#007bff",color:"#ffffff"}}]}]},invitation:{name:"Event Invitation",subject:"You're Invited: {{event_name}}",components:[{id:"section-hero",type:"section",props:{backgroundColor:"#6f42c1",padding:"60px 20px"},children:[{id:"text-invited",type:"text",props:{text:'<h1 style="margin: 0; color: #ffffff;">You\'re Invited!</h1>',fontSize:"32px",color:"#ffffff",align:"center"}},{id:"text-event-name",type:"text",props:{text:'<h2 style="margin: 15px 0 0 0; color: #ffffff;">{{event_name}}</h2>',fontSize:"24px",color:"#ffffff",align:"center"}}]},{id:"section-details",type:"section",props:{backgroundColor:"#ffffff",padding:"40px 20px"},children:[{id:"text-date",type:"text",props:{text:"üìÖ <strong>When:</strong> {{event_date}}",fontSize:"16px",color:"#212529",align:"left",padding:"10px 0"}},{id:"text-location",type:"text",props:{text:"üìç <strong>Where:</strong> {{event_location}}",fontSize:"16px",color:"#212529",align:"left",padding:"10px 0"}},{id:"spacer-1",type:"spacer",props:{height:"30px"}},{id:"button-rsvp",type:"button",props:{text:"RSVP Now",href:"https://example.com/rsvp",backgroundColor:"#6f42c1",color:"#ffffff",borderRadius:"6px",padding:"14px 30px",align:"center"}}]}]},announcement:{name:"Product Announcement",subject:"Introducing {{product_name}}",components:[{id:"section-header",type:"section",props:{backgroundColor:"#ffffff",padding:"40px 20px"},children:[{id:"text-new",type:"text",props:{text:'<span style="color: #28a745; font-weight: bold;">NEW</span>',fontSize:"14px",color:"#28a745",align:"center"}},{id:"text-product",type:"text",props:{text:'<h1 style="margin: 10px 0;">{{product_name}}</h1>',fontSize:"32px",color:"#212529",align:"center"}},{id:"text-tagline",type:"text",props:{text:"The future of {{category}} is here.",fontSize:"18px",color:"#6c757d",align:"center",padding:"10px 0"}}]},{id:"image-product",type:"image",props:{src:"https://placehold.co/600x400",alt:"Product Image",width:"100%",align:"center"}},{id:"section-cta",type:"section",props:{backgroundColor:"#f8f9fa",padding:"40px 20px"},children:[{id:"text-cta",type:"text",props:{text:"Be among the first to experience {{product_name}}.",fontSize:"16px",color:"#212529",align:"center",padding:"0 0 20px 0"}},{id:"button-learn",type:"button",props:{text:"Learn More",href:"https://example.com/product",backgroundColor:"#28a745",color:"#ffffff",borderRadius:"4px",padding:"12px 24px",align:"center"}}]}]},feedback:{name:"Feedback Request",subject:"We'd love your feedback!",components:[{id:"section-main",type:"section",props:{backgroundColor:"#ffffff",padding:"40px 20px"},children:[{id:"text-hello",type:"text",props:{text:'<h2 style="margin: 0;">Hi {{first_name}},</h2>',fontSize:"24px",color:"#212529",align:"left"}},{id:"text-question",type:"text",props:{text:"How was your experience with us?",fontSize:"18px",color:"#6c757d",align:"left",padding:"20px 0"}},{id:"text-help",type:"text",props:{text:"Your feedback helps us improve our service.",fontSize:"16px",color:"#6c757d",align:"left",padding:"0 0 30px 0"}},{id:"button-feedback",type:"button",props:{text:"Give Feedback",href:"https://example.com/feedback",backgroundColor:"#17a2b8",color:"#ffffff",borderRadius:"6px",padding:"14px 28px",align:"center"}}]}]},reminder:{name:"Appointment Reminder",subject:"Reminder: Your appointment on {{date}}",components:[{id:"section-reminder",type:"section",props:{backgroundColor:"#ffc107",padding:"30px 20px"},children:[{id:"text-reminder",type:"text",props:{text:"‚è∞ <strong>Reminder</strong>",fontSize:"20px",color:"#212529",align:"center"}}]},{id:"section-details",type:"section",props:{backgroundColor:"#ffffff",padding:"40px 20px"},children:[{id:"text-hello",type:"text",props:{text:"Hi {{first_name}},",fontSize:"16px",color:"#212529",align:"left",padding:"0 0 20px 0"}},{id:"text-appointment",type:"text",props:{text:"This is a reminder about your upcoming appointment:",fontSize:"16px",color:"#212529",align:"left",padding:"0 0 20px 0"}},{id:"text-date",type:"text",props:{text:"üìÖ <strong>Date:</strong> {{date}}<br/>üïê <strong>Time:</strong> {{time}}",fontSize:"16px",color:"#212529",align:"left",padding:"0 0 30px 0"}},{id:"button-confirm",type:"button",props:{text:"Confirm Appointment",href:"https://example.com/confirm",backgroundColor:"#28a745",color:"#ffffff",borderRadius:"4px",padding:"12px 24px",align:"center"}}]}]},reengagement:{name:"Re-engagement Campaign",subject:"We miss you, {{first_name}}!",components:[{id:"section-main",type:"section",props:{backgroundColor:"#ffffff",padding:"50px 20px"},children:[{id:"text-miss",type:"text",props:{text:'<h1 style="margin: 0;">We Miss You! üíô</h1>',fontSize:"32px",color:"#007bff",align:"center"}},{id:"text-comeback",type:"text",props:{text:"It's been a while since we've seen you. Come back and see what's new!",fontSize:"18px",color:"#6c757d",align:"center",padding:"20px 0"}},{id:"text-offer",type:"text",props:{text:"<strong>Special offer just for you:</strong><br/>Get {{discount}}% off your next purchase",fontSize:"16px",color:"#212529",align:"center",padding:"0 0 30px 0"}},{id:"button-return",type:"button",props:{text:"Welcome Back Offer",href:"https://example.com/welcome-back",backgroundColor:"#007bff",color:"#ffffff",borderRadius:"6px",padding:"14px 30px",align:"center"}}]}]},columnShowcase:{name:"Column Showcase",subject:"Advanced Layout Examples",components:[{id:"section-intro",type:"section",props:{backgroundColor:"#ffffff",padding:"30px 20px"},children:[{id:"text-title",type:"text",props:{text:"<h2>Advanced Column Layouts</h2>",fontSize:"28px",color:"#212529",align:"center"}}]},{id:"columns-70-30",type:"columns",props:{columnCount:2,width1:70,width2:30},column1:[{id:"main-content",type:"text",props:{text:"<h3>Main Content (70%)</h3><p>This is the primary content area with more space for your message.</p>",fontSize:"16px",padding:"15px"}}],column2:[{id:"sidebar",type:"text",props:{text:"<h4>Sidebar (30%)</h4><p>Quick links or CTA</p>",fontSize:"14px",padding:"15px",color:"#6c757d"}}]},{id:"columns-25-50-25",type:"columns",props:{columnCount:3,width1:25,width2:50,width3:25},column1:[{id:"left-feature",type:"image",props:{src:"https://placehold.co/150x150",alt:"Feature 1",width:"100%"}}],column2:[{id:"center-feature",type:"text",props:{text:"<h3>Featured Content</h3><p>Center spotlight with 50% width</p>",fontSize:"16px",align:"center",padding:"15px"}}],column3:[{id:"right-feature",type:"image",props:{src:"https://placehold.co/150x150",alt:"Feature 2",width:"100%"}}]},{id:"columns-auto-3",type:"columns",props:{columnCount:3,width1:0,width2:0,width3:0},column1:[{id:"col1-title",type:"text",props:{text:"<h4>Equal Column 1</h4>",fontSize:"16px",align:"center"}}],column2:[{id:"col2-title",type:"text",props:{text:"<h4>Equal Column 2</h4>",fontSize:"16px",align:"center"}}],column3:[{id:"col3-title",type:"text",props:{text:"<h4>Equal Column 3</h4>",fontSize:"16px",align:"center"}}]}]}},{entries:y,setPrototypeOf:b,isFrozen:x,getPrototypeOf:v,getOwnPropertyDescriptor:E}=Object;let{freeze:w,seal:C,create:k}=Object,{apply:S,construct:T}="undefined"!=typeof Reflect&&Reflect;w||(w=function(e){return e}),C||(C=function(e){return e}),S||(S=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e.apply(t,r)}),T||(T=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const D=B(Array.prototype.forEach),I=B(Array.prototype.lastIndexOf),O=B(Array.prototype.pop),R=B(Array.prototype.push),M=B(Array.prototype.splice),N=B(String.prototype.toLowerCase),A=B(String.prototype.toString),z=B(String.prototype.match),L=B(String.prototype.replace),P=B(String.prototype.indexOf),_=B(String.prototype.trim),j=B(Object.prototype.hasOwnProperty),$=B(RegExp.prototype.test),H=(W=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T(W,t)});var W;function B(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return S(e,t,r)}}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;b&&b(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){const e=n(o);e!==o&&(x(t)||(t[r]=e),o=e)}e[o]=!0}return e}function U(e){for(let t=0;t<e.length;t++){j(e,t)||(e[t]=null)}return e}function K(e){const t=k(null);for(const[n,r]of y(e)){j(e,n)&&(Array.isArray(r)?t[n]=U(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=K(r):t[n]=r)}return t}function G(e,t){for(;null!==e;){const n=E(e,t);if(n){if(n.get)return B(n.get);if("function"==typeof n.value)return B(n.value)}e=v(e)}return function(){return null}}const J=w(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=w(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Y=w(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),q=w(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X=w(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Z=w(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Q=w(["#text"]),ee=w(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=w(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ne=w(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),re=w(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oe=C(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ae=C(/<%[\w\W]*|[\w\W]*%>/gm),ie=C(/\$\{[\w\W]*/gm),le=C(/^data-[\-\w.\u00B7-\uFFFF]+$/),se=C(/^aria-[\-\w]+$/),ce=C(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),de=C(/^(?:\w+script|data):/i),pe=C(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ue=C(/^html$/i),me=C(/^[a-z][.\w]*(-[.\w]+)+$/i);var ge=Object.freeze({__proto__:null,ARIA_ATTR:se,ATTR_WHITESPACE:pe,CUSTOM_ELEMENT:me,DATA_ATTR:le,DOCTYPE_NAME:ue,ERB_EXPR:ae,IS_ALLOWED_URI:ce,IS_SCRIPT_OR_DATA:de,MUSTACHE_EXPR:oe,TMPLIT_EXPR:ie});const he=1,fe=3,ye=7,be=8,xe=9;var ve=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.3.0",n.removed=[],!t||!t.document||t.document.nodeType!==xe||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const o=r,a=o.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:s,Element:c,NodeFilter:d,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:m,trustedTypes:g}=t,h=c.prototype,f=G(h,"cloneNode"),b=G(h,"remove"),x=G(h,"nextSibling"),v=G(h,"childNodes"),E=G(h,"parentNode");if("function"==typeof l){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let C,S="";const{implementation:T,createNodeIterator:W,createDocumentFragment:B,getElementsByTagName:U}=r,{importNode:oe}=o;let ae={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof y&&"function"==typeof E&&T&&void 0!==T.createHTMLDocument;const{MUSTACHE_EXPR:ie,ERB_EXPR:le,TMPLIT_EXPR:se,DATA_ATTR:de,ARIA_ATTR:pe,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:ve,CUSTOM_ELEMENT:Ee}=ge;let{IS_ALLOWED_URI:we}=ge,Ce=null;const ke=F({},[...J,...V,...Y,...X,...Q]);let Se=null;const Te=F({},[...ee,...te,...ne,...re]);let De=Object.seal(k(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Oe=null;const Re=Object.seal(k(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Me=!0,Ne=!0,Ae=!1,ze=!0,Le=!1,Pe=!0,_e=!1,je=!1,$e=!1,He=!1,We=!1,Be=!1,Fe=!0,Ue=!1,Ke=!0,Ge=!1,Je={},Ve=null;const Ye=F({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Xe=F({},["audio","video","img","source","image","track"]);let Ze=null;const Qe=F({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml";let rt=nt,ot=!1,at=null;const it=F({},[et,tt,nt],A);let lt=F({},["mi","mo","mn","ms","mtext"]),st=F({},["annotation-xml"]);const ct=F({},["title","style","font","a","script"]);let dt=null;const pt=["application/xhtml+xml","text/html"];let ut=null,mt=null;const gt=r.createElement("form"),ht=function(e){return e instanceof RegExp||e instanceof Function},ft=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!mt||mt!==e){if(e&&"object"==typeof e||(e={}),e=K(e),dt=-1===pt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ut="application/xhtml+xml"===dt?A:N,Ce=j(e,"ALLOWED_TAGS")?F({},e.ALLOWED_TAGS,ut):ke,Se=j(e,"ALLOWED_ATTR")?F({},e.ALLOWED_ATTR,ut):Te,at=j(e,"ALLOWED_NAMESPACES")?F({},e.ALLOWED_NAMESPACES,A):it,Ze=j(e,"ADD_URI_SAFE_ATTR")?F(K(Qe),e.ADD_URI_SAFE_ATTR,ut):Qe,qe=j(e,"ADD_DATA_URI_TAGS")?F(K(Xe),e.ADD_DATA_URI_TAGS,ut):Xe,Ve=j(e,"FORBID_CONTENTS")?F({},e.FORBID_CONTENTS,ut):Ye,Ie=j(e,"FORBID_TAGS")?F({},e.FORBID_TAGS,ut):K({}),Oe=j(e,"FORBID_ATTR")?F({},e.FORBID_ATTR,ut):K({}),Je=!!j(e,"USE_PROFILES")&&e.USE_PROFILES,Me=!1!==e.ALLOW_ARIA_ATTR,Ne=!1!==e.ALLOW_DATA_ATTR,Ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ze=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Le=e.SAFE_FOR_TEMPLATES||!1,Pe=!1!==e.SAFE_FOR_XML,_e=e.WHOLE_DOCUMENT||!1,He=e.RETURN_DOM||!1,We=e.RETURN_DOM_FRAGMENT||!1,Be=e.RETURN_TRUSTED_TYPE||!1,$e=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,Ue=e.SANITIZE_NAMED_PROPS||!1,Ke=!1!==e.KEEP_CONTENT,Ge=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||ce,rt=e.NAMESPACE||nt,lt=e.MATHML_TEXT_INTEGRATION_POINTS||lt,st=e.HTML_INTEGRATION_POINTS||st,De=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ht(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(De.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ht(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(De.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(De.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(Ne=!1),We&&(He=!0),Je&&(Ce=F({},Q),Se=[],!0===Je.html&&(F(Ce,J),F(Se,ee)),!0===Je.svg&&(F(Ce,V),F(Se,te),F(Se,re)),!0===Je.svgFilters&&(F(Ce,Y),F(Se,te),F(Se,re)),!0===Je.mathMl&&(F(Ce,X),F(Se,ne),F(Se,re))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?Re.tagCheck=e.ADD_TAGS:(Ce===ke&&(Ce=K(Ce)),F(Ce,e.ADD_TAGS,ut))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?Re.attributeCheck=e.ADD_ATTR:(Se===Te&&(Se=K(Se)),F(Se,e.ADD_ATTR,ut))),e.ADD_URI_SAFE_ATTR&&F(Ze,e.ADD_URI_SAFE_ATTR,ut),e.FORBID_CONTENTS&&(Ve===Ye&&(Ve=K(Ve)),F(Ve,e.FORBID_CONTENTS,ut)),Ke&&(Ce["#text"]=!0),_e&&F(Ce,["html","head","body"]),Ce.table&&(F(Ce,["tbody"]),delete Ie.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw H('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw H('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=e.TRUSTED_TYPES_POLICY,S=C.createHTML("")}else void 0===C&&(C=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(a){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(g,a)),null!==C&&"string"==typeof S&&(S=C.createHTML(""));w&&w(e),mt=e}},yt=F({},[...V,...Y,...q]),bt=F({},[...X,...Z]),xt=function(e){R(n.removed,{element:e});try{E(e).removeChild(e)}catch(t){b(e)}},vt=function(e,t){try{R(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){R(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(He||We)try{xt(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},Et=function(e){let t=null,n=null;if($e)e="<remove></remove>"+e;else{const t=z(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===dt&&rt===nt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=C?C.createHTML(e):e;if(rt===nt)try{t=(new m).parseFromString(o,dt)}catch(i){}if(!t||!t.documentElement){t=T.createDocument(rt,"template",null);try{t.documentElement.innerHTML=ot?S:o}catch(i){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),rt===nt?U.call(t,_e?"html":"body")[0]:_e?t.documentElement:a},wt=function(e){return W.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ct=function(e){return e instanceof u&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof p)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},kt=function(e){return"function"==typeof s&&e instanceof s};function St(e,t,r){D(e,e=>{e.call(n,t,r,mt)})}const Tt=function(e){let t=null;if(St(ae.beforeSanitizeElements,e,null),Ct(e))return xt(e),!0;const r=ut(e.nodeName);if(St(ae.uponSanitizeElement,e,{tagName:r,allowedTags:Ce}),Pe&&e.hasChildNodes()&&!kt(e.firstElementChild)&&$(/<[/\w!]/g,e.innerHTML)&&$(/<[/\w!]/g,e.textContent))return xt(e),!0;if(e.nodeType===ye)return xt(e),!0;if(Pe&&e.nodeType===be&&$(/<[/\w]/g,e.data))return xt(e),!0;if(!(Re.tagCheck instanceof Function&&Re.tagCheck(r))&&(!Ce[r]||Ie[r])){if(!Ie[r]&&It(r)){if(De.tagNameCheck instanceof RegExp&&$(De.tagNameCheck,r))return!1;if(De.tagNameCheck instanceof Function&&De.tagNameCheck(r))return!1}if(Ke&&!Ve[r]){const t=E(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const o=f(n[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,x(e))}}}return xt(e),!0}return e instanceof c&&!function(e){let t=E(e);t&&t.tagName||(t={namespaceURI:rt,tagName:"template"});const n=N(e.tagName),r=N(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===r||lt[r]):Boolean(yt[n]):e.namespaceURI===et?t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&st[r]:Boolean(bt[n]):e.namespaceURI===nt?!(t.namespaceURI===tt&&!st[r])&&!(t.namespaceURI===et&&!lt[r])&&!bt[n]&&(ct[n]||!yt[n]):!("application/xhtml+xml"!==dt||!at[e.namespaceURI]))}(e)?(xt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!$(/<\/no(script|embed|frames)/i,e.innerHTML)?(Le&&e.nodeType===fe&&(t=e.textContent,D([ie,le,se],e=>{t=L(t,e," ")}),e.textContent!==t&&(R(n.removed,{element:e.cloneNode()}),e.textContent=t)),St(ae.afterSanitizeElements,e,null),!1):(xt(e),!0)},Dt=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in r||n in gt))return!1;if(Ne&&!Oe[t]&&$(de,t));else if(Me&&$(pe,t));else if(Re.attributeCheck instanceof Function&&Re.attributeCheck(t,e));else if(!Se[t]||Oe[t]){if(!(It(e)&&(De.tagNameCheck instanceof RegExp&&$(De.tagNameCheck,e)||De.tagNameCheck instanceof Function&&De.tagNameCheck(e))&&(De.attributeNameCheck instanceof RegExp&&$(De.attributeNameCheck,t)||De.attributeNameCheck instanceof Function&&De.attributeNameCheck(t,e))||"is"===t&&De.allowCustomizedBuiltInElements&&(De.tagNameCheck instanceof RegExp&&$(De.tagNameCheck,n)||De.tagNameCheck instanceof Function&&De.tagNameCheck(n))))return!1}else if(Ze[t]);else if($(we,L(n,ve,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==P(n,"data:")||!qe[e]){if(Ae&&!$(me,L(n,ve,"")));else if(n)return!1}else;return!0},It=function(e){return"annotation-xml"!==e&&z(e,Ee)},Ot=function(e){St(ae.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ct(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se,forceKeepAttr:void 0};let o=t.length;for(;o--;){const i=t[o],{name:l,namespaceURI:s,value:c}=i,d=ut(l),p=c;let u="value"===l?p:_(p);if(r.attrName=d,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,St(ae.uponSanitizeAttribute,e,r),u=r.attrValue,!Ue||"id"!==d&&"name"!==d||(vt(l,e),u="user-content-"+u),Pe&&$(/((--!?|])>)|<\/(style|title|textarea)/i,u)){vt(l,e);continue}if("attributename"===d&&z(u,"href")){vt(l,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){vt(l,e);continue}if(!ze&&$(/\/>/i,u)){vt(l,e);continue}Le&&D([ie,le,se],e=>{u=L(u,e," ")});const m=ut(e.nodeName);if(Dt(m,d,u)){if(C&&"object"==typeof g&&"function"==typeof g.getAttributeType)if(s);else switch(g.getAttributeType(m,d)){case"TrustedHTML":u=C.createHTML(u);break;case"TrustedScriptURL":u=C.createScriptURL(u)}if(u!==p)try{s?e.setAttributeNS(s,l,u):e.setAttribute(l,u),Ct(e)?xt(e):O(n.removed)}catch(a){vt(l,e)}}else vt(l,e)}St(ae.afterSanitizeAttributes,e,null)},Rt=function e(t){let n=null;const r=wt(t);for(St(ae.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)St(ae.uponSanitizeShadowNode,n,null),Tt(n),Ot(n),n.content instanceof i&&e(n.content);St(ae.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,l=null,c=null;if(ot=!e,ot&&(e="\x3c!--\x3e"),"string"!=typeof e&&!kt(e)){if("function"!=typeof e.toString)throw H("toString is not a function");if("string"!=typeof(e=e.toString()))throw H("dirty is not a string, aborting")}if(!n.isSupported)return e;if(je||ft(t),n.removed=[],"string"==typeof e&&(Ge=!1),Ge){if(e.nodeName){const t=ut(e.nodeName);if(!Ce[t]||Ie[t])throw H("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)r=Et("\x3c!----\x3e"),a=r.ownerDocument.importNode(e,!0),a.nodeType===he&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!He&&!Le&&!_e&&-1===e.indexOf("<"))return C&&Be?C.createHTML(e):e;if(r=Et(e),!r)return He?null:Be?S:""}r&&$e&&xt(r.firstChild);const d=wt(Ge?e:r);for(;l=d.nextNode();)Tt(l),Ot(l),l.content instanceof i&&Rt(l.content);if(Ge)return e;if(He){if(We)for(c=B.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(Se.shadowroot||Se.shadowrootmode)&&(c=oe.call(o,c,!0)),c}let p=_e?r.outerHTML:r.innerHTML;return _e&&Ce["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&$(ue,r.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+p),Le&&D([ie,le,se],e=>{p=L(p,e," ")}),C&&Be?C.createHTML(p):p},n.setConfig=function(){ft(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),je=!0},n.clearConfig=function(){mt=null,je=!1},n.isValidAttribute=function(e,t,n){mt||ft({});const r=ut(e),o=ut(t);return Dt(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&R(ae[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=I(ae[e],t);return-1===n?void 0:M(ae[e],n,1)[0]}return O(ae[e])},n.removeHooks=function(e){ae[e]=[]},n.removeAllHooks=function(){ae={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const Ee=["p","br","strong","em","u","a","ul","ol","li","h1","h2","h3","h4","h5","h6","span","div","table","tr","td","th","tbody","thead","tfoot","img","b","i","s","sub","sup","hr","blockquote","pre","code"],we=["href","target","rel","style","class","id","src","alt","width","height","title","align","border","cellpadding","cellspacing","bgcolor","colspan","rowspan"];const Ce=t.forwardRef((e,n)=>{const{apiKey:r,workspaceId:o,minHeight:a="600px",displayMode:i,appearance:l,customFonts:s,customBlocks:c,designSystem:d,onLoad:p,onReady:u,onDesignChange:m,style:g,className:h}=e,f=t.useRef(null),y=t.useRef(null),b=t.useRef(`kaptha-editor-${Math.random().toString(36).substr(2,9)}`);return t.useEffect(()=>{if(f.current){if("undefined"!=typeof window&&(window.kaptha||window.kapthaEmailEditor)){try{const e={id:b.current,apiKey:r,...o&&{workspaceId:o},...a&&{minHeight:a},...i&&{displayMode:i},...l&&{appearance:l},...s&&{customFonts:s},...c&&{customBlocks:c},...d&&{designSystem:d},...p&&{onLoad:p},...u&&{onReady:u},...m&&{onDesignChange:m}},t=(window.kapthaEmailEditor||window.kaptha).init(e);y.current=t,console.log("[Kaptha React] Editor instance created")}catch(e){console.error("[Kaptha React] Failed to create editor:",e)}return()=>{y.current&&(y.current.destroy(),y.current=null)}}console.error("[Kaptha] API not found. Make sure the CDN script is loaded.")}},[r,o,a,i,l,s,c,d,p,u,m]),t.useImperativeHandle(n,()=>({loadDesign:e=>{y.current?.loadDesign(e)},saveDesign:()=>y.current?.saveDesign()||{components:[]},exportHtml:async e=>y.current?.exportHtml(e)||{html:"",mjml:""},exportMjml:()=>y.current?.exportMjml()||"",exportJson:()=>y.current?.exportJson()||{components:[]},addEventListener:(e,t)=>{y.current?.addEventListener(e,t)},removeEventListener:(e,t)=>{y.current?.removeEventListener(e,t)},setDesignSystem:e=>{y.current?.setDesignSystem(e)},destroy:()=>{y.current?.destroy()}}),[]),t.createElement("div",{ref:f,id:b.current,className:h,style:{width:"100%",minHeight:a,...g}})});Ce.displayName="KapthaEmailEditorWrapper";const ke=t.createContext({dragDropManager:void 0});function Se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Te,De,Ie={exports:{}},Oe={};var Re=(De||(De=1,Ie.exports=function(){if(Te)return Oe;Te=1;var e=t,n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var l,s={},c=null,d=null;for(l in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,l)&&!i.hasOwnProperty(l)&&(s[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===s[l]&&(s[l]=t[l]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:a.current}}return Oe.Fragment=r,Oe.jsx=l,Oe.jsxs=l,Oe}()),Ie.exports);function Me(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ne="function"==typeof Symbol&&Symbol.observable||"@@observable",Ae=function(){return Math.random().toString(36).substring(7).split("").join(".")},ze={INIT:"@@redux/INIT"+Ae(),REPLACE:"@@redux/REPLACE"+Ae()};function Le(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Me(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Me(1));return n(Le)(e,t)}if("function"!=typeof e)throw new Error(Me(2));var o=e,a=t,i=[],l=i,s=!1;function c(){l===i&&(l=i.slice())}function d(){if(s)throw new Error(Me(3));return a}function p(e){if("function"!=typeof e)throw new Error(Me(4));if(s)throw new Error(Me(5));var t=!0;return c(),l.push(e),function(){if(t){if(s)throw new Error(Me(6));t=!1,c();var n=l.indexOf(e);l.splice(n,1),i=null}}}function u(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(Me(7));if(void 0===e.type)throw new Error(Me(8));if(s)throw new Error(Me(9));try{s=!0,a=o(a,e)}finally{s=!1}for(var t=i=l,n=0;n<t.length;n++){(0,t[n])()}return e}return u({type:ze.INIT}),(r={dispatch:u,subscribe:p,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Me(10));o=e,u({type:ze.REPLACE})}})[Ne]=function(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Me(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[Ne]=function(){return this},e},r}function Pe(e,t,...n){if("undefined"!=typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;e=new Error(t.replace(/%s/g,function(){return n[r++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function _e(e){return"object"==typeof e}const je="dnd-core/INIT_COORDS",$e="dnd-core/BEGIN_DRAG",He="dnd-core/PUBLISH_DRAG_SOURCE",We="dnd-core/HOVER",Be="dnd-core/DROP",Fe="dnd-core/END_DRAG";function Ue(e,t){return{type:je,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Ke={type:je,payload:{clientOffset:null,sourceClientOffset:null}};function Ge(e){return function(t=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:o,getSourceClientOffset:a}=n,i=e.getMonitor(),l=e.getRegistry();e.dispatch(Ue(o)),function(e,t,n){Pe(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(e){Pe(n.getSource(e),"Expected sourceIds to be registered.")})}(t,i,l);const s=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,i);if(null==s)return void e.dispatch(Ke);let c=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");!function(e){Pe("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(a),c=a(s)}e.dispatch(Ue(o,c));const d=l.getSource(s).beginDrag(i,s);if(null==d)return;!function(e){Pe(_e(e),"Item must be an object.")}(d),l.pinSource(s);const p=l.getSourceType(s);return{type:$e,payload:{itemType:p,item:d,sourceId:s,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!r}}}}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Je(e,t,n[t])})}return e}function Ye(e){return function(t={}){const n=e.getMonitor(),r=e.getRegistry();!function(e){Pe(e.isDragging(),"Cannot call drop while not dragging."),Pe(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const o=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);o.forEach((o,a)=>{const i=function(e,t,n,r){const o=n.getTarget(e);let a=o?o.drop(r,e):void 0;(function(e){Pe(void 0===e||_e(e),"Drop result must either be an object or undefined.")})(a),void 0===a&&(a=0===t?{}:r.getDropResult());return a}(o,a,r,n),l={type:Be,payload:{dropResult:Ve({},t,i)}};e.dispatch(l)})}}function qe(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){Pe(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:Fe}}}function Xe(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}function Ze(e){return function(t,{clientOffset:n}={}){!function(e){Pe(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),o=e.getMonitor(),a=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const o=e[r];Xe(t.getTargetType(o),n)||e.splice(r,1)}}(r,a,o.getItemType()),function(e,t,n){Pe(t.isDragging(),"Cannot call hover while not dragging."),Pe(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const t=e[r];Pe(e.lastIndexOf(t)===r,"Expected targetIds to be unique in the passed array.");Pe(n.getTarget(t),"Expected targetIds to be registered.")}}(r,o,a),function(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}(r,o,a),{type:We,payload:{targetIds:r,clientOffset:n||null}}}}function Qe(e){return function(){if(e.getMonitor().isDragging())return{type:He}}}class et{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:Ge(e),publishDragSource:Qe(e),hover:Ze(e),drop:Ye(e),endDrag:qe(e)}}(this);return Object.keys(n).reduce((r,o)=>{const a=n[o];var i;return r[o]=(i=a,(...n)=>{const r=i.apply(e,n);void 0!==r&&t(r)}),r},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function tt(e,t){return{x:e.x-t.x,y:e.y-t.y}}const nt=[],rt=[];nt.__IS_NONE__=!0,rt.__IS_ALL__=!0;class ot{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;Pe("function"==typeof e,"listener must be a function."),Pe(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe(()=>{const t=this.store.getState(),o=t.stateId;try{const a=o===r||o===r+1&&!function(e,t){return e!==nt&&(e===rt||void 0===t||(n=e,t.filter(e=>n.indexOf(e)>-1)).length>0);var n}(t.dirtyHandlerIds,n);a||e()}finally{r=o}})}subscribeToOffsetChange(e){Pe("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return Pe(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(Pe(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;return Xe(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(Pe(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Xe(r,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const i=a.indexOf(e);return n?i===a.length-1:i>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?tt((a=r,{x:(o=t).x+a.x,y:o.y+a.y}),n):null;var o,a}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?tt(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const at="undefined"!=typeof globalThis?globalThis:self,it=at.MutationObserver||at.WebKitMutationObserver;function lt(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const st="function"==typeof it?function(e){let t=1;const n=new it(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:lt;class ct{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const dt=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=st(this.flush),this.requestErrorThrow=lt(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},pt=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new ct(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(dt.registerPendingError);const ut="dnd-core/ADD_SOURCE",mt="dnd-core/ADD_TARGET",gt="dnd-core/REMOVE_SOURCE",ht="dnd-core/REMOVE_TARGET";function ft(e,t){t&&Array.isArray(e)?e.forEach(e=>ft(e,!1)):Pe("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var yt,bt;(bt=yt||(yt={})).SOURCE="SOURCE",bt.TARGET="TARGET";let xt=0;function vt(e){const t=(xt++).toString();switch(e){case yt.SOURCE:return`S${t}`;case yt.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function Et(e){switch(e[0]){case"S":return yt.SOURCE;case"T":return yt.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function wt(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,o]}=n.next();if(o===t)return!0;r=!!e}while(!r);return!1}class Ct{addSource(e,t){ft(e),function(e){Pe("function"==typeof e.canDrag,"Expected canDrag to be a function."),Pe("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Pe("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(yt.SOURCE,e,t);return this.store.dispatch(function(e){return{type:ut,payload:{sourceId:e}}}(n)),n}addTarget(e,t){ft(e,!0),function(e){Pe("function"==typeof e.canDrop,"Expected canDrop to be a function."),Pe("function"==typeof e.hover,"Expected hover to be a function."),Pe("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(yt.TARGET,e,t);return this.store.dispatch(function(e){return{type:mt,payload:{targetId:e}}}(n)),n}containsHandler(e){return wt(this.dragSources,e)||wt(this.dropTargets,e)}getSource(e,t=!1){Pe(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Pe(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Pe(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Pe(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Et(e)===yt.SOURCE}isTargetId(e){return Et(e)===yt.TARGET}removeSource(e){var t;Pe(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:gt,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},dt.enqueueTask(pt.create(t))}removeTarget(e){Pe(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:ht,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);Pe(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Pe(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=vt(e);return this.types.set(r,t),e===yt.SOURCE?this.dragSources.set(r,n):e===yt.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const kt=(e,t)=>e===t;function St(e=nt,t){switch(t.type){case We:break;case ut:case mt:case ht:case gt:return nt;default:return rt}const{targetIds:n=[],prevTargetIds:r=[]}=t.payload,o=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const o=[];return n.forEach((e,t)=>{1===e&&o.push(t)}),o}(n,r);if(!(o.length>0||!function(e,t,n=kt){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(n,r)))return nt;const a=r[r.length-1],i=n[n.length-1];return a!==i&&(a&&o.push(a),i&&o.push(i)),o}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Dt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function It(e=Dt,t){const{payload:n}=t;switch(t.type){case je:case $e:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case We:return r=e.clientOffset,o=n.clientOffset,!r&&!o||r&&o&&r.x===o.x&&r.y===o.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Tt(e,t,n[t])})}return e}({},e,{clientOffset:n.clientOffset});case Fe:case Be:return Dt;default:return e}var r,o}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ot(e,t,n[t])})}return e}const Mt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Nt(e=Mt,t){const{payload:n}=t;switch(t.type){case $e:return Rt({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case He:return Rt({},e,{isSourcePublic:!0});case We:return Rt({},e,{targetIds:n.targetIds});case ht:return-1===e.targetIds.indexOf(n.targetId)?e:Rt({},e,{targetIds:(r=e.targetIds,o=n.targetId,r.filter(e=>e!==o))});case Be:return Rt({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Fe:return Rt({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var r,o}function At(e=0,t){switch(t.type){case ut:case mt:return e+1;case gt:case ht:return e-1;default:return e}}function zt(e=0){return e+1}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Lt(e,t,n[t])})}return e}function _t(e={},t){return{dirtyHandlerIds:St(e.dirtyHandlerIds,{type:t.type,payload:Pt({},t.payload,{prevTargetIds:(n=e,r="dragOperation.targetIds",o=[],r.split(".").reduce((e,t)=>e&&e[t]?e[t]:o||null,n))})}),dragOffset:It(e.dragOffset,t),refCount:At(e.refCount,t),dragOperation:Nt(e.dragOperation,t),stateId:zt(e.stateId)};var n,r,o}function jt(e,t=void 0,n={},r=!1){const o=function(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Le(_t,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(r),a=new ot(o,new Ct(o)),i=new et(o,a),l=e(i,t,n);return i.receiveBackend(l),i}function $t(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}let Ht=0;const Wt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Bt,Ft,Ut=t.memo(function(e){var{children:n}=e,r=$t(e,["children"]);const[o,a]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e,t=Kt(),n,r){const o=t;o[Wt]||(o[Wt]={dragDropManager:jt(e,t,n,r)});return o[Wt]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(r);return t.useEffect(()=>{if(a){const e=Kt();return++Ht,()=>{0===--Ht&&(e[Wt]=null)}}},[]),Re.jsx(ke.Provider,{value:o,children:n})});function Kt(){return"undefined"!=typeof globalThis?globalThis:window}const Gt=Se(Ft?Bt:(Ft=1,Bt=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!==o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n})),Jt="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function Vt(e,n,r){const[o,a]=function(e,n,r){const[o,a]=t.useState(()=>n(e)),i=t.useCallback(()=>{const t=n(e);Gt(o,t)||(a(t),r&&r())},[o,e,r]);return Jt(i),[o,i]}(e,n,r);return Jt(function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})},[e,a]),o}function Yt(e,t,n){return Vt(t,e||(()=>({})),()=>n.reconnect())}function qt(e,n){const r=[];return"function"!=typeof e&&r.push(e),t.useMemo(()=>"function"==typeof e?e():e,r)}function Xt(e){return t.useMemo(()=>e.hooks.dragSource(),[e])}function Zt(e){return t.useMemo(()=>e.hooks.dragPreview(),[e])}let Qt=!1,en=!1;class tn{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Pe(!Qt,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Qt=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Qt=!1}}isDragging(){if(!this.sourceId)return!1;Pe(!en,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return en=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{en=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let nn=!1;class rn{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;Pe(!nn,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return nn=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{nn=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function on(e,t,n,r){let o;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;const a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let s=0;s<a.length;s++){const n=a[s];if(!l(n))return!1;const r=e[n],i=t[n];if(o=void 0,!1===o||void 0===o&&r!==i)return!1}return!0}function an(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ln(e){return(n=null,r=null)=>{if(!t.isValidElement(n)){const t=n;return e(t,r),t}const o=n;!function(e){if("string"==typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(o);return function(e,n){const r=e.ref;return Pe("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?t.cloneElement(e,{ref:e=>{cn(r,e),cn(n,e)}}):t.cloneElement(e,{ref:n})}(o,r?t=>e(t,r):e)}}function sn(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=ln(r);t[n]=()=>e}}),t}function cn(e,t){"function"==typeof e?e(t):e.current=t}class dn{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!on(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!on(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=sn({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,an(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,an(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class pn{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!on(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=sn({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,an(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function un(){const{dragDropManager:e}=t.useContext(ke);return Pe(null!=e,"Expected drag drop context"),e}class mn{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{},null!=n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:o}=n;return o?o(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function gn(e,n,r){const o=un(),a=function(e,n,r){const o=t.useMemo(()=>new mn(e,n,r),[n,r]);return t.useEffect(()=>{o.spec=e},[e]),o}(e,n,r),i=function(e){return t.useMemo(()=>{const t=e.type;return Pe(null!=t,"spec.type must be defined"),t},[e])}(e);Jt(function(){if(null!=i){const[e,t]=function(e,t,n){const r=n.getRegistry(),o=r.addSource(e,t);return[o,()=>r.removeSource(o)]}(i,a,o);return n.receiveHandlerId(e),r.receiveHandlerId(e),t}},[o,n,r,a,i])}function hn(e,n){const r=qt(e);Pe(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const o=function(){const e=un();return t.useMemo(()=>new tn(e),[e])}(),a=function(e,n){const r=un(),o=t.useMemo(()=>new dn(r.getBackend()),[r]);return Jt(()=>(o.dragSourceOptions=e||null,o.reconnect(),()=>o.disconnectDragSource()),[o,e]),Jt(()=>(o.dragPreviewOptions=n||null,o.reconnect(),()=>o.disconnectDragPreview()),[o,n]),o}(r.options,r.previewOptions);return gn(r,o,a),[Yt(r.collect,o,a),Xt(a),Zt(a)]}function fn(e){return t.useMemo(()=>e.hooks.dropTarget(),[e])}class yn{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function bn(e,n,r){const o=un(),a=function(e,n){const r=t.useMemo(()=>new yn(e,n),[n]);return t.useEffect(()=>{r.spec=e},[e]),r}(e,n),i=function(e){const{accept:n}=e;return t.useMemo(()=>(Pe(null!=e.accept,"accept must be defined"),Array.isArray(n)?n:[n]),[n])}(e);Jt(function(){const[e,t]=function(e,t,n){const r=n.getRegistry(),o=r.addTarget(e,t);return[o,()=>r.removeTarget(o)]}(i,a,o);return n.receiveHandlerId(e),r.receiveHandlerId(e),t},[o,n,a,r,i.map(e=>e.toString()).join("|")])}function xn(e,n){const r=qt(e),o=function(){const e=un();return t.useMemo(()=>new rn(e),[e])}(),a=function(e){const n=un(),r=t.useMemo(()=>new pn(n.getBackend()),[n]);return Jt(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}(r.options);return bn(r,o,a),[Yt(r.collect,o,a),fn(a)]}function vn(e){let t=null;return()=>(null==t&&(t=e()),t)}class En{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);const o=[];return n.forEach(e=>o.push(e)),o}(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var n,r;return this.entered=(n=this.entered.filter(this.isNodeInDocument),r=e,n.filter(e=>e!==r)),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class wn{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];null!=r&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Cn="__NATIVE_FILE__",kn="__NATIVE_URL__",Sn="__NATIVE_TEXT__",Tn="__NATIVE_HTML__",Dn=Object.freeze(Object.defineProperty({__proto__:null,FILE:Cn,HTML:Tn,TEXT:Sn,URL:kn},Symbol.toStringTag,{value:"Module"}));function In(e,t,n){const r=t.reduce((t,n)=>t||e.getData(n),"");return null!=r?r:n}const On={[Cn]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Tn]:{exposeProperties:{html:(e,t)=>In(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[kn]:{exposeProperties:{urls:(e,t)=>In(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Sn]:{exposeProperties:{text:(e,t)=>In(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Rn(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(On).filter(e=>{const n=On[e];return!!(null==n?void 0:n.matchesTypes)&&n.matchesTypes.some(e=>t.indexOf(e)>-1)})[0]||null}const Mn=vn(()=>/firefox/i.test(navigator.userAgent)),Nn=vn(()=>Boolean(window.safari));class An{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:o,c3s:a}=this;let i=t.length-1;if(e===t[i])return n[i];let l,s=0,c=a.length-1;for(;s<=c;){l=Math.floor(.5*(s+c));const r=t[l];if(r<e)s=l+1;else{if(!(r>e))return n[l];c=l-1}}i=Math.max(0,c);const d=e-t[i],p=d*d;return n[i]+r[i]*d+o[i]*p+a[i]*d*p}constructor(e,t){const{length:n}=e,r=[];for(let u=0;u<n;u++)r.push(u);r.sort((t,n)=>e[t]<e[n]?-1:1);const o=[],a=[];let i,l;for(let u=0;u<n-1;u++)i=e[u+1]-e[u],l=t[u+1]-t[u],o.push(i),a.push(l/i);const s=[a[0]];for(let u=0;u<o.length-1;u++){const e=a[u],t=a[u+1];if(e*t<=0)s.push(0);else{i=o[u];const n=o[u+1],r=i+n;s.push(3*r/((r+n)/e+(r+i)/t))}}s.push(a[a.length-1]);const c=[],d=[];let p;for(let u=0;u<s.length-1;u++){p=a[u];const e=s[u],t=1/o[u],n=e+s[u+1]-p-p;c.push((p-e-n)*t),d.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=s,this.c2s=c,this.c3s=d}}function zn(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Ln(e){return{x:e.clientX,y:e.clientY}}function Pn(e,t,n,r,o){const a="IMG"===(i=t).nodeName&&(Mn()||!(null===(l=document.documentElement)||void 0===l?void 0:l.contains(i)));var i,l;const s=zn(a?e:t),c={x:n.x-s.x,y:n.y-s.y},{offsetWidth:d,offsetHeight:p}=e,{anchorX:u,anchorY:m}=r,{dragPreviewWidth:g,dragPreviewHeight:h}=function(e,t,n,r){let o=e?t.width:n,a=e?t.height:r;return Nn()&&e&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:a}}(a,t,d,p),{offsetX:f,offsetY:y}=o,b=0===y||y;return{x:0===f||f?f:new An([0,.5,1],[c.x,c.x/d*g,c.x+g-d]).interpolate(u),y:b?y:(()=>{let e=new An([0,.5,1],[c.y,c.y/p*h,c.y+h-p]).interpolate(m);return Nn()&&a&&(e+=(window.devicePixelRatio-1)*h),e})()}}class _n{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){jn(e,t,n[t])})}return e}class Hn{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=t=>this.handleDragStart(t,e),o=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),o=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return $n({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return $n({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Dn).some(t=>Dn[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=On[e];if(!n)throw new Error(`native type ${e} has no configuration`);const r=new wn(n);return r.loadDataTransfer(t),r}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&zn(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=Ln(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:r}=e,o=Rn(r);if(this.monitor.isDragging()){if(r&&"function"==typeof r.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),o=this.sourcePreviewNodes.get(e)||t;if(o){const{anchorX:e,anchorY:a,offsetX:i,offsetY:l}=this.getCurrentSourcePreviewNodeOptions(),s=Pn(t,o,n,{anchorX:e,anchorY:a},{offsetX:i,offsetY:l});r.setDragImage(o,s.x,s.y)}}try{null==r||r.setData("application/json",{})}catch(a){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(o)this.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,r=Rn(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Ln(e)});t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=Ln(e),this.scheduleHover(t);(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Rn(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Ln(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new _n(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new En(this.isNodeInDocument)}}const Wn=function(e,t,n){return new Hn(e,t,n)};let Bn=0;const Fn=()=>"undefined"!=typeof window&&window.__E2E_DETERMINISTIC_IDS?(Bn+=1,`comp-${Bn}`):`comp-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Un=t.createContext(void 0),Kn=()=>{const e=t.useContext(Un);if(!e)throw new Error("useEmailEditor must be used within EmailEditorProvider");return e},Gn=({children:e,initialTemplate:n})=>{const[r,o]=t.useState(n?.components||[]),[a,i]=t.useState(null),[l,s]=t.useState([]),[d,p]=t.useState(n||{name:"Untitled",components:[]}),[u,m]=t.useState([[...n?.components||[]]]),[g,f]=t.useState(0),[y,b]=t.useState(h),[x,v]=t.useState(()=>{try{const e=localStorage.getItem("emailbuilder.savedBlocks");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}),E=e=>{v(e);try{localStorage.setItem("emailbuilder.savedBlocks",JSON.stringify(e))}catch{}},w=e=>e.map(e=>JSON.parse(JSON.stringify(e))),C=e=>{o(e),(e=>{const t=u.slice(0,g+1);t.push([...e]),m(t),f(t.length-1)})(e)},k=e=>{const t={...e,id:Fn()};if(e.children&&Array.isArray(e.children)&&(t.children=e.children.map(e=>k(e))),"columns"===e.type)for(let n=1;n<=4;n++){const r=`column${n}`;e[r]&&Array.isArray(e[r])&&(t[r]=e[r].map(e=>k(e)))}return t},S=(e,t,n)=>{for(let r=0;r<e.length;r++){const o=e[r];if(o){if(o.id===t)return{component:o,...n&&{parentInfo:n},...void 0===n&&{topLevelIndex:r}};if("section"===o.type&&o.children)for(let e=0;e<o.children.length;e++){const n=o.children[e];if(!n)continue;const r=S([n],t,{parent:o,key:"children",index:e});if(r.component)return r}if("columns"===o.type)for(let e=1;e<=4;e++){const n=`column${e}`,r=o[n];if(r&&Array.isArray(r))for(let e=0;e<r.length;e++){const a=r[e];if(!a)continue;const i=S([a],t,{parent:o,key:n,index:e});if(i.component)return i}}}}return{component:null}},T=(e,t,n,r="")=>e.map((e,o)=>{const a=r?`${r} > ${e.type}[${e.id}]`:`${e.type}[${e.id}]`;if(e.id===t){if(c("[updateComponentDeep] MATCH at",a,"Applying updates:",n),c("[updateComponentDeep] comp BEFORE:",JSON.stringify(e,null,2)),"columns"===e.type){const t={...e};for(let e=1;e<=4;e++){const r=`column${e}`,o=n;o[r]&&(t[r]=Array.isArray(o[r])?[...o[r]]:o[r],c("[updateComponentDeep]",r,"updated to:",t[r]))}const r={...t,...n};return c("[updateComponentDeep] comp AFTER:",JSON.stringify(r,null,2)),r}return{...e,...n}}if("columns"===e.type){const r=e,o={...r};for(let e=1;e<=4;e++){const i=`column${e}`;r[i]&&(o[i]=T([...r[i]],t,n,`${a} > ${i}`))}return o}return Array.isArray(e.children)&&e.children.length>0?{...e,children:T([...e.children],t,n,`${a} > children`)}:e}),D=g>0,I=g<u.length-1;return t.createElement(Un.Provider,{value:{components:r,setComponents:C,addComponent:(e,t)=>{const n=[...r];void 0!==t?n.splice(t,0,e):n.push(e),C(n)},removeComponent:e=>{const t=n=>n.filter(t=>t.id!==e).map(e=>{if("section"===e.type&&e.children)return{...e,children:t(e.children)};if("columns"===e.type){const n={...e};for(let r=1;r<=4;r++){const o=`column${r}`;e[o]&&Array.isArray(e[o])&&(n[o]=t(e[o]))}return n}return e}),n=t(r);C(n),a===e&&i(null)},updateComponent:(e,t)=>{c("[updateComponent] Called with id:",e,"updates:",t);const n=T(r,e,t);c("[updateComponent] Setting new components:",JSON.stringify(n,null,2)),C(n)},cloneComponent:e=>{const{component:t,parentInfo:n,topLevelIndex:o}=S(r,e);if(!t)return;const a=k(t);if(void 0!==o){const e=[...r];e.splice(o+1,0,a),C(e)}else if(n){const e=T(r,n.parent.id,(()=>{if("children"===n.key){const e=[...n.parent.children||[]];return e.splice(n.index+1,0,a),{children:e}}{const e=[...n.parent[n.key]||[]];return e.splice(n.index+1,0,a),{[n.key]:e}}})());C(e)}i(a.id)},moveComponent:(e,t)=>{const n=[...r],[o]=n.splice(e,1);o&&(n.splice(t,0,o),C(n))},selectedComponent:a,setSelectedComponent:i,mergeTags:l,addMergeTags:e=>{s(t=>[...t,...e])},template:d,setTemplate:e=>{p(e),C(e.components||[])},undo:()=>{if(g>0){const e=g-1;f(e);const t=u[e];t&&o(t)}},redo:()=>{if(g<u.length-1){const e=g+1;f(e);const t=u[e];t&&o(t)}},canUndo:D,canRedo:I,designSystem:y,setDesignSystem:b,savedBlocks:x,addSavedBlock:(e,t)=>{if(!e.trim())return;const n={id:`block-${Date.now()}`,name:e.trim(),components:w(t||r),createdAt:(new Date).toISOString()};E([...x,n])},removeSavedBlock:e=>{E(x.filter(t=>t.id!==e))},insertSavedBlock:(e,t)=>{const n=x.find(t=>t.id===e);if(!n)return;const o=w(n.components),a=[...r];void 0!==t?o.forEach((e,n)=>{a.splice(t+n,0,e)}):a.push(...o),C(a)},renameSavedBlock:(e,t)=>{if(!t.trim())return;const n=x.map(n=>n.id===e?{...n,name:t.trim()}:n);E(n)}}},e)},Jn=t.createContext(void 0),Vn=({children:e})=>{const[n,r]=t.useState([]),o=t.useCallback(e=>{r(t=>[...t,{id:`msg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,text:e,createdAt:Date.now()}])},[]);return t.useEffect(()=>{const e=setInterval(()=>{r(e=>e.filter(e=>Date.now()-e.createdAt<4e3))},1e3);return()=>clearInterval(e)},[]),t.createElement(Jn.Provider,{value:{messages:n,pushMessage:o}},e,t.createElement("div",{style:{position:"fixed",top:"18px",right:"18px",zIndex:9999,display:"flex",flexDirection:"column",gap:"8px"},"aria-live":"polite","aria-atomic":"true"},n.map(e=>t.createElement("div",{key:e.id,"data-testid":"drop-feedback-toast",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#ffffff",padding:"14px 20px",borderRadius:"12px",boxShadow:"0 12px 32px rgba(59, 130, 246, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3)",fontSize:"14px",fontWeight:600,fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, sans-serif",transition:"all 200ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)",opacity:1,border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",gap:"8px"}},t.createElement("span",{style:{fontSize:"18px"}},"‚úì"),e.text))))},Yn={text:{type:"text",props:{text:"Enter your text here",fontSize:"16px",color:"#000000",align:"left"}},button:{type:"button",props:{text:"Click me",href:"#",backgroundColor:"#007bff",color:"#ffffff",borderRadius:"4px",padding:"10px 20px",align:"center"}},image:{type:"image",props:{src:"https://placehold.co/600x400",alt:"Image",width:"100%",align:"center"}},divider:{type:"divider",props:{borderColor:"#dddddd",borderWidth:"1px",borderStyle:"solid"}},spacer:{type:"spacer",props:{height:"20px"}},social:{type:"social",props:{mode:"horizontal",iconSize:"30px",links:[{name:"Facebook",href:"https://facebook.com"},{name:"Twitter",href:"https://twitter.com"},{name:"Instagram",href:"https://instagram.com"}]}},video:{type:"video",props:{src:"https://www.youtube.com/embed/dQw4w9WgXcQ",poster:"https://placehold.co/600x400/000/fff?text=Video+Thumbnail",width:"100%",height:"400px",align:"center",controls:!0}},timer:{type:"timer",props:{targetDate:new Date(Date.now()+6048e5).toISOString(),format:"DD:HH:mm:ss",expiredText:"Offer expired",align:"center",color:"#dc3545",backgroundColor:"transparent",timezone:"UTC"}},html:{type:"html",props:{html:'<div style="font-size:18px;color:#007bff;font-weight:bold;">Custom HTML Block</div>',align:"left",padding:"10px",backgroundColor:"transparent"}},columns:{type:"columns",props:{columnCount:2},children:[]},section:{type:"section",props:{backgroundColor:"#ffffff",padding:"20px"},children:[]}},qn=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xn=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),Zn=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Qn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const er=t.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:i,iconNode:l,...s},c)=>t.createElement("svg",{ref:c,...Qn,width:n,height:n,stroke:e,strokeWidth:o?24*Number(r)/Number(n):r,className:Xn("lucide",a),...!i&&!Zn(s)&&{"aria-hidden":"true"},...s},[...l.map(([e,n])=>t.createElement(e,n)),...Array.isArray(i)?i:[i]])),tr=(e,n)=>{const r=t.forwardRef(({className:r,...o},a)=>{return t.createElement(er,{ref:a,iconNode:n,className:Xn(`lucide-${i=qn(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o});var i});return r.displayName=qn(e),r},nr=tr("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),rr=tr("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),or=tr("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ar=tr("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ir=tr("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),lr=tr("columns-3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),sr=tr("columns-4",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7.5 3v18",key:"w0wo6v"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M16.5 3v18",key:"10tjh1"}]]),cr=tr("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),dr=tr("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),pr=tr("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ur=tr("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),mr=tr("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),gr=tr("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),hr=tr("layout-panel-left",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]),fr=tr("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),yr=tr("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),br=tr("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),xr=tr("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),vr=tr("move-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]]),Er=tr("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),wr=tr("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Cr=tr("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),kr=tr("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Sr=tr("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Tr=tr("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Dr=tr("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Ir=tr("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Or=tr("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Rr=tr("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),Mr=tr("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Nr=tr("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Ar=tr("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zr={COMPONENT:"component",NEW_COMPONENT:"new_component"},Lr=[{name:"2 Cols (30/70)",icon:t.createElement(hr,{size:18}),config:{columnCount:2,width1:30,width2:70}},{name:"2 Cols (70/30)",icon:t.createElement(hr,{size:18,style:{transform:"scaleX(-1)"}}),config:{columnCount:2,width1:70,width2:30}},{name:"3 Cols (20/40/40)",icon:t.createElement(lr,{size:18}),config:{columnCount:3,width1:20,width2:40,width3:40}},{name:"3 Cols (40/20/40)",icon:t.createElement(lr,{size:18}),config:{columnCount:3,width1:40,width2:20,width3:40}},{name:"Blank",icon:t.createElement(ur,{size:18}),config:{columnCount:1,width1:100}},{name:"2 Cols (50/50)",icon:t.createElement(gr,{size:18}),config:{columnCount:2,width1:50,width2:50}},{name:"3 Cols (33/33/33)",icon:t.createElement(lr,{size:18}),config:{columnCount:3,width1:33,width2:33,width3:34}},{name:"4 Cols (25√ó4)",icon:t.createElement(sr,{size:18}),config:{columnCount:4,width1:25,width2:25,width3:25,width4:25}},{name:"2 Cols (33/67)",icon:t.createElement(hr,{size:18}),config:{columnCount:2,width1:33,width2:67}},{name:"2 Cols (67/33)",icon:t.createElement(hr,{size:18,style:{transform:"scaleX(-1)"}}),config:{columnCount:2,width1:67,width2:33}},{name:"3 Cols (20/20/60)",icon:t.createElement(lr,{size:18}),config:{columnCount:3,width1:20,width2:20,width3:60}},{name:"3 Cols (60/20/20)",icon:t.createElement(lr,{size:18}),config:{columnCount:3,width1:60,width2:20,width3:20}},{name:"4 Cols (20/30/30/20)",icon:t.createElement(sr,{size:18}),config:{columnCount:4,width1:20,width2:30,width3:30,width4:20}},{name:"4 Cols (10/40/40/10)",icon:t.createElement(sr,{size:18}),config:{columnCount:4,width1:10,width2:40,width3:40,width4:10}}],Pr=({componentType:e,icon:n,label:r,onClick:o})=>{const[{isDragging:a},i]=hn(()=>({type:zr.NEW_COMPONENT,item:{componentType:e},collect:e=>({isDragging:!!e.isDragging()})}));return t.createElement("button",{ref:i,"data-testid":`toolbar-button-${e}`,onClick:o,className:"eb-toolbar-button",style:{opacity:a?.5:1,cursor:a?"grabbing":"pointer",width:"100px",height:"100px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"6px",padding:0,border:"1px solid var(--eb-border)",background:"var(--eb-surface)",borderRadius:"6px"}},t.createElement("span",{className:"eb-toolbar-icon",style:{display:"flex",alignItems:"center",justifyContent:"center"}},n),t.createElement("span",{className:"eb-toolbar-label",style:{fontSize:"12px",fontWeight:600,color:"var(--eb-text)",textAlign:"center",lineHeight:1,flex:"0 0 auto"}},r))},_r=({template:e,onClick:n})=>{const[r,o]=t.useState(!1),[{isDragging:a},i]=hn(()=>({type:zr.NEW_COMPONENT,item:{componentType:"columns",sectionConfig:e.config},collect:e=>({isDragging:!!e.isDragging()})}));return t.createElement("button",{ref:i,"data-testid":`toolbar-section-${e.name.toLowerCase().replace(/\s+/g,"-")}`,onClick:n,className:"eb-toolbar-button",style:{opacity:a?.5:1,cursor:a?"grabbing":"pointer",width:"100%",padding:"10px",display:"flex",flexDirection:"column",gap:"8px"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},t.createElement("div",{style:{width:"100%",height:"48px",display:"flex",gap:"6px",alignItems:"stretch"}},Array.from({length:e.config.columnCount}).map((n,o)=>{const a=`width${o+1}`,i=e.config[a]??Math.floor(100/e.config.columnCount);return t.createElement("div",{key:o,style:{flex:`0 0 ${i}%`,background:r?"var(--eb-surface-hover)":"var(--eb-accent-light)",border:"1px solid var(--eb-border)",boxShadow:r?"var(--eb-shadow-sm)":"none",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--eb-text)",fontSize:"12px",fontWeight:600}},i,"%")})))},jr=({onContentVisibilityChange:e})=>{const[n,r]=t.useState("elements"),[o,a]=t.useState(!0),[i,l]=t.useState({general:!0,colors:!1,typography:!1,links:!1}),[s,c]=t.useState({popular:!0,standard:!1,more:!1}),{designSystem:d,setDesignSystem:p}=Kn(),u=e=>{l(t=>t[e]?{...t,[e]:!1}:{general:"general"===e,colors:"colors"===e,typography:"typography"===e,links:"links"===e})},m=e=>{const t=new CustomEvent("addComponent",{detail:{type:e}});window.dispatchEvent(t)},g=e=>{const t=new CustomEvent("addComponent",{detail:{type:"columns",sectionConfig:e}});window.dispatchEvent(t)};return t.createElement("aside",{className:"eb-toolbar"},t.createElement("div",{className:"eb-toolbar-container"},t.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",minWidth:"84px",maxWidth:"84px",background:"var(--eb-surface)",borderRight:"1px solid var(--eb-border)",height:"100%"}},t.createElement("div",{className:"eb-toolbar-tabs-vertical"},t.createElement("button",{className:"eb-toolbar-tab-icon "+("elements"===n?"active":""),onClick:()=>r("elements"),title:"Elements"},t.createElement(nr,{size:20}),t.createElement("span",{className:"eb-toolbar-tab-label"},"Elements")),t.createElement("button",{className:"eb-toolbar-tab-icon "+("sections"===n?"active":""),onClick:()=>r("sections"),title:"Sections"},t.createElement(gr,{size:20}),t.createElement("span",{className:"eb-toolbar-tab-label"},"Sections")),t.createElement("button",{className:"eb-toolbar-tab-icon "+("design"===n?"active":""),onClick:()=>r("design"),title:"Design"},t.createElement(Er,{size:20}),t.createElement("span",{className:"eb-toolbar-tab-label"},"Design"))),t.createElement("button",{className:"eb-toolbar-tab-icon",onClick:()=>{const t=!o;a(t),e&&e(t)},title:o?"Hide panel":"Show panel",style:{position:"absolute",bottom:"8px",left:"8px",right:"8px",margin:0}},o?t.createElement(ar,{size:20}):t.createElement(or,{size:20}),t.createElement("span",{className:"eb-toolbar-tab-label"},o?"Hide":"Show"))),o&&t.createElement("div",{className:"eb-toolbar-content-area"},"elements"===n&&t.createElement("div",{className:"eb-toolbar-content"},t.createElement("h3",null,"Elements"),t.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",justifyItems:"center",alignItems:"center"}},t.createElement(Pr,{componentType:"text",icon:t.createElement(Rr,{size:18}),label:"Text",onClick:()=>m("text")}),t.createElement(Pr,{componentType:"button",icon:t.createElement(xr,{size:18}),label:"Button",onClick:()=>m("button")}),t.createElement(Pr,{componentType:"image",icon:t.createElement(mr,{size:18}),label:"Image",onClick:()=>m("image")}),t.createElement(Pr,{componentType:"video",icon:t.createElement(Nr,{size:18}),label:"Video",onClick:()=>m("video")}),t.createElement(Pr,{componentType:"timer",icon:t.createElement(Ir,{size:18}),label:"Timer",onClick:()=>m("timer")}),t.createElement(Pr,{componentType:"html",icon:t.createElement(ir,{size:18}),label:"HTML",onClick:()=>m("html")}),t.createElement(Pr,{componentType:"divider",icon:t.createElement(fr,{size:18}),label:"Divider",onClick:()=>m("divider")}),t.createElement(Pr,{componentType:"spacer",icon:t.createElement(vr,{size:18}),label:"Spacer",onClick:()=>m("spacer")}),t.createElement(Pr,{componentType:"social",icon:t.createElement(kr,{size:18}),label:"Social",onClick:()=>m("social")}))),"sections"===n&&t.createElement("div",{className:"eb-toolbar-content"},t.createElement("h3",null,"Sections"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},t.createElement("div",null,t.createElement("h4",{onClick:()=>c(e=>!e.popular?{popular:!0,standard:!1,more:!1}:{popular:!1,standard:!1,more:!1}),style:{fontSize:"13px",fontWeight:600,color:"var(--eb-text)",marginBottom:s.popular?"8px":"0",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:s.popular?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"Popular"),s.popular&&t.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"}},Lr.filter(e=>["2 Cols (30/70)","2 Cols (70/30)","3 Cols (20/40/40)","3 Cols (40/20/40)"].includes(e.name)).map(e=>t.createElement(_r,{key:`popular-${e.name}`,template:e,onClick:()=>g(e.config)})))),t.createElement("div",null,t.createElement("h4",{onClick:()=>c(e=>!e.standard?{popular:!1,standard:!0,more:!1}:{popular:!1,standard:!1,more:!1}),style:{fontSize:"13px",fontWeight:600,color:"var(--eb-text)",marginBottom:s.standard?"8px":"0",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:s.standard?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"Standard"),s.standard&&t.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"}},Lr.filter(e=>["Blank","2 Cols (50/50)","3 Cols (33/33/33)","4 Cols (25√ó4)","2 Cols (33/67)","2 Cols (67/33)"].includes(e.name)).map(e=>t.createElement(_r,{key:`standard-${e.name}`,template:e,onClick:()=>g(e.config)})))),t.createElement("div",null,t.createElement("h4",{onClick:()=>c(e=>!e.more?{popular:!1,standard:!1,more:!0}:{popular:!1,standard:!1,more:!1}),style:{fontSize:"13px",fontWeight:600,color:"var(--eb-text)",marginBottom:s.more?"8px":"0",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:s.more?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"More"),s.more&&t.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"}},Lr.filter(e=>["3 Cols (20/20/60)","3 Cols (60/20/20)","4 Cols (20/30/30/20)","4 Cols (10/40/40/10)"].includes(e.name)).map(e=>t.createElement(_r,{key:`more-${e.name}`,template:e,onClick:()=>g(e.config)})))))),"design"===n&&t.createElement("div",{className:"eb-toolbar-content"},t.createElement("h3",null,"Design System"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},t.createElement("div",{style:{borderBottom:"1px solid var(--eb-border)",paddingBottom:"12px"}},t.createElement("h4",{onClick:()=>u("general"),style:{fontSize:"13px",fontWeight:600,marginBottom:i.general?"12px":"0",color:"var(--eb-text)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:i.general?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"General Settings"),i.general&&t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Background Color"),t.createElement("input",{type:"color",value:d.colors.background,onChange:e=>p({...d,colors:{...d.colors,background:e.target.value}}),style:{width:"100%",height:"40px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer"}})),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Content Width: ",d.containerWidth),t.createElement("input",{type:"range",min:"400",max:"800",step:"50",value:parseInt(d.containerWidth),onChange:e=>p({...d,containerWidth:`${e.target.value}px`}),style:{width:"100%"}})),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Content Alignment"),t.createElement("select",{value:d.contentAlignment,onChange:e=>p({...d,contentAlignment:e.target.value}),style:{width:"100%",padding:"10px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",background:"var(--eb-surface)",color:"var(--eb-text)",fontSize:"13px"}},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Font Family"),t.createElement("select",{value:d.typography.fontFamily,onChange:e=>p({...d,typography:{...d.typography,fontFamily:e.target.value}}),style:{width:"100%",padding:"10px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",background:"var(--eb-surface)",color:"var(--eb-text)",fontSize:"13px"}},t.createElement("option",{value:"Arial, sans-serif"},"Arial"),t.createElement("option",{value:"Helvetica, sans-serif"},"Helvetica"),t.createElement("option",{value:"Georgia, serif"},"Georgia"),t.createElement("option",{value:"'Times New Roman', serif"},"Times New Roman"),t.createElement("option",{value:"'Courier New', monospace"},"Courier New"),t.createElement("option",{value:"Verdana, sans-serif"},"Verdana"))),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Font Weight"),t.createElement("select",{value:d.typography.fontWeight.normal,onChange:e=>p({...d,typography:{...d.typography,fontWeight:{...d.typography.fontWeight,normal:e.target.value}}}),style:{width:"100%",padding:"10px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",background:"var(--eb-surface)",color:"var(--eb-text)",fontSize:"13px"}},t.createElement("option",{value:"300"},"Light (300)"),t.createElement("option",{value:"400"},"Normal (400)"),t.createElement("option",{value:"500"},"Medium (500)"),t.createElement("option",{value:"600"},"Semibold (600)"),t.createElement("option",{value:"700"},"Bold (700)"))))),t.createElement("div",{style:{borderBottom:"1px solid var(--eb-border)",paddingBottom:"12px"}},t.createElement("h4",{onClick:()=>u("colors"),style:{fontSize:"13px",fontWeight:600,marginBottom:i.colors?"12px":"0",color:"var(--eb-text)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:i.colors?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"Colors"),i.colors&&t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Primary Color"),t.createElement("input",{type:"color",value:d.colors.primary,onChange:e=>p({...d,colors:{...d.colors,primary:e.target.value}}),style:{width:"100%",height:"40px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer"}})),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Text Color"),t.createElement("input",{type:"color",value:d.colors.text,onChange:e=>p({...d,colors:{...d.colors,text:e.target.value}}),style:{width:"100%",height:"40px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer"}})))),t.createElement("div",{style:{borderBottom:"1px solid var(--eb-border)",paddingBottom:"12px"}},t.createElement("h4",{onClick:()=>u("typography"),style:{fontSize:"13px",fontWeight:600,marginBottom:i.typography?"12px":"0",color:"var(--eb-text)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:i.typography?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"Typography"),i.typography&&t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Base Font Size: ",d.typography.fontSize.md),t.createElement("input",{type:"range",min:"12",max:"20",value:parseInt(d.typography.fontSize.md),onChange:e=>p({...d,typography:{...d.typography,fontSize:{...d.typography.fontSize,md:`${e.target.value}px`}}}),style:{width:"100%"}})))),t.createElement("div",{style:{paddingBottom:"12px"}},t.createElement("h4",{onClick:()=>u("links"),style:{fontSize:"13px",fontWeight:600,marginBottom:i.links?"12px":"0",color:"var(--eb-text)",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"}},t.createElement(rr,{size:16,style:{transform:i.links?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),"Links"),i.links&&t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"6px",color:"var(--eb-text)"}},"Link Color"),t.createElement("input",{type:"color",value:d.links.color,onChange:e=>p({...d,links:{...d.links,color:e.target.value}}),style:{width:"100%",height:"40px",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer"}})),t.createElement("div",{style:{marginBottom:"12px"}},t.createElement("label",{style:{display:"flex",alignItems:"center",fontSize:"12px",fontWeight:600,color:"var(--eb-text)",cursor:"pointer"}},t.createElement("input",{type:"checkbox",checked:d.links.underline,onChange:e=>p({...d,links:{...d.links,underline:e.target.checked}}),style:{marginRight:"8px",cursor:"pointer"}}),"Underline Links")))))))))},$r=({component:e,index:n,children:r})=>{const o=t.useRef(null),{moveComponent:a,selectedComponent:i,setSelectedComponent:l}=Kn(),[{isDragging:s},c]=hn({type:zr.COMPONENT,item:{index:n,id:e.id},collect:e=>({isDragging:e.isDragging()})}),[{isOver:d},p]=xn({accept:[zr.COMPONENT,zr.NEW_COMPONENT],hover:e=>{if(!o.current||!e.index)return;const t=e.index,r=n;t!==r&&(a(t,r),e.index=r)},drop:()=>{},collect:e=>({isOver:e.isOver({shallow:!0})})});c(p(o));const u=i===e.id;return t.createElement("div",{ref:o,className:u?"eb-component-card selected":"eb-component-card",onClick:t=>{t.stopPropagation(),l(e.id)},style:{opacity:s?.5:1,cursor:"move"}},r)},Hr=({columnIndex:e,parentId:n,children:r,onDropComponent:o})=>{const[{isOver:a,canDrop:i},l]=xn({accept:[zr.NEW_COMPONENT,zr.COMPONENT],drop:(t,r)=>{if(c("[ColumnDropZone] Drop triggered!",{item:t,columnIndex:e,parentId:n,didDrop:r.didDrop(),itemType:r.getItemType()}),!r.didDrop())return c("[ColumnDropZone] Calling onDropComponent"),o(t,e),{dropped:!0};c("[ColumnDropZone] Already handled by nested target, ignoring")},collect:e=>({isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()})}),s=a&&i;return t.createElement("div",{ref:l,className:a?"eb-column-dropzone active":"eb-column-dropzone",style:{minHeight:"100px",position:"relative"}},r||t.createElement("div",{style:{textAlign:"center",color:"#6c757d",padding:"20px",fontSize:"14px"}},s?"Drop here":"Drop components here"))},Wr=({component:e})=>{const{components:n,updateComponent:r,moveComponent:o}=Kn();let a=()=>{};try{a=(()=>{const e=t.useContext(Jn);if(!e)throw new Error("useDropFeedback must be used within DropFeedbackProvider");return e})().pushMessage}catch{}const i=t.useCallback((e,t)=>{for(const n of e){if(n.id===t)return c("[findComponentById] FOUND component:",n.id,"type:",n.type,"data:",n),n;if("columns"===n.type){const e=n;for(let n=1;n<=4;n++){const r=`column${n}`;if(e[r]){const n=i(e[r],t);if(n)return n}}}if(Array.isArray(n.children)){const e=i(n.children,t);if(e)return e}}return c("[findComponentById] NOT FOUND in",e.length,"components"),null},[]),l=t.useMemo(()=>(c("[ColumnsRenderer] Looking for component:",e.id,"in",n.length,"top-level components"),i(n,e.id)||e),[n,e.id,i]);c("[ColumnsRenderer] Rendering with component:",l.id,"column1:",l.column1,"column2:",l.column2);const s=(e,t)=>{const n=`column${t+1}`,o=l[n]||[];if(c("[ColumnsRenderer.handleDropInColumn] START",{item:e,columnIndex:t,columnKey:n,currentColumnLength:o.length,componentId:l.id}),e.id&&!e.componentType)return c("[ColumnsRenderer] Detected existing component move (has id, no componentType)"),void c("Moving existing component to column",t,"item:",e);if(!e.componentType)return void p("[ColumnsRenderer] ERROR: Invalid drop item - no componentType:",e);c("[ColumnsRenderer] Looking for template:",e.componentType);const i=Yn[e.componentType];if(!i)return void p("[ColumnsRenderer] ERROR: No template found for:",e.componentType);c("[ColumnsRenderer] Template found:",i);const s=i?.props?{...i.props}:{},d={...i,id:Fn(),type:e.componentType,props:s},u=[...o,d];c("[ColumnsRenderer] Created new component:",d),c("[ColumnsRenderer] Updated column will have",u.length,"components"),c("[ColumnsRenderer] Calling updateComponent with:",{id:l.id,updates:{[n]:u}}),r(l.id,{[n]:u}),a(`Added ${e.componentType} to column ${t+1}`),c("[ColumnsRenderer.handleDropInColumn] COMPLETE")},d=(()=>{const{columnCount:e,width1:t=0,width2:n=0,width3:r=0,width4:o=0}=l.props,a=[t,n,r,o].slice(0,e);return 0===a.reduce((e,t)=>e+t,0)?Array(e).fill(100/e+"%"):a.map(e=>`${e}%`)})(),{columnCount:u}=l.props;return t.createElement("div",{className:"eb-columns",style:{display:"grid",gridTemplateColumns:d.join(" "),gap:"10px"}},Array.from({length:u}).map((e,n)=>(e=>{const n=`column${e+1}`,r=`columnSettings${e+1}`,o=l[n]||[],a=l.props[r]||{};return c("[renderColumn]",n,"components:",o),t.createElement("div",{key:e,className:"eb-column",style:{backgroundColor:a.backgroundColor||"transparent",textAlign:a.align||"left"}},t.createElement(Hr,{columnIndex:e,parentId:l.id,onDropComponent:s},o.length>0&&o.map((e,n)=>t.createElement($r,{key:e.id,component:e,index:n},t.createElement(Br,{component:e})))))})(n)))},Br=({component:e})=>{const{designSystem:n}=Kn();return(()=>{switch(e.type){case"text":return t.createElement("div",{style:{fontSize:e.props.fontSize||n.typography.fontSize.md,fontWeight:e.props.fontWeight||n.typography.fontWeight.normal,color:e.props.color||n.colors.text,fontFamily:e.props.fontFamily||n.typography.fontFamily,textAlign:e.props.align||n.contentAlignment,padding:e.props.padding||"10px"}},t.createElement("style",null,`\n                a {\n                  color: ${n.links.color} !important;\n                  text-decoration: ${n.links.underline?"underline":"none"} !important;\n                }\n              `),e.props.text||"Text content");case"button":return t.createElement("div",{style:{textAlign:e.props.align||"center",padding:"10px"}},t.createElement("a",{href:e.props.href||"#",style:{display:"inline-block",backgroundColor:e.props.backgroundColor||n.colors.primary,color:e.props.color||"#fff",padding:e.props.padding||"10px 20px",borderRadius:e.props.borderRadius||"4px",textDecoration:"none",fontWeight:"bold",fontFamily:n.typography.fontFamily}},e.props.text||"Button"));case"image":return t.createElement("div",{style:{textAlign:e.props.align||"center",padding:"10px"}},t.createElement("img",{src:e.props.src||"https://placehold.co/600x400",alt:e.props.alt||"Image",style:{width:e.props.width||"auto",height:e.props.height||"auto",maxWidth:"100%"}}));case"divider":return t.createElement("hr",{style:{borderColor:e.props.borderColor||"#ddd",borderWidth:e.props.borderWidth||"1px",borderStyle:e.props.borderStyle||"solid",margin:e.props.padding||"20px 0"}});case"spacer":return t.createElement("div",{style:{height:e.props.height||"20px"}});case"video":return t.createElement("div",{style:{textAlign:e.props.align||"center",padding:"10px"}},t.createElement("video",{src:e.props.src,poster:e.props.poster,controls:!1!==e.props.controls,autoPlay:e.props.autoplay||!1,style:{width:e.props.width||"100%",height:e.props.height||"auto",maxWidth:"100%",borderRadius:"4px"}},"Your email client does not support video playback."));case"timer":{const n=new Date(e.props.targetDate),[r,o]=t.useState(Date.now());t.useEffect(()=>{const e=setInterval(()=>o(Date.now()),1e3);return()=>clearInterval(e)},[]);const a=n.getTime()-r;let i=e.props.expiredText||"Expired";if(a>0){const e=Math.floor(a/1e3)%60,t=Math.floor(a/6e4)%60,n=Math.floor(a/36e5)%24;i=`${Math.floor(a/864e5)}d ${n}h ${t}m ${e}s`}return t.createElement("div",{style:{textAlign:e.props.align||"center",padding:"10px",backgroundColor:e.props.backgroundColor||"transparent",color:e.props.color||"#dc3545",fontFamily:"monospace",fontSize:"18px",fontWeight:"bold"}},i)}case"html":{const n=function(e,t={}){const{allowedTags:n=Ee,allowedAttributes:r=we,allowDataUri:o=!1}=t,a={ALLOWED_TAGS:n,ALLOWED_ATTR:r,ALLOW_DATA_ATTR:!1,ALLOW_UNKNOWN_PROTOCOLS:!1,SAFE_FOR_TEMPLATES:!0,...o?{}:{FORBID_ATTR:["src","href"].filter(e=>r.includes(e))}};return ve.sanitize(e,a)}(e.props.html||e.props.code||"<div>Empty HTML Block</div>");return t.createElement("div",{style:{textAlign:e.props.align||"left",padding:e.props.padding||"10px",backgroundColor:e.props.backgroundColor||"transparent"},dangerouslySetInnerHTML:{__html:n}})}case"social":const r=(e,n="32px")=>{const r=parseInt(n);return{facebook:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#1877F2"},t.createElement("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})),twitter:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#1DA1F2"},t.createElement("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})),instagram:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"url(#instagram-gradient)"},t.createElement("defs",null,t.createElement("linearGradient",{id:"instagram-gradient",x1:"0%",y1:"100%",x2:"100%",y2:"0%"},t.createElement("stop",{offset:"0%",style:{stopColor:"#FED576"}}),t.createElement("stop",{offset:"50%",style:{stopColor:"#F47133"}}),t.createElement("stop",{offset:"100%",style:{stopColor:"#BC3081"}}))),t.createElement("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})),linkedin:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#0A66C2"},t.createElement("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})),youtube:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#FF0000"},t.createElement("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})),github:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#181717"},t.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})),pinterest:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#E60023"},t.createElement("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"})),tiktok:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#000000"},t.createElement("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})),snapchat:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#FFFC00"},t.createElement("path",{d:"M12.206.793c.99 0 4.347.276 5.93 3.821.529 1.193.403 3.219.299 4.847l-.003.06c-.012.18-.022.345-.03.51.075.045.203.09.401.09.3-.016.659-.12 1.033-.301.165-.088.344-.104.464-.104.182 0 .359.029.509.09.45.149.734.479.734.838.015.449-.39.839-1.213 1.168-.089.029-.209.075-.344.119-.45.135-1.139.36-1.333.81-.09.224-.061.524.12.868l.015.015c.06.136 1.526 3.475 4.791 4.014.255.044.435.27.42.509 0 .075-.015.149-.045.225-.24.569-1.273.988-3.146 1.271-.059.091-.12.375-.164.57-.029.179-.074.36-.134.553-.076.271-.27.405-.555.405h-.03c-.135 0-.313-.031-.538-.074-.36-.075-.765-.135-1.273-.135-.3 0-.599.015-.913.074-.6.104-1.123.464-1.723.884-.853.599-1.826 1.288-3.294 1.288-.06 0-.119-.015-.18-.015h-.149c-1.468 0-2.427-.675-3.279-1.288-.599-.42-1.107-.779-1.707-.884-.314-.045-.629-.074-.928-.074-.54 0-.958.089-1.272.149-.211.043-.391.074-.54.074-.374 0-.523-.224-.583-.42-.061-.192-.09-.389-.135-.567-.046-.181-.105-.494-.166-.57-1.918-.222-2.95-.642-3.189-1.226-.031-.063-.052-.12-.061-.179 0-.226.181-.465.436-.509 3.419-.539 4.853-3.879 4.853-3.879.18-.345.224-.645.119-.869-.195-.434-.789-.645-1.394-.81-.045-.016-.09-.044-.119-.074-.375-.181-1.274-.66-1.274-1.226 0-.539.508-.793.793-.793.1 0 .26.016.465.105.57.194 1.079.328 1.47.328.055 0 .135-.015.21-.015.099-.135.165-.36.165-.615-.016-1.169-.076-3-.076-4.395 0-3.879 2.86-4.755 5.753-4.755z"})),reddit:t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#FF4500"},t.createElement("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"}))}[e]||t.createElement("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"#888888"},t.createElement("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))},o=e.props.icons||[],a=e.props.iconSize||"32px",i=e.props.align||"center";return t.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"left"===i?"flex-start":"right"===i?"flex-end":"center",alignItems:"center",gap:"12px",padding:"10px"}},o.map((e,n)=>t.createElement("a",{key:n,href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",textDecoration:"none",transition:"transform 0.2s, opacity 0.2s",opacity:.9},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.15)",e.currentTarget.style.opacity="1"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.opacity="0.9"},title:e.platform.charAt(0).toUpperCase()+e.platform.slice(1)},r(e.platform,a))));case"columns":return t.createElement(Wr,{component:e});case"section":return t.createElement(Fr,{component:e});default:return t.createElement("div",null,"Unknown component type: ",e.type)}})()},Fr=({component:e})=>{const{selectedComponent:n,setSelectedComponent:r,designSystem:o}=Kn();return t.createElement("div",{style:{backgroundColor:e.props.backgroundColor||"transparent",padding:e.props.padding||"20px"}},(e.children||[]).map((e,o)=>{const a=n===e.id;return t.createElement("div",{key:e.id||o,className:a?"eb-component-card selected":"eb-component-card",onClick:t=>{t.stopPropagation(),r(e.id)},style:{cursor:"pointer"}},t.createElement(Br,{component:e}))}))},Ur=({onImageSelect:e,onClose:n,currentImageUrl:r=""})=>{const[o,a]=t.useState("url"),[i,l]=t.useState(r),[s,c]=t.useState(null),[d,p]=t.useState(!1),u=t.useRef(null),m=e=>{if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=e=>{const t=e.target?.result;c(t)},t.readAsDataURL(e)}else alert("Please select a valid image file (jpg, png, gif)")};return t.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n},t.createElement("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"600px",maxWidth:"90vw",maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},onClick:e=>e.stopPropagation()},t.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center"}},t.createElement("h2",{style:{margin:0,fontSize:"20px",fontWeight:"bold"}},"Select Image"),t.createElement("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6c757d",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"}},"√ó")),t.createElement("div",{style:{display:"flex",borderBottom:"1px solid #dee2e6",backgroundColor:"#f8f9fa"}},t.createElement("button",{onClick:()=>a("url"),style:{flex:1,padding:"12px",border:"none",backgroundColor:"url"===o?"white":"transparent",borderBottom:"url"===o?"2px solid #007bff":"none",cursor:"pointer",fontWeight:"url"===o?"bold":"normal",color:"url"===o?"#007bff":"#6c757d"}},"üîó Image URL"),t.createElement("button",{onClick:()=>a("upload"),style:{flex:1,padding:"12px",border:"none",backgroundColor:"upload"===o?"white":"transparent",borderBottom:"upload"===o?"2px solid #007bff":"none",cursor:"pointer",fontWeight:"upload"===o?"bold":"normal",color:"upload"===o?"#007bff":"#6c757d"}},"üì§ Upload Image")),t.createElement("div",{style:{padding:"20px",overflowY:"auto",flex:1}},"url"===o?t.createElement("div",null,t.createElement("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#495057"}},"Image URL"),t.createElement("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"https://example.com/image.jpg",style:{width:"100%",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"14px",boxSizing:"border-box"}}),i&&t.createElement("div",{style:{marginTop:"20px",border:"1px solid #dee2e6",borderRadius:"4px",padding:"10px",backgroundColor:"#f8f9fa"}},t.createElement("p",{style:{margin:"0 0 10px 0",fontWeight:"bold",color:"#495057",fontSize:"14px"}},"Preview:"),t.createElement("img",{src:i,alt:"Preview",style:{maxWidth:"100%",maxHeight:"300px",display:"block",margin:"0 auto"},onError:e=>{e.target.style.display="none"}}))):t.createElement("div",null,t.createElement("div",{onDrop:e=>{e.preventDefault(),e.stopPropagation(),p(!1);const t=e.dataTransfer.files?.[0];t&&m(t)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),p(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),p(!1)},style:{border:"2px dashed "+(d?"#007bff":"#ced4da"),borderRadius:"8px",padding:"40px",textAlign:"center",backgroundColor:d?"#e7f3ff":"#f8f9fa",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>u.current?.click()},t.createElement("div",{style:{fontSize:"48px",marginBottom:"10px"}},"üì∑"),t.createElement("p",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#495057",fontWeight:"bold"}},d?"Drop image here":"Drag & drop an image here"),t.createElement("p",{style:{margin:"0 0 15px 0",fontSize:"14px",color:"#6c757d"}},"or"),t.createElement("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onClick:e=>{e.stopPropagation(),u.current?.click()}},"Choose File"),t.createElement("input",{ref:u,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];t&&m(t)},style:{display:"none"}}),t.createElement("p",{style:{margin:"15px 0 0 0",fontSize:"12px",color:"#6c757d"}},"Supported formats: JPG, PNG, GIF")),s&&t.createElement("div",{style:{marginTop:"20px",border:"1px solid #dee2e6",borderRadius:"4px",padding:"10px",backgroundColor:"#f8f9fa"}},t.createElement("p",{style:{margin:"0 0 10px 0",fontWeight:"bold",color:"#495057",fontSize:"14px"}},"Preview:"),t.createElement("img",{src:s,alt:"Uploaded preview",style:{maxWidth:"100%",maxHeight:"300px",display:"block",margin:"0 auto"}}),t.createElement("button",{onClick:()=>c(null),style:{marginTop:"10px",padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",width:"100%"}},"Remove")))),t.createElement("div",{style:{padding:"20px",borderTop:"1px solid #dee2e6",display:"flex",justifyContent:"flex-end",gap:"10px"}},t.createElement("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},"Cancel"),t.createElement("button",{onClick:()=>{"url"===o&&i?(e(i),n()):"upload"===o&&s?(e(s),n()):alert("Please provide an image URL or upload an image")},style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"}},"Insert Image"))))},Kr=()=>{const{components:e,updateComponent:n,removeComponent:r,selectedComponent:o,setSelectedComponent:a,cloneComponent:i}=Kn(),l=e.find(e=>e.id===o),[s,c]=t.useState(!1);if(!l)return null;const d=l.props||{},p=(e,t)=>{n(l.id,"__bulk__"!==e||"object"!=typeof t?{props:{...d,[e]:t}}:{props:{...d,...t}})},u={display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:600,color:"var(--eb-text)",letterSpacing:"0.3px"},m={width:"100%",padding:"10px 12px",border:"1px solid var(--eb-border)",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box",background:"var(--eb-surface-raised)",color:"var(--eb-text)",transition:"var(--eb-transition)"};return t.createElement("div",{className:"eb-panel"},t.createElement("div",{style:{display:"flex",alignItems:"center",padding:"12px 14px",gap:"8px",borderBottom:"1px solid var(--eb-border)",background:"var(--eb-surface-raised)"}},t.createElement("div",{style:{flex:1,minWidth:0}},t.createElement("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--eb-text)",textTransform:"capitalize"}},l.type)),t.createElement("button",{onClick:()=>i(l.id),title:"Clone",style:{padding:"6px",background:"var(--eb-surface)",border:"1px solid var(--eb-border)",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",color:"var(--eb-text)"}},t.createElement(cr,{size:16})),t.createElement("button",{onClick:()=>{r(l.id)},title:"Delete",style:{padding:"6px",background:"var(--eb-danger)",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",color:"white"}},t.createElement(Or,{size:16})),t.createElement("button",{onClick:()=>a(null),title:"Close",style:{padding:"6px",background:"var(--eb-surface)",border:"1px solid var(--eb-border)",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",color:"var(--eb-text)"}},t.createElement(Ar,{size:16}))),t.createElement("div",{className:"eb-panel-body",style:{display:"flex",flexDirection:"column",gap:"15px"}},(()=>{const e=[];switch(l.type){case"text":e.push(t.createElement("div",{key:"text"},t.createElement("label",{style:u},"Text"),t.createElement("textarea",{value:d.text||"",onChange:e=>p("text",e.target.value),style:{...m,minHeight:"100px"}})),t.createElement("div",{key:"fontSize"},t.createElement("label",{style:u},"Font Size"),t.createElement("input",{type:"text",value:d.fontSize||"",onChange:e=>p("fontSize",e.target.value),placeholder:"16px",style:m})),t.createElement("div",{key:"fontFamily"},t.createElement("label",{style:u},"Font Family"),t.createElement("select",{value:d.fontFamily||"",onChange:e=>p("fontFamily",e.target.value),style:m},t.createElement("option",{value:""},"(Use Design System)"),t.createElement("option",{value:"Arial, sans-serif"},"Arial"),t.createElement("option",{value:"Helvetica, sans-serif"},"Helvetica"),t.createElement("option",{value:"Georgia, serif"},"Georgia"),t.createElement("option",{value:"'Times New Roman', serif"},"Times New Roman"),t.createElement("option",{value:"'Courier New', monospace"},"Courier New"),t.createElement("option",{value:"Verdana, sans-serif"},"Verdana"))),t.createElement("div",{key:"fontWeight"},t.createElement("label",{style:u},"Font Weight"),t.createElement("select",{value:d.fontWeight||"",onChange:e=>p("fontWeight",e.target.value),style:m},t.createElement("option",{value:""},"(Use Design System)"),t.createElement("option",{value:"300"},"Light (300)"),t.createElement("option",{value:"400"},"Normal (400)"),t.createElement("option",{value:"500"},"Medium (500)"),t.createElement("option",{value:"600"},"Semibold (600)"),t.createElement("option",{value:"700"},"Bold (700)"))),t.createElement("div",{key:"color"},t.createElement("label",{style:u},"Color"),t.createElement("input",{type:"color",value:d.color||"#000000",onChange:e=>p("color",e.target.value),style:m})),t.createElement("div",{key:"lineHeight"},t.createElement("label",{style:u},"Line Height"),t.createElement("input",{type:"text",value:d.lineHeight||"",onChange:e=>p("lineHeight",e.target.value),placeholder:"1.5",style:m})),t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"left",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))));break;case"button":e.push(t.createElement("div",{key:"text"},t.createElement("label",{style:u},"Button Text"),t.createElement("input",{type:"text",value:d.text||"",onChange:e=>p("text",e.target.value),style:m})),t.createElement("div",{key:"href"},t.createElement("label",{style:u},"Link URL"),t.createElement("input",{type:"text",value:d.href||"",onChange:e=>p("href",e.target.value),placeholder:"https://example.com",style:m})),t.createElement("div",{key:"backgroundColor"},t.createElement("label",{style:u},"Background Color"),t.createElement("input",{type:"color",value:d.backgroundColor||"#007bff",onChange:e=>p("backgroundColor",e.target.value),style:m})),t.createElement("div",{key:"color"},t.createElement("label",{style:u},"Text Color"),t.createElement("input",{type:"color",value:d.color||"#ffffff",onChange:e=>p("color",e.target.value),style:m})),t.createElement("div",{key:"borderRadius"},t.createElement("label",{style:u},"Border Radius"),t.createElement("input",{type:"text",value:d.borderRadius||"",onChange:e=>p("borderRadius",e.target.value),placeholder:"6px",style:m})),t.createElement("div",{key:"padding"},t.createElement("label",{style:u},"Padding"),t.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"}},t.createElement("input",{type:"text",value:d.paddingV||"",onChange:e=>p("paddingV",e.target.value),placeholder:"Vertical (8px)",style:m}),t.createElement("input",{type:"text",value:d.paddingH||"",onChange:e=>p("paddingH",e.target.value),placeholder:"Horizontal (12px)",style:m}))),t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"left",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))));break;case"image":e.push(t.createElement("div",{key:"src"},t.createElement("label",{style:u},"Image URL"),t.createElement("div",{style:{display:"flex",gap:"8px"}},t.createElement("input",{type:"text",value:d.src||"",onChange:e=>p("src",e.target.value),placeholder:"https://example.com/image.jpg",style:{...m,flex:1}}),t.createElement("button",{onClick:()=>c(!0),style:{padding:"8px 12px",backgroundColor:"var(--eb-info)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap"}},"üì§ Upload")),d.src&&t.createElement("div",{style:{marginTop:"10px",textAlign:"center"}},t.createElement("img",{src:d.src,alt:"Preview",style:{maxWidth:"100%",maxHeight:"150px",border:"1px solid var(--eb-border)",borderRadius:"4px"}}))),t.createElement("div",{key:"width"},t.createElement("label",{style:u},"Width"),t.createElement("input",{type:"text",value:d.width||"",onChange:e=>p("width",e.target.value),placeholder:"auto or 300px",style:m})),t.createElement("div",{key:"alt"},t.createElement("label",{style:u},"Alt Text"),t.createElement("input",{type:"text",value:d.alt||"",onChange:e=>p("alt",e.target.value),style:m})),t.createElement("div",{key:"href"},t.createElement("label",{style:u},"Link URL"),t.createElement("input",{type:"text",value:d.href||"",onChange:e=>p("href",e.target.value),placeholder:"https://example.com",style:m})));break;case"divider":e.push(t.createElement("div",{key:"borderColor"},t.createElement("label",{style:u},"Border Color"),t.createElement("input",{type:"color",value:d.borderColor||"#dddddd",onChange:e=>p("borderColor",e.target.value),style:m})),t.createElement("div",{key:"borderWidth"},t.createElement("label",{style:u},"Border Width"),t.createElement("input",{type:"text",value:d.borderWidth||"",onChange:e=>p("borderWidth",e.target.value),placeholder:"1px",style:m})),t.createElement("div",{key:"style"},t.createElement("label",{style:u},"Style"),t.createElement("select",{value:d.style||"solid",onChange:e=>p("style",e.target.value),style:m},t.createElement("option",{value:"solid"},"Solid"),t.createElement("option",{value:"dashed"},"Dashed"),t.createElement("option",{value:"dotted"},"Dotted"))));break;case"spacer":e.push(t.createElement("div",{key:"height"},t.createElement("label",{style:u},"Height"),t.createElement("input",{type:"text",value:d.height||"",onChange:e=>p("height",e.target.value),placeholder:"20px",style:m})));break;case"video":e.push(t.createElement("div",{key:"src"},t.createElement("label",{style:u},"Video URL"),t.createElement("input",{type:"text",value:d.src||"",onChange:e=>p("src",e.target.value),placeholder:"https://youtube.com/embed/... or video.mp4",style:m})),t.createElement("div",{key:"poster"},t.createElement("label",{style:u},"Poster Image URL"),t.createElement("input",{type:"text",value:d.poster||"",onChange:e=>p("poster",e.target.value),placeholder:"https://example.com/thumbnail.jpg",style:m})),t.createElement("div",{key:"width"},t.createElement("label",{style:u},"Width"),t.createElement("input",{type:"text",value:d.width||"",onChange:e=>p("width",e.target.value),placeholder:"100% or 600px",style:m})),t.createElement("div",{key:"height"},t.createElement("label",{style:u},"Height"),t.createElement("input",{type:"text",value:d.height||"",onChange:e=>p("height",e.target.value),placeholder:"auto or 400px",style:m})),t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"center",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))),t.createElement("div",{key:"controls"},t.createElement("label",{style:u},t.createElement("input",{type:"checkbox",checked:!1!==d.controls,onChange:e=>p("controls",e.target.checked),style:{marginRight:"8px"}}),"Show Controls")));break;case"timer":e.push(t.createElement("div",{key:"targetDate"},t.createElement("label",{style:u},"Target Date/Time (UTC)"),t.createElement("input",{type:"datetime-local",value:d.targetDate?new Date(d.targetDate).toISOString().slice(0,16):"",onChange:e=>{const t=new Date(e.target.value).toISOString();p("targetDate",t)},style:m})),t.createElement("div",{key:"format"},t.createElement("label",{style:u},"Format"),t.createElement("input",{type:"text",value:d.format||"DD:HH:mm:ss",onChange:e=>p("format",e.target.value),placeholder:"DD:HH:mm:ss",style:m})),t.createElement("div",{key:"expiredText"},t.createElement("label",{style:u},"Expired Text"),t.createElement("input",{type:"text",value:d.expiredText||"Offer expired",onChange:e=>p("expiredText",e.target.value),style:m})),t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"center",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))),t.createElement("div",{key:"color"},t.createElement("label",{style:u},"Text Color"),t.createElement("input",{type:"color",value:d.color||"#dc3545",onChange:e=>p("color",e.target.value),style:m})),t.createElement("div",{key:"backgroundColor"},t.createElement("label",{style:u},"Background Color"),t.createElement("input",{type:"color",value:d.backgroundColor||"#ffffff",onChange:e=>p("backgroundColor",e.target.value),style:m})));break;case"html":e.push(t.createElement("div",{key:"html"},t.createElement("label",{style:u},"HTML Code"),t.createElement("textarea",{value:d.html||"",onChange:e=>p("html",e.target.value),placeholder:"<div style='color:red;'>Hello</div>",style:{...m,minHeight:"140px",fontFamily:"monospace"}})),t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"left",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))),t.createElement("div",{key:"padding"},t.createElement("label",{style:u},"Padding"),t.createElement("input",{type:"text",value:d.padding||"",onChange:e=>p("padding",e.target.value),placeholder:"10px",style:m})),t.createElement("div",{key:"backgroundColor"},t.createElement("label",{style:u},"Background Color"),t.createElement("input",{type:"color",value:d.backgroundColor||"#ffffff",onChange:e=>p("backgroundColor",e.target.value),style:m})));break;case"section":e.push(t.createElement("div",{key:"backgroundColor"},t.createElement("label",{style:u},"Background Color"),t.createElement("input",{type:"color",value:d.backgroundColor||"#ffffff",onChange:e=>p("backgroundColor",e.target.value),style:m})),t.createElement("div",{key:"padding"},t.createElement("label",{style:u},"Padding"),t.createElement("input",{type:"text",value:d.padding||"",onChange:e=>p("padding",e.target.value),placeholder:"20px",style:m})));break;case"columns":const r=d.columnCount||2,o=[],a=e=>{const t=r,o=[];for(let n=1;n<=t;n++){const e=l[`column${n}`]||[];o.push(...e)}const a={};for(let n=1;n<=e;n++)a[`column${n}`]=[];o.forEach((t,n)=>{a[`column${n%e+1}`].push(t)});for(let n=1;n<=e;n++)a[`width${n}`]=0;n(l.id,{props:{...d,columnCount:e},...a})},i={2:[{name:"50-50 Equal",widths:[50,50]},{name:"70-30 Sidebar",widths:[70,30]},{name:"30-70 Sidebar",widths:[30,70]},{name:"60-40",widths:[60,40]}],3:[{name:"33-33-33 Equal",widths:[33,34,33]},{name:"25-50-25 Featured",widths:[25,50,25]},{name:"40-30-30",widths:[40,30,30]},{name:"20-60-20",widths:[20,60,20]}],4:[{name:"25-25-25-25 Equal",widths:[25,25,25,25]},{name:"40-20-20-20",widths:[40,20,20,20]},{name:"30-30-20-20",widths:[30,30,20,20]}]},s=e=>{const t={};e.forEach((e,n)=>{t[`width${n+1}`]=e}),p("__bulk__",t)};o.push(t.createElement("div",{key:"help",style:{padding:"10px",backgroundColor:"var(--eb-accent-light)",borderRadius:"4px",marginBottom:"10px",fontSize:"12px",color:"var(--eb-text)"}},"üí° Changing column count will automatically redistribute your content. Use presets for quick layouts!"),t.createElement("div",{key:"columnCount"},t.createElement("label",{style:u},"Number of Columns"),t.createElement("select",{value:r,onChange:e=>a(parseInt(e.target.value)),style:m},t.createElement("option",{value:2},"2 Columns"),t.createElement("option",{value:3},"3 Columns"),t.createElement("option",{value:4},"4 Columns"))));const g=i[r]||[];g.length>0&&o.push(t.createElement("div",{key:"presets",style:{marginTop:"10px"}},t.createElement("label",{style:u},"Quick Layouts"),t.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px"}},g.map((e,n)=>t.createElement("button",{key:n,onClick:()=>s(e.widths),style:{padding:"6px 10px",fontSize:"11px",backgroundColor:"var(--eb-surface-raised)",border:"1px solid var(--eb-border)",borderRadius:"4px",cursor:"pointer",whiteSpace:"nowrap",color:"var(--eb-text)"}},e.name)))));for(let e=1;e<=r;e++){const n=`width${e}`;o.push(t.createElement("div",{key:n},t.createElement("label",{style:u},"Column ",e," Width (%)"),t.createElement("input",{type:"number",min:"0",max:"100",value:d[n]||0,onChange:e=>p(n,parseInt(e.target.value)||0),placeholder:`${Math.round(100/r)}% (auto)`,style:m})))}const h=Array.from({length:r}).reduce((e,t,n)=>e+(d[`width${n+1}`]||0),0);h>0&&o.push(t.createElement("div",{key:"total",style:{padding:"8px",backgroundColor:100===h?"var(--eb-success)":"var(--eb-warning)",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",textAlign:"center",color:"white"}},"Total: ",h,"% ",100===h?"‚úì":"‚ö†Ô∏è")),o.push(t.createElement("div",{key:"column-settings-divider",style:{borderTop:"2px solid var(--eb-border)",margin:"20px 0 15px 0",paddingTop:"15px"}},t.createElement("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",fontWeight:"bold",color:"var(--eb-text)"}},"Column-Specific Settings")));for(let e=1;e<=r;e++){const n=`columnSettings${e}`,r=d[n]||{};o.push(t.createElement("div",{key:`col-${e}-settings`,style:{padding:"10px",backgroundColor:"var(--eb-surface-raised)",borderRadius:"4px",marginBottom:"10px"}},t.createElement("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"13px",color:"var(--eb-text)"}},"Column ",e),t.createElement("div",{style:{marginBottom:"8px"}},t.createElement("label",{style:{...u,fontSize:"11px"}},"Background Color"),t.createElement("input",{type:"color",value:r.backgroundColor||"#ffffff",onChange:e=>{p(n,{...r,backgroundColor:e.target.value})},style:{...m,height:"32px"}})),t.createElement("div",{style:{marginBottom:"8px"}},t.createElement("label",{style:{...u,fontSize:"11px"}},"Padding"),t.createElement("input",{type:"text",value:r.padding||"",onChange:e=>{p(n,{...r,padding:e.target.value})},placeholder:"10px",style:m})),t.createElement("div",null,t.createElement("label",{style:{...u,fontSize:"11px"}},"Alignment"),t.createElement("select",{value:r.align||"left",onChange:e=>{p(n,{...r,align:e.target.value})},style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right")))))}e.push(...o);break;case"social":const f=d.icons||[];e.push(t.createElement("div",{key:"align"},t.createElement("label",{style:u},"Align"),t.createElement("select",{value:d.align||"center",onChange:e=>p("align",e.target.value),style:m},t.createElement("option",{value:"left"},"Left"),t.createElement("option",{value:"center"},"Center"),t.createElement("option",{value:"right"},"Right"))),t.createElement("div",{key:"iconSize"},t.createElement("label",{style:u},"Icon Size"),t.createElement("input",{type:"text",value:d.iconSize||"",onChange:e=>p("iconSize",e.target.value),placeholder:"32px",style:m})),t.createElement("div",{key:"icons-header",style:{marginTop:"15px",marginBottom:"10px"}},t.createElement("label",{style:{...u,fontWeight:"bold"}},"Social Icons"),t.createElement("button",{onClick:()=>{const e=[...f,{platform:"facebook",url:"https://facebook.com"}];p("icons",e)},style:{marginLeft:"10px",padding:"5px 10px",fontSize:"12px",backgroundColor:"var(--eb-success)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"+ Add Icon"))),f.forEach((n,r)=>{e.push(t.createElement("div",{key:`icon-${r}`,style:{marginBottom:"15px",padding:"10px",backgroundColor:"var(--eb-surface-raised)",borderRadius:"4px",border:"1px solid var(--eb-border)"}},t.createElement("div",{style:{marginBottom:"8px"}},t.createElement("label",{style:{...u,fontSize:"12px"}},"Platform"),t.createElement("select",{value:n.platform||"facebook",onChange:e=>{const t=[...f];t[r]={...t[r],platform:e.target.value},p("icons",t)},style:{...m,fontSize:"12px"}},t.createElement("option",{value:"facebook"},"Facebook"),t.createElement("option",{value:"twitter"},"Twitter"),t.createElement("option",{value:"instagram"},"Instagram"),t.createElement("option",{value:"linkedin"},"LinkedIn"),t.createElement("option",{value:"youtube"},"YouTube"),t.createElement("option",{value:"github"},"GitHub"),t.createElement("option",{value:"pinterest"},"Pinterest"),t.createElement("option",{value:"tiktok"},"TikTok"),t.createElement("option",{value:"snapchat"},"Snapchat"),t.createElement("option",{value:"reddit"},"Reddit"))),t.createElement("div",{style:{marginBottom:"8px"}},t.createElement("label",{style:{...u,fontSize:"12px"}},"URL"),t.createElement("input",{type:"text",value:n.url||"",onChange:e=>{const t=[...f];t[r]={...t[r],url:e.target.value},p("icons",t)},placeholder:"https://...",style:{...m,fontSize:"12px"}})),t.createElement("button",{onClick:()=>{const e=f.filter((e,t)=>t!==r);p("icons",e)},style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"var(--eb-danger)",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"}},"Remove")))});break;default:e.push(t.createElement("div",{key:"none",style:{fontSize:12,color:"var(--eb-text-secondary)"}},"No editable properties for this component."))}return e})()),s&&t.createElement(Ur,{currentImageUrl:d.src||"",onImageSelect:e=>{p("src",e),c(!1)},onClose:()=>c(!1)}))},Gr=({children:e,maxWidth:n="600px"})=>{const{addComponent:r,insertSavedBlock:o,designSystem:a}=Kn(),[{isOver:i,canDrop:l},s]=xn({accept:zr.NEW_COMPONENT,drop:(e,t)=>{if(t.didDrop())return void c("[CanvasDropZone] Drop already handled by nested zone, ignoring");if(c("[CanvasDropZone] Handling drop at canvas level",e),e.savedBlockId)return void o(e.savedBlockId);const n=Yn[e.componentType];if(!n)return;const a={id:`${e.componentType}-${Date.now()}`,type:e.componentType,props:n.props||{},...void 0!==n.children&&{children:n.children}};r(a)},collect:e=>({isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()})}),d=i&&l;return t.createElement("div",{ref:s,style:{width:"90%",margin:"0 auto",backgroundColor:d?"#e3f2fd":a.colors.background,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"500px",padding:"20px",border:d?"2px dashed #007bff":"2px solid transparent",transition:"all 0.2s"}},e)},Jr=({templates:e,onSelect:n,onClose:r})=>{const[o,a]=t.useState("all");return t.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:r},t.createElement("div",{className:"eb-panel",style:{borderRadius:"12px",padding:"30px",maxWidth:"900px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation()},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},t.createElement("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold",color:"var(--eb-text)"}},"Choose a Template"),t.createElement("button",{onClick:r,style:{background:"none",border:"none",fontSize:"28px",cursor:"pointer",color:"var(--eb-muted)",padding:"0",lineHeight:"1"}},"√ó")),t.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"30px",flexWrap:"wrap"}},Object.entries({all:"All Templates",popular:"Popular",marketing:"Marketing",transactional:"Transactional",engagement:"Engagement"}).map(([e,n])=>t.createElement("button",{key:e,onClick:()=>a(e),style:{padding:"8px 16px",backgroundColor:o===e?"var(--eb-accent)":"var(--eb-surface-raised)",color:o===e?"white":"var(--eb-text-secondary)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:o===e?"bold":"normal",transition:"all 0.2s"}},n))),t.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"20px"}},(()=>{const t=Object.entries(e);if("all"===o)return t;const n={popular:["welcome","newsletter","promotional"],marketing:["promotional","announcement","reengagement"],transactional:["transactional","reminder"],engagement:["welcome","feedback","invitation"]};return t.filter(([e])=>n[o]?.includes(e))})().map(([e,r])=>t.createElement("div",{key:e,onClick:()=>n(r),style:{border:"2px solid var(--eb-border)",borderRadius:"8px",padding:"20px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"var(--eb-surface)"},onMouseOver:e=>{e.currentTarget.style.borderColor="var(--eb-accent)",e.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)"},onMouseOut:e=>{e.currentTarget.style.borderColor="var(--eb-border)",e.currentTarget.style.boxShadow="none"}},t.createElement("div",{style:{width:"100%",height:"150px",backgroundColor:"var(--eb-surface-raised)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"15px",fontSize:"48px"}},"blank"===e&&"üìÑ","welcome"===e&&"üëã","newsletter"===e&&"üì∞","promotional"===e&&"üéâ","transactional"===e&&"üì¶","invitation"===e&&"‚úâÔ∏è","announcement"===e&&"üì¢","feedback"===e&&"üí¨","reminder"===e&&"‚è∞","reengagement"===e&&"üíô"),t.createElement("h3",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"bold",color:"var(--eb-text)"}},r.name),t.createElement("p",{style:{margin:0,fontSize:"13px",color:"var(--eb-text-secondary)"}},r.components?.length||0," components")))),t.createElement("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid var(--eb-border)"}},t.createElement("button",{onClick:()=>n({name:"Untitled",components:[]}),style:{width:"100%",padding:"14px",backgroundColor:"var(--eb-surface-hover)",color:"var(--eb-text)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"}},"Start from Scratch"))))},Vr=({designSystem:e,onUpdate:n,onClose:r})=>{const[o,a]=t.useState("colors"),[i,l]=t.useState(e),s=(e,t)=>{const r={...i,colors:{...i.colors,[e]:t}};l(r),n(r)},c=(e,t)=>{const r={...i,typography:{...i.typography,[e]:t}};l(r),n(r)},d={width:"100%",padding:"8px",border:"1px solid var(--eb-border)",borderRadius:"6px",fontSize:"14px",background:"var(--eb-surface)",color:"var(--eb-text)",marginTop:"4px"},p={display:"block",fontSize:"12px",fontWeight:"bold",color:"var(--eb-text-secondary)",marginBottom:"4px"},u={marginBottom:"20px"};return t.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:r},t.createElement("div",{className:"eb-panel",style:{width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation()},t.createElement("div",{className:"eb-panel-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},t.createElement("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"var(--eb-text)"}},"Design System"),t.createElement("button",{onClick:r,style:{background:"none",border:"1px solid var(--eb-border)",borderRadius:8,fontSize:"16px",cursor:"pointer",color:"var(--eb-text-secondary)",padding:"4px 8px",lineHeight:"1"}},"Close")),t.createElement("div",{style:{display:"flex",borderBottom:"1px solid var(--eb-border)",backgroundColor:"var(--eb-surface)"}},["colors","typography","spacing"].map(e=>t.createElement("button",{key:e,onClick:()=>a(e),style:{flex:1,padding:"12px",border:"none",backgroundColor:o===e?"var(--eb-surface-raised)":"transparent",borderBottom:o===e?"2px solid var(--eb-accent)":"2px solid transparent",cursor:"pointer",fontSize:"14px",fontWeight:o===e?"bold":"normal",color:o===e?"var(--eb-accent)":"var(--eb-text-secondary)",textTransform:"capitalize"}},e))),t.createElement("div",{className:"eb-panel-body",style:{overflowY:"auto",flex:1}},"colors"===o&&t.createElement("div",null,t.createElement("h3",{style:{marginTop:0,fontSize:"16px",marginBottom:"16px",color:"var(--eb-text)"}},"Color Palette"),t.createElement("div",{style:u},t.createElement("label",{style:p},"Primary Color",t.createElement("input",{type:"color",value:i.colors.primary,onChange:e=>s("primary",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Secondary Color",t.createElement("input",{type:"color",value:i.colors.secondary,onChange:e=>s("secondary",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Accent Color",t.createElement("input",{type:"color",value:i.colors.accent,onChange:e=>s("accent",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Text Color",t.createElement("input",{type:"color",value:i.colors.text,onChange:e=>s("text",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Secondary Text Color",t.createElement("input",{type:"color",value:i.colors.textSecondary,onChange:e=>s("textSecondary",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Background Color",t.createElement("input",{type:"color",value:i.colors.background,onChange:e=>s("background",e.target.value),style:d}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Border Color",t.createElement("input",{type:"color",value:i.colors.border,onChange:e=>s("border",e.target.value),style:d})))),"typography"===o&&t.createElement("div",null,t.createElement("h3",{style:{marginTop:0,fontSize:"16px",marginBottom:"16px",color:"var(--eb-text)"}},"Typography"),t.createElement("div",{style:u},t.createElement("label",{style:p},"Font Family",t.createElement("input",{type:"text",value:i.typography.fontFamily,onChange:e=>c("fontFamily",e.target.value),style:d,placeholder:"Arial, Helvetica, sans-serif"}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Heading Font",t.createElement("input",{type:"text",value:i.typography.headingFont,onChange:e=>c("headingFont",e.target.value),style:d,placeholder:"Georgia, serif"}))),t.createElement("div",{style:u},t.createElement("label",{style:p},"Body Font",t.createElement("input",{type:"text",value:i.typography.bodyFont,onChange:e=>c("bodyFont",e.target.value),style:d,placeholder:"Arial, sans-serif"}))),t.createElement("h4",{style:{fontSize:"14px",marginTop:"24px",marginBottom:"12px",color:"var(--eb-text-secondary)"}},"Font Sizes"),Object.entries(i.typography.fontSize).map(([e,r])=>t.createElement("div",{key:e,style:u},t.createElement("label",{style:p},e.toUpperCase(),t.createElement("input",{type:"text",value:r,onChange:t=>((e,t)=>{const r={...i,typography:{...i.typography,fontSize:{...i.typography.fontSize,[e]:t}}};l(r),n(r)})(e,t.target.value),style:d,placeholder:"16px"}))))),"spacing"===o&&t.createElement("div",null,t.createElement("h3",{style:{marginTop:0,fontSize:"16px",marginBottom:"16px",color:"var(--eb-text)"}},"Spacing Scale"),Object.entries(i.spacing).map(([e,r])=>t.createElement("div",{key:e,style:u},t.createElement("label",{style:p},e.toUpperCase(),t.createElement("input",{type:"text",value:r,onChange:t=>((e,t)=>{const r={...i,spacing:{...i.spacing,[e]:t}};l(r),n(r)})(e,t.target.value),style:d,placeholder:"16px"})))),t.createElement("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"var(--eb-surface)",borderRadius:"8px",border:"1px solid var(--eb-border)"}},t.createElement("p",{style:{margin:"0 0 8px 0",fontSize:"12px",fontWeight:"bold",color:"var(--eb-text-secondary)"}},"Preview:"),t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"flex-end"}},Object.entries(i.spacing).map(([e,n])=>t.createElement("div",{key:e,style:{textAlign:"center"}},t.createElement("div",{style:{width:n,height:n,backgroundColor:"var(--eb-accent)",marginBottom:"4px"}}),t.createElement("span",{style:{fontSize:"10px",color:"var(--eb-text-secondary)"}},e))))))),t.createElement("div",{className:"eb-panel-footer",style:{display:"flex",justifyContent:"flex-end",gap:"10px"}},t.createElement("button",{onClick:r,style:{padding:"8px 16px",backgroundColor:"var(--eb-muted)",color:"var(--eb-text)",border:"1px solid var(--eb-border)",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"}},"Close"))))},Yr=(e,t)=>{const n=e=>{switch(e.type){case"text":return`<div style="font-size: ${e.props.fontSize||"16px"}; font-weight: ${e.props.fontWeight||"400"}; color: ${e.props.color||"#000"}; text-align: ${e.props.align||"left"}; padding: ${e.props.padding||"10px"}; font-family: ${e.props.fontFamily||t.typography.fontFamily};">${e.props.text||""}</div>`;case"button":return`<div style="text-align: ${e.props.align||"center"}; padding: 10px;"><a href="${e.props.href||"#"}" style="display: inline-block; background-color: ${e.props.backgroundColor||t.colors.primary}; color: ${e.props.color||"#fff"}; padding: ${e.props.padding||"10px 20px"}; border-radius: ${e.props.borderRadius||"4px"}; text-decoration: none; font-weight: bold; font-family: ${t.typography.fontFamily};">${e.props.text||"Button"}</a></div>`;case"image":return`<div style="text-align: ${e.props.align||"center"}; padding: 10px;"><img src="${e.props.src||"https://placehold.co/600x400"}" alt="${e.props.alt||"Image"}" style="width: ${e.props.width||"auto"}; height: ${e.props.height||"auto"}; max-width: 100%;" /></div>`;case"divider":return`<hr style="border-color: ${e.props.borderColor||"#ddd"}; border-width: ${e.props.borderWidth||"1px"}; border-style: ${e.props.borderStyle||"solid"}; margin: ${e.props.padding||"20px 0"};" />`;case"spacer":return`<div style="height: ${e.props.height||"20px"};"></div>`;case"video":return`<div style="text-align: ${e.props.align||"center"}; padding: 10px;"><video src="${e.props.src}" poster="${e.props.poster||""}" controls style="width: ${e.props.width||"100%"}; height: ${e.props.height||"auto"}; max-width: 100%; border-radius: 4px;">Your email client does not support video playback.</video></div>`;case"html":return`<div style="padding: ${e.props.padding||"10px"};">${e.props.html||e.props.code||""}</div>`;case"columns":const r=e.props.columnCount||2,o=[];for(let t=1;t<=r;t++){const r=(e[`column${t}`]||[]).map(n).join("");o.push(`<td style="vertical-align: top; padding: 10px;">${r}</td>`)}return`<table width="100%" cellpadding="0" cellspacing="0" border="0"><tr>${o.join("")}</tr></table>`;case"section":const a=(e.children||[]).map(n).join("");return`<div style="background-color: ${e.props.backgroundColor||"transparent"}; padding: ${e.props.padding||"20px"};">${a}</div>`;default:return""}},r=e.map(n).join("\n");return`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Email Template</title>\n</head>\n<body style="margin: 0; padding: 0; font-family: ${t.typography.fontFamily}; background-color: ${t.colors.background};">\n  <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: ${t.colors.background};">\n    <tr>\n      <td align="center" style="padding: 20px 0;">\n        <table width="${t.containerWidth}" cellpadding="0" cellspacing="0" border="0" style="max-width: ${t.containerWidth}; background-color: #ffffff;">\n          <tr>\n            <td>\n              ${r}\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`},qr=({onClose:e,apiEndpoint:n})=>{const{components:r,template:o,designSystem:a}=Kn(),[i,l]=t.useState(""),[s,c]=t.useState(""),[p,u]=t.useState(""),[m,h]=t.useState(!1),f=n||"https://api.mjml.io/v1/render",y=t.useRef(new g(f)),b=async()=>{h(!0),l("Generating MJML...");try{const t=y.current.templateToMJML({name:o.name||"Email",components:r});c(t),l("Converting to HTML...");let n="";try{n=f&&"https://api.mjml.io/v1/render"!==f?await y.current.mjmlToHTML(t):Yr(r,a)}catch(e){d("API conversion failed, using basic HTML generation:",e?.message||e),n=Yr(r,a)}u(n),l("Done")}catch(t){l("Error: "+t.message)}finally{h(!1)}};t.useEffect(()=>{b()},[]);const x=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{l(`${t} copied to clipboard`)}).catch(e=>l(`Failed to copy ${t}: ${e.message}`))};return t.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:e},t.createElement("div",{style:{background:"var(--eb-surface)",borderRadius:12,padding:24,width:"90%",maxWidth:900,maxHeight:"80vh",overflowY:"auto",boxShadow:"var(--eb-shadow-lg)",color:"var(--eb-text)"},onClick:e=>e.stopPropagation()},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12}},t.createElement("h2",{style:{margin:0,fontSize:22,color:"var(--eb-text)"}},"Export Template"),t.createElement("button",{onClick:e,style:{background:"none",border:"none",fontSize:26,cursor:"pointer",color:"var(--eb-muted)"}},"√ó")),t.createElement("p",{style:{marginTop:0,fontSize:13,color:"var(--eb-text-secondary)"}},"Generate MJML, HTML, and plain text versions of your email. (HTML requires MJML runtime server-side or API endpoint; browser fallback may not inline styles.)"),t.createElement("div",{style:{marginBottom:10,fontSize:12,color:m?"var(--eb-accent)":"var(--eb-muted)"}},i),t.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(250px,1fr))",gap:12,marginBottom:16}},t.createElement("button",{disabled:!s,onClick:()=>x(s,"MJML"),style:{padding:"10px 14px",background:s?"#6610f2":"var(--eb-surface-hover)",color:s?"white":"var(--eb-muted)",border:"none",borderRadius:6,cursor:s?"pointer":"not-allowed",fontWeight:"bold",fontSize:13}},"Copy MJML"),t.createElement("button",{disabled:!p,onClick:()=>x(p,"HTML"),style:{padding:"10px 14px",background:p?"#20c997":"var(--eb-surface-hover)",color:p?"white":"var(--eb-muted)",border:"none",borderRadius:6,cursor:p?"pointer":"not-allowed",fontWeight:"bold",fontSize:13}},"Copy HTML"),t.createElement("button",{onClick:b,disabled:m,style:{padding:"10px 14px",background:m?"var(--eb-surface-hover)":"var(--eb-warning)",color:m?"var(--eb-muted)":"#212529",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:13}},m?"Regenerating...":"Regenerate")),t.createElement("details",{style:{marginBottom:14}},t.createElement("summary",{style:{cursor:"pointer",fontWeight:"bold",fontSize:14,color:"var(--eb-text)"}},"MJML Output"),t.createElement("pre",{style:{background:"var(--eb-surface-raised)",padding:12,borderRadius:6,fontSize:12,overflowX:"auto",color:"var(--eb-text)",border:"1px solid var(--eb-border)"}},s)),t.createElement("details",{style:{marginBottom:14}},t.createElement("summary",{style:{cursor:"pointer",fontWeight:"bold",fontSize:14,color:"var(--eb-text)"}},"HTML Output"),t.createElement("pre",{style:{background:"var(--eb-surface-raised)",padding:12,borderRadius:6,fontSize:12,overflowX:"auto",color:"var(--eb-text)",border:"1px solid var(--eb-border)"}},p))))},Xr=({onSave:e,onChange:n,height:r="100vh",style:o})=>{const{components:a,template:i,setComponents:l,undo:s,redo:d,canUndo:u,canRedo:m,setTemplate:g,designSystem:h,setDesignSystem:y,selectedComponent:b,setSelectedComponent:x}=Kn(),[v,E]=t.useState(!1),[w,C]=t.useState(!1),[k,S]=t.useState("desktop"),[T,D]=t.useState("desktop-600"),[I,O]=t.useState(!1),[R,M]=t.useState(!1),[N,A]=t.useState("light"),[z,L]=t.useState(!0),[P,_]=t.useState(!1);t.useEffect(()=>{n&&n(a)},[a,n]),t.useEffect(()=>{const e=e=>{I&&O(!1)};return I&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[I]),t.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.preventDefault(),e.shiftKey?d():s())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,d]),t.useEffect(()=>{const e=e=>{const t=e,{type:n,sectionConfig:r}=t.detail;c("[EmailEditor] handleAddComponent:",{type:n,sectionConfig:r});const o=Yn[n];if(!o)return void p("[EmailEditor] No template found for type:",n);let i={...o,id:Fn(),type:n};r&&"columns"===n&&(c("[EmailEditor] Applying section config:",r),i={...i,props:{...i.props,...r},column1:[],column2:[],column3:r.columnCount>=3?[]:void 0,column4:r.columnCount>=4?[]:void 0}),c("[EmailEditor] Adding component:",i),l([...a,i])};return window.addEventListener("addComponent",e),()=>window.removeEventListener("addComponent",e)},[a,l]);const j={desktop:[{id:"desktop-600",name:"Email Standard",width:"600px",description:"Standard email width"},{id:"desktop-1920",name:"Full HD (1920px)",width:"1920px",description:"Desktop 1920x1080"},{id:"desktop-1440",name:"Laptop L (1440px)",width:"1440px",description:"Desktop 1440x900"},{id:"desktop-1280",name:"Laptop (1280px)",width:"1280px",description:"Desktop 1280x800"},{id:"desktop-1024",name:"Laptop S (1024px)",width:"1024px",description:"Desktop 1024x768"}],tablet:[{id:"tablet-768",name:"iPad (768px)",width:"768px",description:"iPad Portrait"},{id:"tablet-1024",name:"iPad Pro (1024px)",width:"1024px",description:"iPad Pro Portrait"},{id:"tablet-834",name:"iPad Air (834px)",width:"834px",description:"iPad Air Portrait"},{id:"tablet-820",name:"Galaxy Tab S8 (820px)",width:"820px",description:"Samsung Galaxy Tab S8"},{id:"tablet-800",name:"Galaxy Tab A (800px)",width:"800px",description:"Samsung Galaxy Tab A"},{id:"tablet-810",name:"Pixel Tablet (810px)",width:"810px",description:"Google Pixel Tablet"},{id:"tablet-600",name:"Tablet S (600px)",width:"600px",description:"Small Tablet"}],mobile:[{id:"mobile-393",name:"Pixel 7 (393px)",width:"393px",description:"Google Pixel 7/7 Pro"},{id:"mobile-412",name:"Pixel 6 (412px)",width:"412px",description:"Google Pixel 6"},{id:"mobile-360",name:"Galaxy S20 (360px)",width:"360px",description:"Samsung Galaxy S20"},{id:"mobile-384",name:"Galaxy S21 (384px)",width:"384px",description:"Samsung Galaxy S21"},{id:"mobile-390",name:"iPhone 12/13 (390px)",width:"390px",description:"iPhone 12, 13 Pro"},{id:"mobile-375",name:"iPhone SE (375px)",width:"375px",description:"iPhone SE, 6, 7, 8"},{id:"mobile-414",name:"iPhone Plus (414px)",width:"414px",description:"iPhone 6+, 7+, 8+"},{id:"mobile-428",name:"iPhone 14 Pro Max (428px)",width:"428px",description:"iPhone 14 Pro Max"},{id:"mobile-430",name:"Galaxy S22+ (430px)",width:"430px",description:"Samsung Galaxy S22+"},{id:"mobile-320",name:"Mobile S (320px)",width:"320px",description:"Small Mobile"}]},$=()=>{const e=[...j.desktop,...j.tablet,...j.mobile].find(e=>e.id===T);return e?.width||"600px"},H=()=>[...j.desktop,...j.tablet,...j.mobile].find(e=>e.id===T);return t.useEffect(()=>{c("[EmailEditor] Theme changed to:",N),c("[EmailEditor] Root className will be:",`eb-root ${N}`)},[N]),t.createElement("div",{className:`eb-root ${N}`,style:{display:"grid",gridTemplateColumns:z?"33% 67%":"auto 1fr",height:r,backgroundColor:"var(--eb-bg)",color:"var(--eb-text)",...o}},t.createElement("div",{className:"eb-panel",style:{borderRight:"1px solid var(--eb-border)",overflowY:"hidden",position:"relative",display:"flex",flexDirection:"column"}},t.createElement("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}},t.createElement(jr,{onContentVisibilityChange:L})),b&&t.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:48,background:"var(--eb-surface)",zIndex:100,overflowY:"auto",borderRight:"1px solid var(--eb-border)",display:"flex",flexDirection:"column"}},t.createElement(Kr,null)),z&&t.createElement("div",{style:{height:"48px",padding:"10px 12px",borderTop:"1px solid var(--eb-border)",background:"var(--eb-surface)",fontSize:"11px",textAlign:"center",letterSpacing:"0.5px",color:"var(--eb-text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}},"Powered by ",t.createElement("a",{href:"https://actovision.com",target:"_blank",rel:"noopener noreferrer",style:{fontWeight:600,color:"var(--eb-text)",textDecoration:"none"}},"Actovision"))),t.createElement("div",{className:"eb-canvas",style:{padding:"0",overflowY:"auto",position:"relative",display:"flex",flexDirection:"column"},onClick:()=>x(null)},t.createElement("div",{style:{padding:"12px 20px",borderBottom:"1px solid var(--eb-border)",background:"var(--eb-surface-raised)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px"}},t.createElement("div",{style:{display:"flex",gap:"6px",alignItems:"center",background:"var(--eb-surface)",padding:"6px",borderRadius:"var(--eb-radius-sm)",border:"1px solid var(--eb-border)",position:"relative"}},t.createElement("button",{onClick:()=>{S("desktop"),D("desktop-600")},title:"Desktop",style:{padding:"8px",background:"desktop"===k?"var(--eb-accent)":"transparent",color:"desktop"===k?"white":"var(--eb-text-secondary)",border:"1px solid "+("desktop"===k?"var(--eb-accent)":"transparent"),borderRadius:"var(--eb-radius-xs)",cursor:"pointer"}},t.createElement(yr,{size:16})),t.createElement("button",{onClick:()=>{S("tablet"),D("tablet-768")},title:"Tablet",style:{padding:"8px",background:"tablet"===k?"var(--eb-accent)":"transparent",color:"tablet"===k?"white":"var(--eb-text-secondary)",border:"1px solid "+("tablet"===k?"var(--eb-accent)":"transparent"),borderRadius:"var(--eb-radius-xs)",cursor:"pointer"}},t.createElement(Dr,{size:16})),t.createElement("button",{onClick:()=>{S("mobile"),D("mobile-393")},title:"Mobile",style:{padding:"8px",background:"mobile"===k?"var(--eb-accent)":"transparent",color:"mobile"===k?"white":"var(--eb-text-secondary)",border:"1px solid "+("mobile"===k?"var(--eb-accent)":"transparent"),borderRadius:"var(--eb-radius-xs)",cursor:"pointer"}},t.createElement(Sr,{size:16})),t.createElement("div",{style:{width:1,height:24,background:"var(--eb-border)"}}),t.createElement("div",{style:{position:"relative"}},t.createElement("button",{onClick:e=>{e.stopPropagation(),O(!I)},style:{padding:"8px 12px",background:"transparent",color:"var(--eb-text)",border:"none",borderRadius:"var(--eb-radius-xs)",cursor:"pointer",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px",minWidth:"140px"}},t.createElement("span",null,H()?.name||"Select size"),t.createElement(rr,{size:14})),I&&t.createElement("div",{className:"eb-panel",style:{position:"absolute",top:"calc(100% + 8px)",left:0,minWidth:"280px",maxHeight:"400px",overflowY:"auto",zIndex:1e4,padding:"8px",borderRadius:"var(--eb-radius-sm)",border:"1px solid var(--eb-border)",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},onClick:e=>e.stopPropagation()},j[k].map(e=>t.createElement("button",{key:e.id,onClick:()=>{D(e.id),O(!1)},style:{width:"100%",padding:"10px 12px",background:T===e.id?"var(--eb-accent)":"transparent",color:T===e.id?"white":"var(--eb-text)",border:"none",borderRadius:"var(--eb-radius-xs)",cursor:"pointer",fontSize:"13px",textAlign:"left",transition:"var(--eb-transition)",marginBottom:"4px"}},t.createElement("div",{style:{fontWeight:600}},e.name),t.createElement("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"}},e.description)))))),t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"}},t.createElement("button",{onClick:()=>_(!P),style:{padding:"10px 18px",background:P?"var(--eb-accent)":"var(--eb-surface-raised)",color:P?"white":"var(--eb-text)",border:"1px solid "+(P?"var(--eb-accent)":"var(--eb-border-strong)"),borderRadius:"var(--eb-radius-sm)",cursor:"pointer",fontSize:"13px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"}},P?t.createElement(t.Fragment,null,t.createElement(wr,{size:16}),"Edit"):t.createElement(t.Fragment,null,t.createElement(pr,{size:16}),"Preview")),t.createElement("button",{onClick:()=>E(!0),style:{padding:"10px 18px",background:"var(--eb-warning)",color:"white",border:"none",borderRadius:"var(--eb-radius-sm)",cursor:"pointer",fontSize:"13px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"}},t.createElement(ur,{size:16}),"Templates"),t.createElement("button",{onClick:()=>M(!0),style:{padding:"10px 18px",background:"var(--eb-surface-raised)",color:"var(--eb-text)",border:"1px solid var(--eb-border-strong)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer",fontSize:"13px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"}},t.createElement(dr,{size:16}),"Export"),t.createElement("button",{onClick:()=>A("dark"===N?"light":"dark"),title:`Switch to ${"dark"===N?"light":"dark"} theme`,style:{padding:"10px",background:"var(--eb-surface-raised)",color:"var(--eb-text)",border:"1px solid var(--eb-border-strong)",borderRadius:"var(--eb-radius-sm)",cursor:"pointer",display:"flex",alignItems:"center"}},"dark"===N?t.createElement(Tr,{size:18}):t.createElement(br,{size:18})),t.createElement("button",{onClick:s,disabled:!u,title:"Undo (Cmd+Z)",style:{padding:"10px",background:u?"var(--eb-surface-raised)":"var(--eb-surface)",color:u?"var(--eb-text)":"var(--eb-muted)",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:u?"pointer":"not-allowed",opacity:u?1:.5,display:"flex",alignItems:"center"}},t.createElement(Mr,{size:18})),t.createElement("button",{onClick:d,disabled:!m,title:"Redo (Cmd+Shift+Z)",style:{padding:"10px",background:m?"var(--eb-surface-raised)":"var(--eb-surface)",color:m?"var(--eb-text)":"var(--eb-muted)",border:"1px solid var(--eb-border)",borderRadius:"var(--eb-radius-sm)",cursor:m?"pointer":"not-allowed",opacity:m?1:.5,display:"flex",alignItems:"center"}},t.createElement(Cr,{size:18})),e&&t.createElement("button",{onClick:()=>{const t={...i,components:a,designSystem:h,updatedAt:(new Date).toISOString(),version:"1.0.0"};console.log("=== Email Template Data ==="),console.log(JSON.stringify(t,null,2)),console.log("==========================="),e&&e(t)},style:{padding:"10px 24px",background:"var(--eb-success)",color:"white",border:"none",borderRadius:"var(--eb-radius-sm)",cursor:"pointer",fontSize:"14px",fontWeight:700}},"Save"))),t.createElement("div",{style:{textAlign:"center",margin:"10px 0 0",fontSize:"12px",color:"var(--eb-text-secondary)",fontWeight:600}},H()&&t.createElement(t.Fragment,null,"desktop"===k&&"üñ•Ô∏è ","tablet"===k&&"üì± ","mobile"===k&&"üì± ",H()?.name)),t.createElement("div",{style:{padding:"20px",flex:1,backgroundImage:P?"none":"linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px)",backgroundSize:"20px 20px",backgroundPosition:"center center"}},P?t.createElement("div",{style:{width:"90%",margin:"0 auto",backgroundColor:h.colors.background,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"500px",padding:"20px",transition:"all 0.2s"}},t.createElement("div",{style:{width:$(),maxWidth:h.containerWidth,margin:"0 auto",minHeight:"400px"}},0===a.length?t.createElement("div",{style:{padding:"60px 20px",textAlign:"center",color:"#6c757d"}},t.createElement("p",{style:{fontSize:"18px",marginBottom:"10px"}},"No content to preview"),t.createElement("p",{style:{fontSize:"14px"}},"Exit preview mode to add components")):a.map(e=>t.createElement("div",{key:e.id,style:{marginBottom:"8px"}},t.createElement(Br,{component:e}))))):t.createElement(Gr,null,t.createElement("div",{style:{width:$(),maxWidth:h.containerWidth,margin:"0 auto",minHeight:"400px"}},0===a.length?t.createElement("div",{style:{padding:"60px 20px",textAlign:"center",color:"#6c757d"}},t.createElement("p",{style:{fontSize:"18px",marginBottom:"10px"}},"Start building your email"),t.createElement("p",{style:{fontSize:"14px"}},"Drag components from the sidebar or click to add")):a.map((e,n)=>t.createElement(t.Fragment,{key:e.id},t.createElement(Zr,{insertIndex:n}),t.createElement($r,{component:e,index:n},t.createElement(Br,{component:e})),n===a.length-1&&t.createElement(Zr,{insertIndex:a.length}))))))),v&&t.createElement(Jr,{templates:f,onSelect:e=>{g(e),E(!1)},onClose:()=>E(!1)}),w&&t.createElement(Vr,{designSystem:h,onUpdate:y,onClose:()=>C(!1)}),R&&t.createElement(qr,{onClose:()=>M(!1)}))},Zr=({insertIndex:e})=>{const{addComponent:n,insertSavedBlock:r}=Kn(),[{isOver:o},a]=xn({accept:zr.NEW_COMPONENT,drop:t=>{if(t.savedBlockId)return void r(t.savedBlockId,e);if(t.sectionConfig){const r=Yn.columns,o={...r,id:Fn(),props:{...r.props,...t.sectionConfig},column1:[],column2:[],column3:t.sectionConfig.columnCount>=3?[]:void 0,column4:t.sectionConfig.columnCount>=4?[]:void 0};return void n(o,e)}const o=t.componentType,a=Yn[o];if(!a)return;const i={id:Fn(),type:o,props:a.props||{},...void 0!==a.children&&{children:a.children}};n(i,e)},collect:e=>({isOver:e.isOver()})});return t.createElement("div",{ref:a,style:{height:8,margin:"4px 0",borderRadius:4,background:o?"#007bff":"transparent",transition:"background 0.15s"}})},Qr=t.forwardRef(({initialTemplate:e,onSave:n,onChange:r,height:o="100vh",style:a},i)=>{const l=t.useRef(null);return t.useImperativeHandle(i,()=>({loadDesign:e=>{l.current?.loadDesign(e)},saveDesign:()=>l.current?.saveDesign()||{components:[]},exportHtml:async()=>l.current?.exportHtml()||{html:"",mjml:""},exportMjml:()=>l.current?.exportMjml()||"",exportJson:()=>l.current?.exportJson()||{components:[]}})),t.createElement(Ut,{backend:Wn},t.createElement(Vn,null,t.createElement(Gn,{...e&&{initialTemplate:e}},t.createElement(to,{ref:l,...n&&{onSave:n},...r&&{onChange:r},height:o,...a&&{style:a}}))))});Qr.displayName="EmailEditor";const eo=Qr,to=t.forwardRef((e,n)=>{const{components:r,setComponents:o,designSystem:a}=Kn(),i=t.useMemo(()=>new g,[]);return t.useImperativeHandle(n,()=>({loadDesign:e=>{o(e.components)},saveDesign:()=>({components:r}),exportHtml:async()=>{const e=i.templateToMJML({name:"Export",components:r});return{html:await i.mjmlToHTML(e),mjml:e}},exportMjml:()=>i.templateToMJML({name:"Export",components:r}),exportJson:()=>({components:r})})),t.createElement(Xr,{...e})});to.displayName="EmailEditorContentWithMethods";const no=({block:e,onDelete:n,onRename:r})=>{const[o,a]=t.useState(!1),[i,l]=t.useState(e.name),[{isDragging:s},c]=hn({type:zr.NEW_COMPONENT,item:{savedBlockId:e.id,restoreMultiple:!0},collect:e=>({isDragging:e.isDragging()})}),d=()=>{i.trim()&&i!==e.name&&r(e.id,i.trim()),a(!1)};return t.createElement("li",{ref:c,style:{border:"1px solid var(--eb-border)",borderRadius:4,padding:10,background:"var(--eb-surface)",position:"relative",opacity:s?.5:1,cursor:"grab"}},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:6}},o?t.createElement("input",{value:i,onChange:e=>l(e.target.value),onBlur:d,onKeyDown:t=>{"Enter"===t.key&&d(),"Escape"===t.key&&(l(e.name),a(!1))},autoFocus:!0,style:{flex:1,padding:"4px 6px",fontSize:12,border:"1px solid var(--eb-border)",borderRadius:4,background:"var(--eb-background)",color:"var(--eb-text)"}}):t.createElement("strong",{style:{fontSize:13,flex:1,color:"var(--eb-text)"},onDoubleClick:()=>a(!0),title:"Double-click to rename"},e.name),t.createElement("button",{onClick:()=>n(e.id),style:{background:"var(--eb-danger)",color:"white",border:"none",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:11}},"Delete")),t.createElement("div",{style:{fontSize:11,color:"var(--eb-text-secondary)",marginTop:4}},"Saved ",new Date(e.createdAt).toLocaleString()," ‚Ä¢ ",e.components.length," components"),t.createElement("div",{style:{marginTop:6,display:"flex",flexWrap:"wrap",gap:4}},e.components.slice(0,6).map(e=>t.createElement("span",{key:e.id,style:{background:"var(--eb-muted)",borderRadius:3,padding:"2px 4px",fontSize:10,color:"var(--eb-text)"}},e.type)),e.components.length>6&&t.createElement("span",{style:{fontSize:10,color:"var(--eb-text-secondary)"}},"+",e.components.length-6," more")),t.createElement("p",{style:{fontSize:10,color:"var(--eb-text-secondary)",marginTop:6}},"Drag onto canvas to restore."))};o(),e.CanvasDropZone=Gr,e.ColumnDropZone=Hr,e.ColumnsRenderer=Wr,e.ComponentRenderer=Br,e.ComponentToolbar=jr,e.DesignSystemPanel=Vr,e.DraggableComponent=$r,e.EmailEditor=eo,e.EmailEditorProvider=Gn,e.ExportModal=qr,e.ImageUploadModal=Ur,e.ItemTypes=zr,e.KapthaEmailEditorWrapper=Ce,e.PropertyEditor=Kr,e.SavedBlocksPanel=({onClose:e})=>{const{components:n,selectedComponent:r,savedBlocks:o,addSavedBlock:a,removeSavedBlock:i,renameSavedBlock:l}=Kn(),[s,c]=t.useState(""),[d,p]=t.useState(""),u=o.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),m=e=>{if(!s.trim())return;const t=e&&r?n.filter(e=>e.id===r):n;a(s.trim(),t),c("")},g=(e,t)=>{l(e,t)};return t.createElement("div",{className:"eb-panel"},t.createElement("div",{className:"eb-panel-header",style:{display:"flex",alignItems:"center",gap:8}},t.createElement("h3",{style:{margin:0,color:"var(--eb-text)"}},"Saved Blocks"),t.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:6}},t.createElement("button",{onClick:e,style:{padding:"6px 10px",background:"var(--eb-muted)",color:"var(--eb-text)",border:"1px solid var(--eb-border)",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:12}},"Close"))),t.createElement("div",{className:"eb-panel-body"},t.createElement("div",{style:{display:"flex",gap:6,marginBottom:10}},t.createElement("input",{value:s,onChange:e=>c(e.target.value),placeholder:r?"Name (selected component)":"Name (all components)",style:{flex:1,padding:"6px 8px",border:"1px solid var(--eb-border)",borderRadius:8,background:"var(--eb-surface)",color:"var(--eb-text)"}}),t.createElement("button",{onClick:()=>m(!1),style:{padding:"6px 10px",background:"var(--eb-success)",color:"white",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:12}},"Save All"),t.createElement("button",{disabled:!r,onClick:()=>m(!0),style:{padding:"6px 10px",background:r?"var(--eb-info)":"var(--eb-muted)",color:"white",border:"none",borderRadius:8,fontWeight:"bold",cursor:r?"pointer":"not-allowed",fontSize:12}},"Save Selected")),t.createElement("div",{style:{marginBottom:12}},t.createElement("input",{value:d,onChange:e=>p(e.target.value),placeholder:"Search blocks...",style:{width:"100%",padding:"6px 8px",border:"1px solid var(--eb-border)",borderRadius:8,background:"var(--eb-surface)",color:"var(--eb-text)"}})),0===u.length&&t.createElement("p",{style:{color:"var(--eb-text-secondary)",fontSize:13}},"No blocks match your search."),t.createElement("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gap:8}},u.map(e=>t.createElement(no,{key:e.id,block:e,onDelete:i,onRename:g}))),t.createElement("p",{style:{fontSize:11,color:"var(--eb-text-secondary)",marginTop:12}},"Tip: Drag a saved block into the canvas to restore its components at the end. (Insert-at-position coming soon)")))},e.TemplateSelector=Jr,e.componentTemplates=Yn,e.useEmailEditor=Kn,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}),console.log("[Kaptha] DEBUG - Bundle loaded. KapthaEmailEditor type:",typeof KapthaEmailEditor),console.log("[Kaptha] DEBUG - KapthaEmailEditor keys:","object"==typeof KapthaEmailEditor?Object.keys(KapthaEmailEditor):"N/A"),"undefined"!=typeof window&&"undefined"!=typeof KapthaEmailEditor)if(window.KapthaEmailEditor=KapthaEmailEditor,"function"==typeof KapthaEmailEditor.initKapthaAPI)console.log("[Kaptha] Calling initKapthaAPI from exports"),KapthaEmailEditor.initKapthaAPI();else{console.log("[Kaptha] Manually initializing API");const e=function(e){if(!e||!e.id||!e.apiKey)throw new Error("[Kaptha] Editor initialization requires id and apiKey");return console.log("[Kaptha] createEditor called with config:",e),console.warn("[Kaptha] API initialized but editor instantiation requires React component from KapthaEmailEditor.EmailEditor"),{loadDesign:function(){console.warn("[Kaptha] loadDesign not yet implemented")},saveDesign:function(){return console.warn("[Kaptha] saveDesign not yet implemented"),{components:[]}},exportHtml:async function(){return console.warn("[Kaptha] exportHtml not yet implemented"),{html:"",mjml:""}},destroy:function(){console.warn("[Kaptha] destroy not yet implemented")}}};window.kaptha={version:"2.0.0",init:e,createEditor:e},window.kapthaEmailEditor=window.kaptha,console.log("[Kaptha] API manually initialized - window.kaptha and window.kapthaEmailEditor available")}
//# sourceMappingURL=builder.js.map
